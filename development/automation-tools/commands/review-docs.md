---
description: 使用docs-review skill审核文档质量,验证链接,检查格式
argument-hint: [文件路径或目录] [--detailed]
allowed-tools: Read, Grep, Bash, Skill
---

# 文档质量审核器

使用docs-review skill对文档进行全面质量审核,包括风格、格式、链接、完整性等。

## 核心功能

1. **风格审核**
   - 使用docs-review skill检查
   - 对话式风格验证
   - 术语一致性检查

2. **格式审核**
   - 标题层级检查
   - 列表格式检查
   - 代码块格式检查

3. **链接审核**
   - 内部链接有效性
   - 外部链接有效性
   - 文件引用检查

4. **完整性审核**
   - 必需字段检查
   - 元数据检查
   - 版本号检查

## 使用方法

```bash
/review-docs                                    # 审核最近修改的文档
/review-docs docs/design/                       # 审核指定目录
/review-docs docs/design/评分系统.md            # 审核指定文件
/review-docs --detailed                         # 详细审核模式
```

## 执行流程

### 步骤1: 确定审核范围

```bash
如果用户提供了文件路径 $1:
  审核指定文件或目录
否则:
  查找最近修改的文档
  优先级:
  1. .claude/commands/ 和 .claude/hooks/
  2. docs/design/
  3. development/issues/
```

### 步骤2: 加载docs-review skill

```bash
调用docs-review skill

使用Skill tool:
  skill: "docs-review"
  基于文档内容执行审核
```

### 步骤3: 执行各项检查

```bash
对每个文档执行:

1. 风格检查(docs-review):
   - 语气是否对话式
   - 是否面向读者
   - 是否清晰易懂

2. 格式检查:
   - 标题层级是否正确(无跳跃)
   - 列表格式是否统一
   - 代码块是否有语言标记

3. 链接检查:
   - 内部链接: [text](path) → path是否存在
   - 外部链接: 尝试访问验证
   - 引用格式: §章节号格式是否正确

4. 完整性检查:
   - YAML frontmatter(如果有)
   - 必需章节(如适用)
   - 版本号一致性
```

### 步骤4: 生成审核报告

```markdown
📊 **文档质量审核报告**

━━━━━━━━━━━━━━━━

审核范围: 3个文档
审核时间: 2025-01-06 20:45
审核模式: 标准模式

━━━━━━━━━━━━━━━━

✅ **通过审核** (2个):

1. discuss.md
   - 风格: ✅ 对话式,清晰
   - 格式: ✅ 结构正确
   - 链接: ✅ 无外部链接
   - 完整性: ✅ 包含所有必需部分

2. sync-docs.md
   - 风格: ✅ 专业但易懂
   - 格式: ✅ 标题层级正确
   - 链接: ✅ 引用正确
   - 完整性: ✅ 文档完整

━━━━━━━━━━━━━━━━

⚠️ **需要改进** (1个):

1. check-progress.md
   - 风格: ⚠️ 部分段落过于技术化
     建议: 使用更多生活化类比

   - 格式: ✅ 格式正确

   - 链接: ⚠️ 1个可能失效的链接
     - 第45行: [开发清单](../清单.md)
     - 问题: 文件名不匹配
     - 建议: 更新为正确路径

   - 完整性: ⚠️ 缺少使用示例部分
     建议: 添加实际使用示例

━━━━━━━━━━━━━━━━

📋 **问题汇总**:

风格问题: 1个
  - check-progress.md: 部分内容过于技术化

格式问题: 0个

链接问题: 1个
  - check-progress.md: 第45行链接失效

完整性问题: 1个
  - check-progress.md: 缺少使用示例

━━━━━━━━━━━━━━━━

💡 **修复建议**:

高优先级:
  1. 修复check-progress.md的失效链接
  2. 添加使用示例到check-progress.md

中优先级:
  3. 简化check-progress.md的技术描述

低优先级:
  4. 添加更多使用场景示例

━━━━━━━━━━━━━━━━

🎯 **总体评分**: B+ (85分)

- 风格: A- (90分)
- 格式: A (95分)
- 链接: B (80分)
- 完整性: B+ (85分)

━━━━━━━━━━━━━━━━

💬 **总结**:

文档整体质量良好,主要问题集中在链接和完整性。
建议修复高优先级问题后可以达到A级质量。

需要我自动修复这些问题吗? (y/n)
```

## 详细模式

使用 `--detailed` 参数时,提供更详细的审核信息:

```markdown
📊 **详细文档审核报告**

━━━━━━━━━━━━━━━━

📄 文档: check-progress.md (6.7KB)

━━━━━━━━━━━━━━━━

🎨 **风格审核** (docs-review):

✅ 优点:
  - 整体语气友好
  - 使用了emoji增强可读性
  - 结构清晰

⚠️ 改进建议:
  第23-30行:
  "执行流程包含以下步骤:扫描、分析、生成"

  建议: 使用生活化类比
  "就像整理房间: 先收集(扫描),再分类(分析),最后归位(生成)"

  第56-60行:
  "基于正则表达式模式匹配文件"

  建议: 简化技术术语
  "使用智能搜索找到匹配的文件"

━━━━━━━━━━━━━━━━

📐 **格式审核**:

✅ 标题层级:
  # 标题1 (1个)
  ## 标题2 (5个)
  ### 标题3 (12个)
  层级正确,无跳跃

✅ 列表格式:
  - 无序列表: 统一使用"-"
  - 有序列表: 统一使用"1."
  格式一致

✅ 代码块:
  所有代码块都有语言标记
  ```bash
  ```markdown
  ```yaml

━━━━━━━━━━━━━━━━

🔗 **链接审核**:

内部链接:
  ✅ [开发清单](../清单.md) → 文件存在
  ⚠️ [CHANGELOG](../../docs/CHANGELOG.md) → 路径可能错误
     实际路径应该是: docs/product/CHANGELOG.md

外部链接:
  (无)

文件引用:
  ✅ @docs/product/claude.md → 文件存在

━━━━━━━━━━━━━━━━

📝 **完整性审核**:

✅ YAML frontmatter:
  ---
  description: 检查项目进度...
  argument-hint: [--detailed | --questions-only]
  allowed-tools: Read, Grep, Bash
  ---
  所有必需字段存在

✅ 核心章节:
  ✅ 核心功能
  ✅ 使用方法
  ✅ 执行流程
  ✅ 错误处理

⚠️ 可选章节:
  ⚠️ 使用示例 (缺失)
  ⚠️ 最佳实践 (缺失)

━━━━━━━━━━━━━━━━

💡 **详细改进建议**:

1. 修复链接 (重要):
   第45行:
   - 旧: [CHANGELOG](../../docs/CHANGELOG.md)
   + 新: [CHANGELOG](docs/product/CHANGELOG.md)

2. 添加使用示例:
   ```markdown
   ## 使用示例

   ### 示例1: 日常进度检查
   /check-progress
   → 显示今日任务摘要

   ### 示例2: 详细分析
   /check-progress --detailed
   → 显示完整的进度分析
   ```

3. 简化技术描述:
   - 替换"正则表达式"为"智能搜索"
   - 替换"YAML frontmatter"为"配置信息"

━━━━━━━━━━━━━━━━
```

## 错误处理

### 情况1: 文件不存在

```markdown
❌ 错误: 文件不存在

路径: docs/design/不存在的文档.md

请检查:
1. 文件路径是否正确
2. 文件是否已被删除或移动
3. 当前工作目录是否正确

建议: 使用 /check-progress 查看实际存在的文档
```

### 情况2: 目录为空

```markdown
ℹ️ 提示: 目录为空或没有.md文件

目录: docs/empty-folder/

建议:
- 检查目录路径
- 确认是否有文档需要审核
```

### 惎况3: docs-review skill不可用

```markdown
⚠️ 警告: docs-review skill未加载

降级为基本检查:
- ✅ 格式检查
- ✅ 链接检查
- ✅ 完整性检查
- ❌ 风格检查(跳过)

建议: 安装docs-review skill后重新审核
```

## 自动修复选项

在审核报告最后,询问是否自动修复:

```markdown
━━━━━━━━━━━━━━━━

🔧 **自动修复选项**

可以自动修复的问题:
  ✅ 链接路径错误 (1个)
  ✅ 格式不一致 (0个)
  ✅ 缺失章节 (可添加模板)

无法自动修复:
  ⚠️ 风格问题 (需要人工修改)
  ⚠️ 内容完整性 (需要人工补充)

━━━━━━━━━━━━━━━━

是否自动修复可修复的问题?

输入选项:
  y - 自动修复所有可修复问题
  n - 手动修复
  l - 列出具体修复操作
```

## 开发信息

- **创建时间**: 2025-01-06
- **开发者**: 老黑(Claude)
- **版本**: 1.0
- **状态**: 开发中
- **依赖**: docs-review skill
- **部署位置**: `.claude/commands/review-docs.md`

## 使用建议

1. **开发完成后**: 审核新开发的文档
2. **提交前**: 确保文档质量
3. **定期审核**: 每周审核一次所有文档
4. **重点审核**: 优先审核用户经常查看的文档

---
