# 游戏提交系统边界问题审查报告

> **基于设计文档v1.0的全面边界检查**
> 审查日期: 2025-01-09
> 审查范围: 设计文档v1.0 + 需求文档v2.0
> 审查结果: 发现7个潜在问题,其中2个严重矛盾,5个隐藏场景
> **更新日期**: 2025-01-09 - 已确认硬核玩家赛道切换规则 ✅

---

## 📋 执行摘要

本次审查对游戏提交系统的设计文档进行了全面边界检查,重点关注:
1. **设计与需求的一致性**
2. **隐藏的边界场景**
3. **系统集成的遗漏点**
4. **用户体验的潜在问题**

**关键发现**:
- 🔴 **2个严重矛盾** - 需求与设计不一致,必须修复
- ⚠️ **5个隐藏场景** - 未定义的边界情况,建议补充
- 💡 **3个优化建议** - 提升用户体验的改进点
- ✅ **1个新约束已确认** - 硬核玩家赛道切换规则(已同步到设计文档v1.0)

---

## 🔴 严重矛盾 (2个)

### ❌ E1: 截图数量限制不一致

**位置**:
- 需求文档 1.5: "至少1张,最多10张"
- 设计文档 步骤4: "最多5张截图"

**矛盾详情**:
```markdown
需求文档 (v2.0):
- 数量限制: 1-10张截图

设计文档 (v1.0):
- 数量限制: 最多5张截图
```

**影响**:
- 开发实现时产生歧义
- 可能导致需求验收不合格
- 用户可能上传10张截图但系统拒绝

**建议修复**:
```
需要确认:
- 选择5张还是10张?
- 理由: 5张更精简,10张更全面
- 考虑因素: 服务器存储成本、用户上传体验、展示效果
```

**决策问题**:
- [ ] 截图数量限制选择5张还是10张?
- [ ] 是否需要限制单张图片大小(<2MB)?

---

### ❌ E2: AI使用披露功能缺失

**位置**:
- 需求文档 第三部分: "AI使用披露" (3.1-3.3)
- 设计文档: **完全缺失**

**矛盾详情**:
```markdown
需求文档 (v2.0):
#### 3.1 AI工具使用声明
- 字段类型: 单选(是/否)
- 必填: ✅ 是

#### 3.2 AI使用详情 (条件显示)
- 字段类型: 文本域
- 显示条件: 仅在3.1选择"是"时显示
- 必填: 条件必填

#### 3.3 AI使用影响说明
- 内容: "根据比赛规则,使用AI的维度将不参与该维度的评分和排名"

设计文档 (v1.0):
- 步骤6: 评分维度退出 (仅多选框,没有前置的AI使用声明)
```

**影响**:
- 需求文档明确要求的"AI使用披露"功能未在设计文档中体现
- 用户直接跳到"评分维度退出",缺少前置说明
- 可能导致用户不理解为什么要退出某些维度

**建议修复**:
```
需要在设计文档中补充:

步骤5.5: AI使用披露 (新增)

**AI工具使用声明** (单选):
- ✅ 是,我在创作中使用了生成式AI工具
- ❌ 否,我没有使用生成式AI工具

**选择"是"后显示**:
- AI使用详情文本域:
  "请详细说明:
  - 使用了哪些AI工具(如Midjourney、Suno、ChatGPT等)?
  - 用于生成哪些内容(美术、音乐、代码、文案等)?
  - AI生成内容占作品的比例?"

**AI使用影响说明**:
"根据比赛规则,使用AI的维度将不参与该维度的评分和排名。
例如:如果使用AI生成美术,则'视觉效果'维度不参与排名。"

**然后进入步骤6: 评分维度退出**
```

**决策问题**:
- [ ] 是否保留"AI使用披露"步骤?(建议保留)
- [ ] AI使用详情是否必填?(建议条件必填)
- [ ] AI使用详情是否显示在游戏详情页?(建议不显示,仅管理员可见)

---

## ✅ 已确认约束 (2025-01-09更新)

### EC1: 硬核玩家赛道切换规则

**约束内容**:
- ⚠️ **身份绑定用户**: 硬核玩家身份一旦获得，该用户成为硬核玩家
- ⚠️ **永久保留**: 不可放弃身份
- ⚠️ **不可切换赛道**: 硬核玩家永远以个人赛道参赛
- ⚠️ **赛季结束处理**: 移除"硬核玩家"标记，但保留"开源贡献者"成就
- 理由：防止经济系统失衡（硬核玩家拥有推荐位购买特权）

**影响**:
- 设计文档v1.0已更新§4.2赛道切换规则
- 设计文档v1.0已更新§6.2硬核玩家身份规则
- 设计文档v1.0已更新§11.3用户引导提示
- 关键名词索引v1.5已同步更新
- 问题清单已同步记录

**详细分析**: [hardcore-player-track-switch-constraint_2025-01-09.md](hardcore-player-track-switch-constraint_2025-01-09.md)

---

## ⚠️ 隐藏场景 (5个)

### E3: 源码链接提交后无法修改

**场景描述**:
- 个人赛道提交游戏时选择公开源码
- 用户填写了错误的源码链接(如拼写错误)
- 提交后发现错误,但**无法修改源码链接**

**当前设计**:
- 设计文档 5.1 "可随时更新的内容" 中未包含源码链接
- 5.2 "评分期锁定内容" 中也未提到源码链接

**潜在问题**:
- 用户填错源码链接后无法更正
- 举报机制存在,但用户更正链接的便捷路径缺失
- 硬核玩家身份可能因链接错误被撤销

**建议补充**:
```markdown
**源码链接更新规则**:
- ✅ 评分期开始前: 允许随时修改
- ❌ 评分期开始后: 仅允许修正(需管理员审核)
- 理由: 类似下载链接,源码链接也可能失效或填错

**修正流程**:
1. 用户提交申请: 说明修正原因
2. 后端自动验证: 新链接有效性(HEAD请求)
3. 验证成功: 允许更新,保持硬核玩家身份
4. 验证失败: 拒绝更新,提示用户检查链接
```

**决策问题**:
- [ ] 源码链接是否允许评分期前修改?(建议允许)
- [ ] 源码链接是否允许评分期后修正?(建议允许,需审核)

---

### E4: Draft与已提交游戏的UI混淆风险

**场景描述**:
- 用户有1个已提交的游戏《A》
- 用户创建新Draft《B》
- 用户回到"我的游戏"页面
- **问题**: 用户可能混淆哪个是已提交的,哪个是草稿

**当前设计**:
- 设计文档未明确"我的游戏"页面的UI设计
- 未说明如何区分Draft和Published状态

**潜在问题**:
- 用户可能误删已提交的游戏
- 用户可能重复提交相同游戏
- 用户不清楚哪些游戏可以继续编辑

**建议补充**:
```markdown
**"我的游戏"页面UI设计**:

**状态标签**:
- 🟢 Published "已提交" - 不可编辑,可撤回
- 🟡 Draft "草稿" - 可继续编辑
- 🔴 Withdrawn "已撤回" - 可重新提交

**卡片显示**:
┌────────────────────────────────┐
│ 🟢 已提交                       │
│ 《游戏标题》                    │
│ 提交时间: 2025-01-08            │
│ 赛道: 个人赛道                  │
│ [查看] [撤回] [删除]            │
└────────────────────────────────┘

┌────────────────────────────────┐
│ 🟡 草稿                         │
│ 《草稿标题》                    │
│ 最后编辑: 2小时前               │
│ [继续编辑] [删除草稿]           │
└────────────────────────────────┘

**操作按钮状态**:
- Published: [查看] [撤回] [删除] - 无"编辑"按钮
- Draft: [继续编辑] [删除草稿] - 无"撤回"按钮
- Withdrawn: [重新提交] [删除] - 无"编辑"按钮
```

**决策问题**:
- [ ] "我的游戏"页面是否需要状态标签?(建议需要)
- [ ] 是否需要不同的操作按钮?(建议需要)

---

### E5: 排他锁接管机制的UI提示不清晰

**场景描述**:
- 副队长点击"我来改"
- 队长收到弹窗:"副队长B申请接管"
- **问题**: 弹窗没有说明如果队长不操作会发生什么

**当前设计**:
- 设计文档 3.2: "30秒内无响应 → 自动交接"
- 但UI设计中未明确告知用户这个"30秒"规则

**潜在问题**:
- 队长可能不知道30秒后会自动交接
- 队长可能误以为关闭弹窗=拒绝
- 副队长可能不知道为什么突然获得编辑权

**建议补充**:
```markdown
**接管弹窗UI设计**:

┌─────────────────────────────────────┐
│  副队长B申请接管编辑权               │
│                                     │
│  副队长B希望编辑游戏草稿,是否同意?   │
│                                     │
│  ⚠️ 30秒内无响应将自动交接           │
│                                     │
│  [拒绝] [同意]                      │
└─────────────────────────────────────┘

**副队长侧的UI提示**:
- 点击"我来改" → 显示提示:"已发送接管申请,等待队长响应..."
- 30秒后自动获得编辑权 → 显示提示:"队长30秒内未响应,您已获得编辑权"
- 队长拒绝 → 显示提示:"队长拒绝了您的接管申请"
```

**决策问题**:
- [ ] 是否在弹窗中明确告知30秒规则?(建议告知)
- [ ] 是否提供"拒绝后禁止X分钟内再次申请"的限制?(建议5分钟)

---

### E6: 游戏撤回后的作者快照更新逻辑未定义

**场景描述**:
- 3人团队提交游戏 → 记录作者快照[A,B,C]
- 撤回游戏 → 成员C退出团队
- 重新提交游戏 → **问题**: 新的作者快照是[A,B,C]还是[A,B]?

**当前设计**:
- 设计文档 4.2 "赛道切换规则" 未明确撤回后的作者快照更新逻辑
- 10.1 "团队成员变更" 仅提到"提交后成员退出",未提到"撤回后重新提交"

**潜在问题**:
- 如果不更新快照 → 成员C已退出但仍显示为作者(不公平)
- 如果更新快照 → 用户可能通过"撤回-换人-重新提交"滥用(添加更多作者)

**建议补充**:
```markdown
**撤回后的作者快照处理**:

**选项A: 撤回后解锁,重新提交时更新快照**
- 优点: 支持成员变更,灵活
- 缺点: 可能被滥用
- 防滥用措施:
  - 限制撤回次数(最多3次)
  - 记录撤回历史(管理员可审核)
  - 重新提交时提示: "作者列表已变更:[A,B,C] → [A,B]"

**选项B: 撤回后锁定,禁止修改作者**
- 优点: 简单,防滥用
- 缺点: 不够灵活

**推荐: 选项A + 防滥用措施**

**UI设计**:
撤回游戏 → 弹窗确认:
"""
⚠️ 撤回后重新提交时,作者列表将更新为当前团队成员。

当前团队成员: [A, B]
原提交作者: [A, B, C]

变更说明: 成员C已退出团队,将不在新作者列表中。

[确认撤回] [取消]
"""
```

**决策问题**:
- [ ] 撤回后是否允许更新作者快照?(建议允许)
- [ ] 是否限制撤回次数?(建议最多3次)
- [ ] 是否显示作者变更历史?(建议显示)

---

### E7: 硬核玩家金币发放的边界情况

**场景描述**:
- 用户第1天提交游戏,未公开源码
- 用户第5天公开源码
- **问题**: 第5天的金币何时发放?第1-4天是否补发?

**当前设计**:
- 设计文档 6.2: "哪天公开源码就从哪天开始计算"
- 但未明确"发放时机"和"是否补发"

**潜在问题**:
- 用户可能误解为"公开源码后立即获得所有历史收益"
- 系统可能每天凌晨批量发放,导致用户等待时间长
- 用户可能在第12天(最后一天)公开源码,只获得1天收益,产生落差感

**建议补充**:
```markdown
**硬核玩家金币发放规则细化**:

**发放时机**:
- 批量发放: 每天凌晨1点自动发放前一天的收益
- 即时发放: 公开元码后立即发放当天收益(测试用)

**示例1: 中途公开源码**
- 评分期12天(1号-12号)
- 用户1号提交,5号公开源码
- 发放规则:
  - 5号: 立即发放5号的收益(+50金币)
  - 6号-12号: 每天凌晨1点发放前一天的收益(+50金币/天)
  - 总计: 8天×50=400金币(不包含1-4号)

**示例2: 最后一天公开源码**
- 用户12号公开源码
- 发放规则:
  - 12号: 立即发放12号的收益(+50金币)
  - 总计: 1天×50=50金币

**UI提示**:
```
┌─────────────────────────────────────┐
│  硬核玩家收益说明                   │
│                                     │
│  ✅ 公开元码后,从当天开始计算收益    │
│  ✅ 每天凌晨1点自动发放前一天收益    │
│  ⚠️ 公开元码前的历史天数不补发       │
│                                     │
│  当前评分期剩余天数: 8天            │
│  预计收益: 8×50=400金币             │
└─────────────────────────────────────┘
```

**决策问题**:
- [ ] 金币发放选择批量还是即时?(建议批量+测试时即时)
- [ ] 是否在UI中明确告知"不补发历史"?(建议告知)
- [ ] 是否显示"预计收益"?(建议显示)

---

## 💡 优化建议 (3个)

### 🌟 O1: 添加"草稿预览"功能

**当前设计**:
- 用户填写Draft → 直接提交
- 无法预览提交后的效果

**优化建议**:
- 在Draft编辑页面添加"预览"按钮
- 预览页面展示游戏详情页的最终效果
- 帮助用户在提交前发现问题

**UI设计**:
```
┌─────────────────────────────────────┐
│  [保存为草稿]  [预览]  [提交]        │
└─────────────────────────────────────┘
```

---

### 🌟 O2: 添加"提交前检查清单"自动验证

**当前设计**:
- 步骤7 "提交确认" 需要用户手动勾选3个确认项
- 用户可能不看内容就勾选

**优化建议**:
- 系统自动验证关键项
- 未通过的项高亮显示,提示用户修改

**示例**:
```
┌─────────────────────────────────────┐
│  提交前检查清单                     │
│                                     │
│  ✅ 游戏标题 (5-100字符)            │
│  ✅ 游戏简介 (≤100字符)             │
│  ✅ 游戏正文 (≥200字符)             │
│  ✅ 封面图 (16:9比例)               │
│  ✅ 截图 (1-5张)                    │
│  ✅ 下载链接 (已验证)                │
│  ✅ 平台选择 (≥1个)                 │
│  ✅ 评分维度 (已选择)                │
│                                     │
│  ⚠️ 您未退出任何评分维度,如果使用AI  │
│     请退出对应维度                  │
│                                     │
│  [返回修改] [确认提交]               │
└─────────────────────────────────────┘
```

---

### 🌟 O3: 添加"源码链接"二次确认弹窗

**当前设计**:
- 用户填写源码链接 → 直接提交
- 无法检查链接是否正确

**优化建议**:
- 填写源码链接后 → 弹窗确认
- 显示链接预览,提醒用户检查

**UI设计**:
```
┌─────────────────────────────────────┐
│  请确认源码链接                     │
│                                     │
│  您的源码链接:                      │
│  https://github.com/username/game   │
│                                     │
│  ⚠️ 源码链接将在游戏详情页公开显示   │
│  ⚠️ 提交后无法修改(评分期开始前除外) │
│                                     │
│  [测试链接]  [确认]  [修改]         │
└─────────────────────────────────────┘
```

---

## 📊 问题优先级分析

| 问题编号 | 问题描述 | 严重程度 | 影响范围 | 建议优先级 |
|---------|---------|---------|---------|-----------|
| **E1** | 截图数量限制不一致 | 🔴 高 | 需求一致性 | P0 (立即修复) |
| **E2** | AI使用披露功能缺失 | 🔴 高 | 需求完整性 | P0 (立即修复) |
| **E3** | 源码链接无法修改 | ⚠️ 中 | 用户体验 | P1 (高优先级) |
| **E4** | Draft与游戏UI混淆 | ⚠️ 中 | 用户体验 | P1 (高优先级) |
| **E5** | 排他锁接管提示不清晰 | ⚠️ 中 | 用户体验 | P2 (中优先级) |
| **E6** | 撤回后作者快照逻辑未定义 | ⚠️ 中 | 数据一致性 | P1 (高优先级) |
| **E7** | 硬核玩家金币发放边界 | ⚠️ 中 | 经济系统 | P2 (中优先级) |
| **O1** | 添加草稿预览功能 | 💡 低 | 用户体验优化 | P3 (低优先级) |
| **O2** | 提交前自动验证 | 💡 低 | 用户体验优化 | P3 (低优先级) |
| **O3** | 源码链接二次确认 | 💡 低 | 用户体验优化 | P3 (低优先级) |

---

## 🎯 建议行动计划

### 第一阶段: 修复严重矛盾 (1-2小时)

**目标**: 解决需求与设计的不一致

**任务清单**:
- [ ] **E1**: 确认截图数量限制(5张vs10张)
- [ ] **E2**: 在设计文档中补充"AI使用披露"步骤

**产出物**:
- 设计文档v1.1 (修复E1+E2)

---

### 第二阶段: 补充隐藏场景 (2-3小时)

**目标**: 定义未明确的边界情况

**任务清单**:
- [ ] **E3**: 补充源码链接更新规则
- [ ] **E4**: 设计"我的游戏"页面UI
- [ ] **E5**: 完善排他锁接管提示
- [ ] **E6**: 定义撤回后作者快照更新逻辑
- [ ] **E7**: 细化硬核玩家金币发放规则

**产出物**:
- 设计文档v1.2 (补充E3-E7)

---

### 第三阶段: 用户体验优化 (可选)

**目标**: 提升用户体验

**任务清单**:
- [ ] **O1**: 添加草稿预览功能
- [ ] **O2**: 实现提交前自动验证
- [ ] **O3**: 源码链接二次确认

**产出物**:
- 设计文档v1.3 (优化O1-O3)

---

## 💡 总结与建议

### 核心发现

1. **需求一致性**: 发现2个严重矛盾,必须立即修复
2. **边界场景**: 发现5个未定义的隐藏场景,建议补充
3. **用户体验**: 发现3个可优化的改进点

### 关键建议

1. **P0优先级**: 立即修复E1(截图数量)和E2(AI披露)
2. **P1优先级**: 补充E3(源码链接修改)、E4(UI区分)、E6(作者快照)
3. **P2优先级**: 完善E5(排他锁提示)、E7(金币发放)
4. **P3优先级**: 优化O1-O3(用户体验提升)

### 时间估算

- **修复E1+E2**: 1-2小时
- **补充E3-E7**: 2-3小时
- **优化O1-O3**: 2-3小时(可选)
- **总计**: 3-5小时完成关键修复(P0+P1)

---

**审查完成时间**: 2025-01-09
**审查人员**: 老黑(Claude)
**下次审查**: 设计文档v1.1创建后
**相关问题**:
- [E1-E2]: 严重矛盾
- [E3-E7]: 隐藏场景
- [O1-O3]: 优化建议
