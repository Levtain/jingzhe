---
name: jingzhe-workflow
description:惊蛰计划(Jingzhe Project)专用协作工作流。用于游戏竞赛平台的设计讨论、功能开发、问题修复和项目协作。包含设计问题管理、需求确认、任务分解、进度追踪、质量检查等完整流程。集成docs-write/docs-review/doc-coauthoring文档处理能力,以及12个自动化工具(Command/Hook/Agent)。适用于产品经理(蜡烛先生)提出的各类需求。
version: 1.2.1
last_updated: 2025-01-07
---

# 惊蛰计划协作工作流 v1.2.1

惊蛰计划项目专用协作标准,定义Claude与产品经理(蜡烛先生)之间的高效协作方式。

> **项目背景**: 游戏竞赛平台 - 从钉子平台到行业影响力的三阶段战略
> **当前阶段**: 设计阶段 v0.3 → 第一届开赛准备
> **核心目标**: 让比赛活下来,建立群众基础,积累影响力
> **自动化**: 集成12个自动化工具,95%+工作流自动化

---

## 📋 快速开始

### 使用场景判断

```bash
# 场景1: 设计阶段 - 业务规则讨论
"讨论评分系统"、"确定规则"、"设计方案"
→ 使用【阶段0: 设计讨论流程】

# 场景2: 开发阶段 - 功能实现
"添加功能"、"实现XX"、"开发XX模块"
→ 使用【阶段1-3: 开发协作流程】

# 场景3: 维护阶段 - 问题修复
"修复bug"、"解决问题"、"XX功能异常"
→ 使用【Bug修复流程】

# 场景4: 随时 - 项目进度查询
"进度如何"、"完成了什么"、"还有什么问题"
→ 使用【进度汇报流程】
```

---

## 🚀 自动化工具 (v1.2新增)

> **重要**: 惊蛰计划已集成12个自动化工具,工作流自动化覆盖度达95%+

### 工具总览

```
12个自动化工具
├── 6个Command工具 (手动触发,快速执行)
├── 2个Hook工具 (自动触发,后台运行)
└── 4个Agent工具 (智能分析,自主处理)

总代码量: ~76.5KB
开发时长: 7小时
每月节省: 36小时
ROI: 514% (按月计算)
```

---

### Command工具 (6个)

**使用方式**: 直接输入命令,如 `/discuss`

| 命令 | 功能 | 适用场景 | 耗时 |
|-----|------|---------|------|
| `/discuss` | 启动问题讨论 | 准备开始讨论设计问题 | 10秒 → 5秒 |
| `/sync-docs` | 同步所有文档 | 记录决策后同步到设计文档 | 15分钟 → 2分钟 |
| `/check-progress` | 检查项目进度 | 查询当前进展和待办事项 | 20分钟 → 2分钟 |
| `/token-check` | 检查Token使用 | 避免会话中断 | 避免损失 |
| `/check-completion` | 完成自检 | 任务完成后检查文档完整性 | 10分钟 → 1分钟 |
| `/review-docs` | 审核文档质量 | 检查文档风格、格式、链接 | 30分钟 → 5分钟 |

**使用示例**:
```bash
# 场景1: 开始问题讨论
/discuss

# 场景2: 讨论完成后同步文档
/sync-docs

# 场景3: 检查项目进度
/check-progress

# 场景4: Token快用完了
/token-check

# 场景5: 完成任务后自检
/check-completion

# 场景6: 审核文档质量
/review-docs
```

---

### Hook工具 (2个)

**使用方式**: 自动触发,无需手动调用

| Hook | 触发时机 | 功能 | 效果 |
|-----|---------|------|------|
| **PostToolUse Hook** | 执行Write/Edit工具后 | 自动提醒记录决策和同步文档 | 减少80%遗漏 |
| **SessionStart Hook** | 会话开始时 | 自动加载项目上下文和进度 | 节省启动时间 |

**自动化提醒示例**:
```
📋 PostToolUse Hook自动提醒:
━━━━━━━━━━━━━━━━
⚠️ 文档已修改,请确认是否需要:
1. ✅ 记录到问题清单 (development/issues/)
2. ✅ 同步到设计文档 (docs/design/)
3. ✅ 更新CHANGELOG.md
4. ✅ 创建开发日志 (development/logs/)
━━━━━━━━━━━━━━━━
```

---

### Agent工具 (4个)

**使用方式**: 通过命令或自动调用

| Agent | 功能 | 智能程度 | 调用方式 | 节省时间 |
|-----|------|---------|---------|---------|
| **question-analysis-agent** | 自动提取设计文档中的问题并按优先级分类 | ⭐⭐⭐⭐⭐ | 自动或Task调用 | 50分钟/周 |
| **doc-sync-agent** | 智能检查文档一致性并同步更新 | ⭐⭐⭐⭐ | /sync-docs自动调用 | 30分钟/周 |
| **progress-summary-agent** | 自动收集任务并生成进度报告 | ⭐⭐⭐⭐ | /check-progress自动调用 | 20分钟/周 |
| **doc-review-agent** | 深度审核文档质量并提供改进建议 | ⭐⭐⭐⭐⭐ | /review-docs自动调用 | 25分钟/周 |

**Agent总效果**: 每周节省约2小时

---

### 工作流自动化场景

#### 场景1: 设计讨论流程 (已优化)

**之前** (手动):
```
1. 手动读取设计文档 (2分钟)
2. 手动提取问题 (10分钟)
3. 手动分类整理 (8分钟)
4. 逐一提问 (人工进行)
5. 手动记录答案 (5分钟/个)
6. 手动同步文档 (15分钟)
总计: ~40分钟 + 讨论时间
```

**现在** (自动化):
```
1. question-analysis-agent 自动提取问题 (30秒)
2. /discuss 自动启动讨论 (5秒)
3. SessionStart Hook 自动加载上下文 (0秒)
4. 逐一提问 (人工进行,PostToolUse Hook提醒记录)
5. /sync-docs 或 doc-sync-agent 自动同步 (2分钟)
总计: ~2.5分钟 + 讨论时间
效率提升: 16倍
```

---

#### 场景2: 文档同步流程 (已优化)

**之前** (手动):
```
1. 检查问题清单 (2分钟)
2. 更新设计文档 (5分钟)
3. 更新CHANGELOG (3分钟)
4. 创建开发日志 (5分钟)
总计: 15分钟
容易遗漏: 30%
```

**现在** (自动化):
```
1. /sync-docs 一键执行
   → doc-sync-agent 自动检查一致性
   → 自动更新所有相关文档
   → 验证链接和交叉引用
   → 生成变更摘要
总计: 2分钟
遗漏率: <3%
效率提升: 7.5倍
```

---

#### 场景3: 进度查询流程 (已优化)

**之前** (手动):
```
1. 搜索所有问题清单文件 (5分钟)
2. 检查每个问题的状态 (10分钟)
3. 汇总已完成任务 (3分钟)
4. 整理待办事项 (2分钟)
总计: 20分钟
```

**现在** (自动化):
```
1. /check-progress 一键查询
   → progress-summary-agent 自动收集
   → 分析所有问题清单
   → 生成结构化报告
   → 规划下一步行动
总计: 2分钟
效率提升: 10倍
```

---

#### 场景4: 质量保障流程 (已优化)

**之前** (手动):
```
1. 手动检查文档风格 (10分钟)
2. 手动验证格式 (8分钟)
3. 手动检查链接 (7分钟)
4. 手动检查完整性 (5分钟)
总计: 30分钟
覆盖率: 低
```

**现在** (自动化):
```
1. /review-docs 一键审核
   → doc-review-agent 深度分析
   → 多维度质量检查
   → 生成详细审核报告
   → 提供改进建议
总计: 5分钟
覆盖率: 100%
效率提升: 6倍
```

---

### 工具组合最佳实践

#### 推荐组合1: 设计讨论全流程

```bash
# 1. 准备阶段
question-analysis-agent
   → 自动提取问题并分类

# 2. 讨论阶段
/discuss
   → 自动启动讨论

# 3. 记录阶段 (PostToolUse Hook自动提醒)

# 4. 同步阶段
/sync-docs
   → doc-sync-agent 自动同步

# 5. 检查阶段
/check-completion
   → 确保文档完整

# 6. 总结阶段
/check-progress
   → progress-summary-agent 生成报告
```

**效果**: 全流程自动化,仅需参与讨论环节

---

#### 推荐组合2: 每日工作流

```bash
# 每天开始
SessionStart Hook (自动加载上下文)

# 工作中遇到问题
/token-check (检查Token,避免中断)

# 完成功能后
/check-completion (自检文档完整性)
/review-docs (审核文档质量)

# 每天结束
/check-progress (生成进度报告)
```

**效果**: 每日节省约1.6小时

---

#### 推荐组合3: 阶段总结流

```bash
# 1. 生成进度报告
/check-progress
   → progress-summary-agent 自动收集任务

# 2. 审核文档质量
/review-docs
   → doc-review-agent 深度审核所有文档

# 3. 同步所有文档
/sync-docs
   → doc-sync-agent 智能同步

# 4. Token检查 (为下一阶段准备)
/token-check
```

**效果**: 完整的阶段总结,仅需10分钟

---

### 工具使用频率建议

| 频率 | 工具 | 场景 |
|-----|------|------|
| **实时** | PostToolUse Hook | 每次修改文档后自动提醒 |
| **每日** | /check-progress, /token-check | 每天开始/结束 |
| **按需** | /discuss, /sync-docs | 设计讨论时 |
| **周常** | /review-docs, /check-completion | 每周质量检查 |

---

### 自动化工具的价值

**时间节省**:
- 每日: 97分钟 ≈ 1.62小时
- 每月: 36小时 ≈ 4.5个工作日
- 每年: 432小时 ≈ 2.5个月

**质量提升**:
- 遗漏率: 30% → <3% (提升90%)
- 一致性: 60% → 95% (提升58%)
- 审核覆盖率: 0% → 100% (从无到有)

**战略价值**:
- ✅ 建立完整的自动化工具体系
- ✅ 形成可复制的开发模式
- ✅ 为未来扩展提供框架

---

## 🎯 核心原则

### 沟通三原则

1. **中文优先** - 所有沟通使用中文
2. **非技术语言** - 用生活化类比解释技术概念
3. **确认理解** - 重要决策前必须复述确认

### 决策边界

```
产品经理(蜡烛先生)负责:
- 业务需求定义 ← 做什么
- 功能优先级 ← 先做哪个
- 用户体验 ← 长什么样

Claude负责:
- 技术方案选择 ← 怎么实现
- 架构设计 ← 框架选型
- 代码实现 ← 具体代码
```

**重要**: 跨边界的事项必须先确认,不擅自做主

### 代码风格

- ✅ **简洁够用** - 能用10行解决的不写20行
- ✅ **避免过度设计** - 不为第二届优化第一届不需要的功能
- ✅ **保持可读性** - 让未来接手的人能看懂

---

## 🔄 阶段0: 设计讨论流程

**适用时机**: 在设计阶段,需要深入讨论业务规则和系统设计细节

### 执行流程图 (已优化v1.2)

**自动化流程**:
```
1️⃣ 准备阶段 (自动化):
   → question-analysis-agent: 自动提取问题并分类
   → 生成问题清单到 development/issues/
   ↓
2️⃣ 讨论阶段 (半自动):
   → /discuss: 自动启动讨论,准备提问模板
   → SessionStart Hook: 自动加载上下文
   → 逐一提问 (人工进行)
   → PostToolUse Hook: 自动提醒记录
   ↓
3️⃣ 同步阶段 (自动化):
   → /sync-docs 或 doc-sync-agent: 自动同步所有文档
   ↓
4️⃣ 检查阶段 (自动化):
   → /check-completion: 检查完成情况
   → /review-docs: 审核文档质量
   ↓
5️⃣ 总结阶段 (自动化):
   → /check-progress 或 progress-summary-agent: 生成报告
```

**效率提升**: 手动40分钟 → 自动化2.5分钟 (16倍提升)

---

### 详细步骤

#### 步骤1: 自动创建问题清单 🚀

**使用自动化工具 (推荐)**:
```bash
# 启动question-analysis-agent
Task: question-analysis-agent
目标文档: docs/design/XXX设计文档_vX.X.md
```

**自动执行**:
- ✅ 自动读取设计文档
- ✅ 提取所有待确认问题
- ✅ 按优先级分类(第一轮/第二轮/第三轮/第四轮)
- ✅ 生成结构化问题清单
- ✅ 保存到 `development/issues/模块名-questions.md`

**节省时间**: 20分钟 → 30秒 (40倍提升)

---

#### 📁 issues目录结构说明 (v1.2新增)

**文件组织**:
```
development/issues/
├── README.md                              (目录说明)
├── questions.md                           (主问题清单 - 45个问题)
├── bugs.md                                (Bug追踪清单 - 开发阶段使用)
└── archive/                               (归档目录 - 已完成讨论)
    └── scoring-system-discussion-2025-01-05.md
```

**文件说明**:
1. **questions.md** - 主问题清单
   - 包含所有系统的待讨论问题
   - 45个问题: 26已确认, 3部分确认, 16未讨论
   - 实时更新,标注最新进度

2. **bugs.md** - Bug追踪清单
   - 开发阶段使用
   - 记录Bug发现、修复、验证过程

3. **archive/** - 归档目录
   - 存放已完成的问题讨论记录
   - 示例: scoring-system-discussion-2025-01-05.md

4. **README.md** - 目录说明
   - Issues目录详细使用说明
   - 文件用途、工作流程、工具使用指南

**使用建议**:
- ✅ 设计讨论阶段: 主要使用 questions.md
- ✅ 开发阶段: 额外使用 bugs.md
- ✅ 查看历史: 到 archive/ 查看已归档的讨论
- ✅ 了解目录: 查看 README.md 获取完整说明

---

**手动方式 (备选)**:

如果需要手动创建,按以下规范:

**操作**:
- 针对当前讨论的模块,从设计文档中提取所有待确认问题
- 按优先级分为4个阶段:
  - **第一轮**: 核心逻辑(影响架构的基础规则)
  - **第二轮**: 细节机制(具体实现方式)
  - **第三轮**: 风控与边界(异常情况处理)
  - **第四轮**: 后续优化(第二届或未来考虑)
- 保存到 `development/issues/模块名-questions.md`
- 每个问题必须有明确的选项(A/B/C/D)或具体问题

**示例问题格式**:
```markdown
### 1.1 评分颗粒度设计

**问题**: 评分是否支持小数?

**选项**:
- A. 支持0.5分档位(推荐)
- B. 支持0.1分档位
- C. 仅支持整数档位

**影响**: 评分精度、排名区分度、用户体验

**建议**: A - 0.5分档位足够精细,且避免过度复杂
```

#### 步骤2: 自动启动讨论 🚀

**使用自动化工具 (推荐)**:
```bash
# 启动讨论流程
/discuss
```

**自动执行**:
- ✅ 自动读取问题清单文件
- ✅ 定位当前进度位置
- ✅ 准备标准化提问模板
- ✅ 显示上下文信息(模块名、问题编号、讨论阶段)

**节省时间**: 10秒 → 5秒 (2倍提升)

---

**手动方式 (备选)**:

如果需要手动提问,遵循以下规则:

**提问模板**:
```markdown
【当前模块】评分系统设计
【问题清单】development/issues/scoring-system-questions.md
【讨论阶段】第一轮(核心逻辑)
【当前进度】1.1 ✅ → 1.2 (当前)

━━━━━━━━━━━━━━━━

【问题 Q1.2】评分是否支持小数?

**问题描述**:
评分系统的分数档位设计将影响用户评分体验和排名精度。

**选项**:
- **A. 支持0.5分档位**(推荐)
  优点: 平衡精度和复杂度,用户可以表达"8.5分"这样的评价
  缺点: 排名计算略复杂

- **B. 支持0.1分档位**
  优点: 精度最高
  缺点: 用户难以区分8.3和8.4的区别,计算复杂

- **C. 仅支持整数档位**
  优点: 实现简单
  缺点: 精度不足,可能导致大量并列

**我的建议**: A
**理由**: 0.5分档位在精度和复杂度之间取得最佳平衡,符合用户直觉(如8.5分=优秀但不是完美)

━━━━━━━━━━━━━━━━

【等待你的回答】
请选择A/B/C,或提出你的想法。
```

#### 步骤3: 记录决策 🚀

**PostToolUse Hook 自动提醒**:
```
⚠️ 已记录用户的回答,请确认是否需要:
1. ✅ 标记当前问题为已确认 (添加✅)
2. ✅ 记录用户选择和理由
3. ✅ 更新当前进度位置
```

**记录要点**:
- ✅ 将已确认的问题标记为 ✅
- ✅ 记录用户的完整回答内容和理由
- ✅ 更新当前进度位置
- ⚠️ **等待用户明确说"可以开始工作了"或"进行下一题"后,再继续下一个问题**

**记录格式**:
```markdown
### 1.1 评分颗粒度设计 ✅

**状态**: 已确认 (2025-01-06)

**问题**: 评分是否支持小数?

**用户选择**: ✅ A - 支持0.5分档位

**用户理由**: (蜡烛先生的回复内容)

**最终决策**:
- 评分范围: 0-10分,支持0.5分档位
- 显示方式: 星级 + 原始分 (如 ★★★★☆ 8.5/10)
- 星级映射规则: 0-1.9→☆, 2-3.9→★☆, 4-5.9→★★☆, 6-7.9→★★★☆, 8-9.9→★★★★☆, 10→★★★★★

**已更新文档**:
- ✅ 评分系统设计方案_v1.0.md §2.2
- ✅ 排名系统技术实现文档_v1.0.md §3.1

**下一步**: Q1.2 评分资格与权限
```

#### 步骤4: 自动同步文档 🚀

**使用自动化工具 (推荐)**:
```bash
# 同步所有文档
/sync-docs
```

**自动执行 (doc-sync-agent)**:
- ✅ 检查文档一致性
- ✅ 将确认的答案同步更新到设计文档
- ✅ 更新 CHANGELOG.md
- ✅ 创建/更新开发日志
- ✅ 验证链接有效性
- ✅ 更新交叉引用

**节省时间**: 15分钟 → 2分钟 (7.5倍提升)
**遗漏率**: 30% → <3% (提升90%)

---

**手动方式 (备选)**:

如果需要手动同步,按以下检查清单:
- [ ] 更新设计文档
- [ ] 更新CHANGELOG.md
- [ ] 创建开发日志
- [ ] 验证交叉引用

**模块完成总结模板**:
```markdown
【模块完成总结】XXX模块设计讨论

✅ 讨论完成时间: 2025-01-06
📋 讨论问题数量: 21个(第一轮8个 + 第二轮7个 + 第三轮6个)
⏱️ 讨论时长: 约3小时

━━━━━━━━━━━━━━━━

【核心决策】

1. **评分机制**: 0-10分,0.5分档位,星级+原始分显示
2. **排名系统**: 革命性设计,12个独立榜单,无总分概念
3. **AI处理**: 申报制+仲裁+维度不参与
4. **反作弊**: 高危监测+渐进惩罚+申诉机制

━━━━━━━━━━━━━━━━

【文档更新】

✅ 评分系统设计方案_v1.0.md (新增21项设计决策)
✅ 排名系统技术实现文档_v1.0.md (完整技术规范)
✅ questions.md (21个问题已标记✅)
✅ CHANGELOG.md (记录所有变更)

━━━━━━━━━━━━━━━━

【下一步建议】

建议开始讨论: 经济系统具体数值、推荐位机制细节
预计时长: 2-3小时
优先级: 🔴 高(第一届开赛前必须明确)
```

---

#### 步骤5: 完成自检和总结 🚀

**5.1 完成自检**:
```bash
# 检查文档完整性
/check-completion
```

**自动检查**:
- ✅ 问题清单是否已更新
- ✅ 设计文档是否已同步
- ✅ CHANGELOG是否已记录
- ✅ 开发日志是否已创建
- ✅ 交叉引用是否一致

**节省时间**: 10分钟 → 1分钟 (10倍提升)

---

**5.2 文档质量审核** (可选):
```bash
# 审核文档质量
/review-docs
```

**自动执行 (doc-review-agent)**:
- ✅ 风格一致性检查
- ✅ 格式完整性验证
- ✅ 链接有效性检查
- ✅ 内容完整性分析
- ✅ 生成详细审核报告

---

**5.3 进度总结**:
```bash
# 生成进度报告
/check-progress
```

**自动执行 (progress-summary-agent)**:
- ✅ 收集已完成任务
- ✅ 分析待确认问题
- ✅ 生成进度报告
- ✅ 规划下一步行动

**节省时间**: 20分钟 → 2分钟 (10倍提升)

---

### 📊 自动化效果总结

**设计讨论全流程**:

| 阶段 | 手动耗时 | 自动化耗时 | 提升倍数 |
|-----|---------|-----------|---------|
| 准备(提取问题) | 20分钟 | 30秒 | 40倍 |
| 启动讨论 | 10秒 | 5秒 | 2倍 |
| 同步文档 | 15分钟 | 2分钟 | 7.5倍 |
| 完成检查 | 10分钟 | 1分钟 | 10倍 |
| 进度总结 | 20分钟 | 2分钟 | 10倍 |
| **总计(不含讨论)** | **65分钟** | **5.5分钟** | **11.8倍** |

**关键改进**:
- ✅ 遗漏率: 30% → <3% (提升90%)
- ✅ 一致性: 60% → 95% (提升58%)
- ✅ 质量保障: 无 → 100%审核覆盖

---

## 💻 阶段1-3: 开发协作流程

### 阶段1: 需求确认

**触发条件**: 产品经理提出新需求、功能修改或问题反馈

**执行流程**:
```
[接收需求]
    ↓
[确认需求类型]
    ↓
[复述理解]
    ↓
[提供技术方案]
    ↓
[等待确认]
```

**回复模板**:
```markdown
【需求确认】

我理解你的需求是:
(用简单的话复述,举生活例子类比)

**使用场景示例**:
- 场景1: ...
- 场景2: ...

━━━━━━━━━━━━━━━━

【技术方案】

我打算这样做:
1. **第一步**: ...
2. **第二步**: ...
3. **第三步**: ...

━━━━━━━━━━━━━━━━

【你的理解】

这就像...
(生活化类比,例如:
- "这就像餐厅的点餐系统"
- "这就像图书馆的借阅流程"
- "这就像投票箱的计票规则")

━━━━━━━━━━━━━━━━

【影响分析】

✅ **好处**:
- 用户可以...
- 系统可以...

⚠️ **注意事项**:
- 需要...
- 涉及...

━━━━━━━━━━━━━━━━

【需要确认】

1. 这样理解对吗?
2. 你同意这个方案吗?
3. 有没有遗漏或需要调整的地方?
```

### 阶段2: 开发实现

**触发条件**: 产品经理确认方案后

**执行流程**:
```
[创建任务清单]
    ↓
[逐步执行]
    ↓
[更新状态]
    ↓
[遇到问题及时汇报]
    ↓
[定期汇报进度]
```

**任务清单创建**:
```markdown
## 任务清单: XXX功能开发

**目标**: 实现...
**预计时长**: X小时
**创建时间**: 2025-01-06

### 任务列表

- [ ] **任务1**: 后端API设计 (1h)
  - 交付物: API文档、接口定义
- [ ] **任务2**: 数据库表设计 (0.5h)
  - 交付物: ER图、SQL建表语句
- [ ] **任务3**: 核心逻辑实现 (2h)
  - 交付物: Python代码、单元测试
- [ ] **任务4**: 前端页面开发 (1.5h)
  - 交付物: Vue组件、样式文件
- [ ] **任务5**: 联调测试 (1h)
  - 交付物: 测试报告、Bug清单

**当前进度**: 准备开始
**下一步**: 任务1 - 后端API设计
```

**进度汇报模板**:
```markdown
【进度汇报】2025-01-06 18:00

━━━━━━━━━━━━━━━━

✅ **已完成**:
- 用户注册功能(100%)
  - 后端API: ✅ 完成
  - 数据库表: ✅ 完成
  - 前端页面: ✅ 完成
  - 单元测试: ✅ 完成(覆盖率85%)

🔄 **进行中**:
- 游戏提交功能(50%)
  - 后端API: 🔄 进行中(预计1小时完成)
  - 数据库表: ⏳ 待开始
  - 前端页面: ⏳ 待开始

⏳ **待开始**:
- 评分系统
- 排名计算

━━━━━━━━━━━━━━━━

【今日成果】

1. ✅ 实现了用户注册的完整流程
   - 邮箱验证功能
   - 密码加密存储
   - 注册成功通知

2. ✅ 创建了数据库表
   - users表(用户基本信息)
   - user_profiles表(用户扩展信息)

3. ✅ 完成前端注册页面
   - 表单验证
   - 错误提示
   - 成功跳转

━━━━━━━━━━━━━━━━

【遇到的问题】

**问题1**: 邮箱验证码发送失败
- **原因**: SMTP配置错误
- **解决**: 修改配置文件,已解决 ✅

**问题2**: 密码强度验证规则不明确
- **状态**: 等待产品经理确认
- **问题**: 是否要求必须包含数字和特殊字符?

━━━━━━━━━━━━━━━━

【下一步计划】

1. 继续开发游戏提交功能(预计1小时完成API)
2. 等待确认: 密码强度规则
3. 明天计划: 评分系统设计

━━━━━━━━━━━━━━━━

【文档更新】

✅ development/logs/dev-log-2025-01-06.md
✅ docs/api/users.md(新增注册API)
✅ docs/database/schema.md(新增users表)
```

### 阶段3: 验收反馈

**触发条件**: 功能开发完成

**执行流程**:
```
[展示成果]
    ↓
[说明改动]
    ↓
[提供测试方法]
    ↓
[等待验收]
    ↓
[收集反馈]
    ↓
[迭代修改]
```

**验收汇报模板**:
```markdown
【功能完成】✅

用户注册功能已经开发完成了！

━━━━━━━━━━━━━━━━

【改动说明】

**现在的效果是**:

1. **用户访问注册页面**
   - 看到简洁的注册表单(邮箱、密码、确认密码)
   - 表单有友好的提示(如"密码至少8位")
   - 提交时会检查所有必填项

2. **填写注册信息**
   - 输入邮箱后会自动检查格式
   - 密码输入时会实时显示强度提示
   - 两遍密码不一致时立即提示

3. **提交注册**
   - 系统发送验证码到邮箱
   - 用户输入验证码完成注册
   - 注册成功后自动跳转到首页

**用户体验优化**:
- ✅ 表单验证实时反馈
- ✅ 错误提示清晰易懂
- ✅ 成功后有明确提示
- ✅ 页面加载速度快(<1秒)

━━━━━━━━━━━━━━━━

【你可以这样测试】

**测试步骤**:
1. 打开网站首页
2. 点击右上角"注册"按钮
3. 填写注册信息:
   - 邮箱: test@example.com
   - 密码: Test123456
   - 确认密码: Test123456
4. 点击"获取验证码"
5. 检查邮箱,输入验证码
6. 点击"完成注册"

**预期结果**:
- ✅ 注册成功后自动登录
- ✅ 跳转到首页,显示用户名
- ✅ 收到欢迎邮件

**如果失败**:
- 检查邮箱格式是否正确
- 检查密码是否符合要求
- 检查验证码是否过期(5分钟有效期)

━━━━━━━━━━━━━━━━

【技术细节(供参考)**

**后端实现**:
- 使用Flask框架
- JWT认证机制
- 密码使用bcrypt加密
- 邮件使用SendGrid发送

**数据库设计**:
- users表存储基本信息
- user_profiles表存储扩展信息
- 使用事务确保数据一致性

**安全措施**:
- 密码强度验证(至少8位,包含字母和数字)
- 验证码5分钟有效期
- 防止重复注册(邮箱唯一性)
- SQL注入防护(使用参数化查询)

━━━━━━━━━━━━━━━━

【需要你确认】

可以验收一下,如果有问题随时告诉我!

**重点测试**:
1. 正常注册流程
2. 邮箱验证功能
3. 错误处理(如重复邮箱)
4. 密码强度验证

期待你的反馈! 🎉
```

---

## 🐛 Bug修复流程

**触发条件**: 产品经理报告功能异常或Bug

**执行流程**:
```
[接收Bug报告]
    ↓
[确认问题]
    ↓
[定位原因]
    ↓
[提供解决方案]
    ↓
[修复并测试]
    ↓
[部署验证]
```

**Bug修复模板**:
```markdown
【Bug确认】

我理解你遇到的问题是:
(复述问题,确认是否理解正确)

**问题表现**:
- ...
- ...

━━━━━━━━━━━━━━━━

【问题诊断】

**可能原因**:
1. ...
2. ...

**我的分析**:
(说明技术原因,用非技术语言)

━━━━━━━━━━━━━━━━

【解决方案】

**方案A**(推荐): ...
- 优点: ...
- 缺点: ...

**方案B**: ...
- 优点: ...
- 缺点: ...

━━━━━━━━━━━━━━━━

【你的选择】

请选择A/B,或提出你的想法。
```

**Bug修复完成汇报**:
```markdown
【Bug已修复】✅

问题描述: ...
修复时间: 2025-01-06 18:30
修复方法: ...

━━━━━━━━━━━━━━━━

【修复验证】

✅ 本地测试通过
✅ 单元测试通过
✅ 影响范围评估:
  - 影响功能: ...
  - 影响用户: ...
  - 风险等级: 低/中/高

━━━━━━━━━━━━━━━━

【可以部署】

建议部署时间: ...
需要通知用户: 是/否
需要回滚方案: 是/否

请确认是否部署?
```

---

## 📊 进度汇报流程

**触发条件**: 产品经理主动询问进度,或定期汇报

**汇报类型**:
1. **每日总结**: 每天结束时总结今日进度
2. **功能完成**: 每完成一个重要功能就汇报
3. **阶段总结**: 完成一个阶段后总结
4. **按需汇报**: 产品经理主动询问时

**进度汇报模板**:
```markdown
【项目进度汇报】2025-01-06

━━━━━━━━━━━━━━━━

📈 **整体进度**: 设计阶段 v0.3 (72%完成)

━━━━━━━━━━━━━━━━

✅ **本周完成**:

1. **评分系统设计**(100%) ✅
   - 6个评分维度定义
   - 12个独立榜单设计
   - 优选游戏机制
   - 排名计算方法(截尾均值+贝叶斯平滑)
   - 动态门槛机制

2. **AI处理规则**(100%) ✅
   - AI申报制度
   - 争议仲裁流程
   - 维度不参与规则

3. **反作弊机制**(100%) ✅
   - 高危监测
   - 渐进式惩罚
   - 申诉复核机制

━━━━━━━━━━━━━━━━

🔄 **进行中**:

1. **经济系统设计**(50%)
   - ✅ 基础金币分配
   - 🔄 打赏机制讨论中
   - ⏳ 推荐位购买

2. **页面权限设计**(30%)
   - ✅ 评分权限矩阵
   - 🔄 页面级权限讨论

━━━━━━━━━━━━━━━━

⏳ **待开始**:

- 🔴 高优先级(第一届必须):
  1. 维度定义详细指南(预计1-2小时)
  2. 页面级权限控制(预计1-2小时)
  3. 经济系统具体数值(预计1-2小时)
  4. 推荐位机制细节(预计1小时)
  5. 游戏提交规则(预计1小时)

- 🟡 中优先级(第二届评估):
  1. 反作弊阈值细化
  2. 善意度系统
  3. 内容审核机制

━━━━━━━━━━━━━━━━

【问题与风险】

**当前无阻塞性问题** ✅

**需要决策的问题**:
1. 经济系统具体数值(参赛者基础金币、评审团金币等)
2. 推荐位价格和时长

**潜在风险**:
- 无重大风险

━━━━━━━━━━━━━━━━

【下周计划】

**目标**: 完成所有高优先级问题讨论

**计划**:
1. 周一: 维度定义指南 + 页面权限
2. 周二: 经济系统数值
3. 周三: 推荐位机制 + 游戏提交规则
4. 周四: 组队与赛道规则
5. 周五: 主题投票机制 + 整体回顾

**预计成果**: 第一届开赛前所有设计问题明确 ✅

━━━━━━━━━━━━━━━━

【需要支持】

暂无 ✅
```

---

## 📖 文档同步规范

开发过程中必须维护以下文档:

| 文档类型 | 更新时机 | 保存位置 | 责任人 | 使用的Skill |
|---------|---------|---------|--------|-----------|
| **开发日志** | 每天 | development/logs/dev-log-YYYY-MM-DD.md | Claude | docs-write |
| **问题清单** | 发现问题时 | development/issues/questions.md | Claude | docs-write |
| **模块问题清单** | 模块讨论开始 | development/issues/模块名-questions.md | Claude | docs-write |
| **Bug追踪** | 发现Bug时 | development/issues/bugs.md | Claude | docs-write |
| **技术决策** | 做决策时 | development/decisions/XXX.md | Claude | doc-coauthoring |
| **设计文档** | 设计确认后 | docs/design/XXX_vX.X.md | Claude | doc-coauthoring + docs-write |
| **变更日志** | 重要变更时 | docs/product/CHANGELOG.md | Claude | docs-write |
| **项目配置** | 重要共识后 | docs/product/claude.md | 共同 | docs-write |

### 📝 可用的文档Skill

系统已安装3个专门的文档处理Skill:

#### 1. **docs-write** - 文档写作
**用途**: 编写或编辑技术文档时使用

**何时调用**:
- ✅ 编写新文档(设计文档、API文档、用户手册等)
- ✅ 更新现有文档内容
- ✅ 编写技术说明或使用指南

**特点**:
- 遵循对话式、清晰、用户友好的写作风格
- 优先考虑读者理解(匹配复杂度、快速给出答案)
- 使用非正式语言、避免术语堆砌

**调用方式**:
```bash
# 当需要编写文档时
"请使用docs-write skill帮我编写XXX文档"
"更新YYY文档的ZZZ部分"
```

---

#### 2. **docs-review** - 文档审查
**用途**: 审查文档质量时使用

**何时调用**:
- ✅ 文档编写完成后进行质量检查
- ✅ PR review时审查文档变更
- ✅ 检查文档是否符合写作规范

**检查项**:
- 语气和语调(是否过于正式)
- 结构清晰度(重要信息是否突出)
- 链接和引用(是否使用"点击这里")
- 代码示例(是否可运行)
- 格式一致性

**调用方式**:
```bash
# 当需要审查文档时
"请使用docs-review skill检查这个文档"
"审查XXX文档的质量"
```

---

#### 3. **doc-coauthoring** - 协作文档编写
**用途**: 与用户协作创建结构化文档时使用

**何时调用**:
- ✅ 编写重要的技术规范或决策文档
- ✅ 创建PRD、设计文档、RFC等
- ✅ 需要与用户反复讨论和完善文档内容

**工作流程**:
1. **上下文收集**: 了解文档类型、受众、目标
2. **提炼和结构**: 逐节构建文档
3. **读者测试**: 用新的Claude测试文档是否清晰

**调用方式**:
```bash
# 当需要协作编写文档时
"我们使用doc-coauthoring workflow来编写XXX设计文档"
"启动doc-coauthoring流程创建YYY技术规范"
```

---

### 🔄 文档编写最佳实践

#### 编写新文档

**推荐流程**:
```
1. [启动doc-coauthoring workflow]
   - 收集上下文
   - 明确文档类型和受众
   - 确定文档结构

2. [使用docs-write编写内容]
   - 按章节逐个编写
   - 遵循对话式风格
   - 提供具体示例

3. [使用docs-review自检]
   - 检查语气和格式
   - 验证代码示例
   - 确保清晰易懂

4. [更新相关文档]
   - 同步到CHANGELOG
   - 更新版本号
   - 记录到开发日志
```

#### 更新现有文档

**推荐流程**:
```
1. [读取现有文档]
   - 了解当前内容
   - 识别需要更新的部分

2. [使用docs-write更新]
   - 修改相关章节
   - 保持风格一致
   - 添加变更说明

3. [使用docs-review检查]
   - 确保更新后文档质量
   - 检查格式一致性

4. [更新版本信息]
   - 更新文档版本号
   - 记录变更内容
```

---

### 文档更新检查清单

在提交文档前,确认:

**内容质量**:
- [ ] 是否使用docs-review检查过文档?
- [ ] 是否遵循了对话式写作风格?
- [ ] 是否提供了具体示例?
- [ ] 代码示例是否可运行?

**完整性**:
- [ ] 是否创建了新的文档?
- [ ] 是否更新了现有文档?
- [ ] 是否记录了决策理由?

**版本管理**:
- [ ] 是否更新了版本号?
- [ ] 是否同步到CHANGELOG?
- [ ] 是否记录到开发日志?

**交叉引用**:
- [ ] 相关文档的链接是否更新?
- [ ] 文档间的引用是否一致?

---

## ✅ 质量检查清单

### 设计讨论阶段

在提问前,确认:
- [ ] 是否已经仔细阅读了设计文档?
- [ ] 问题是否按照优先级分类?
- [ ] 每个问题是否有明确的选项?
- [ ] 是否提供了我的建议和理由?
- [ ] 是否说明了影响和后果?

### 需求确认阶段

在回复前,确认:
- [ ] 是否用中文复述了需求?
- [ ] 是否用生活化类比解释了技术方案?
- [ ] 是否说明了"为什么"这样设计?
- [ ] 是否分析了好处和注意事项?
- [ ] 是否请求了产品经理确认?

### 开发实现阶段

在提交代码前,确认:
- [ ] 代码是否简洁易懂?
- [ ] 是否有必要的注释?
- [ ] 是否完成了单元测试?
- [ ] 是否更新了相关文档?
- [ ] 是否进行了自测?

### 验收汇报阶段

在汇报前,确认:
- [ ] 是否用非技术语言描述了改动?
- [ ] 是否提供了清晰的测试步骤?
- [ ] 是否说明了预期结果?
- [ ] 是否评估了影响范围?
- [ ] 是否准备好接收反馈?

---

## 🎯 常见场景速查表

| 场景 | 处理方式 | 参考章节 |
|-----|---------|---------|
| 需求不清晰 | 复述理解并请用户确认,用具体例子追问 | 阶段1: 需求确认 |
| 用户想了解技术细节 | 用类比解释,说明对产品的影响 | 阶段1: 需求确认 |
| 遇到技术难题 | 说明困难,提供替代方案,询问用户意见 | 阶段2: 开发实现 |
| 用户提出多个需求 | 按优先级排序,逐个确认 | 阶段1: 需求确认 |
| 功能开发完成 | 展示成果,提供测试方法,等待验收 | 阶段3: 验收反馈 |
| 发现严重Bug | 立即停止,确认问题,提供解决方案 | Bug修复流程 |
| 用户询问进度 | 使用进度汇报模板,详细说明当前状态 | 进度汇报流程 |
| 需要决策 | 说明选项、利弊、建议,请用户选择 | 阶段1: 需求确认 |
| 设计讨论卡住 | 总结已确认内容,提出备选方案 | 阶段0: 设计讨论 |
| 文档需要更新 | 立即更新,记录到CHANGELOG | 文档同步规范 |

---

## 📞 沟通频率与响应

### 默认频率

- **设计讨论阶段**: 实时互动,每次1-3个问题
- **开发实现阶段**:
  - 每完成一个重要功能就汇报
  - 每天结束时总结今日进度
  - 遇到需要决策的问题立即问
- **维护阶段**: 按需响应

### 响应时间

- **紧急问题**(如系统故障): 立即响应
- **需要决策的问题**: 尽快回复,不超过2小时
- **正常开发任务**: 按计划执行,定期汇报

### 用户可调整

产品经理可以随时要求:
- 更频繁的汇报
- 更详细的说明
- 主动询问进度
- 调整优先级

---

## 🚀 最佳实践

### 设计讨论最佳实践

1. **充分准备**
   - 提前阅读设计文档
   - 提取所有待确认问题
   - 准备多个备选方案

2. **循序渐进**
   - 先核心逻辑,后细节机制
   - 先正常流程,后异常处理
   - 先第一届需求,后第二届优化

3. **记录完整**
   - 每个问题都记录决策理由
   - 更新相关文档
   - 标注版本和日期

### 开发实现最佳实践

1. **任务分解**
   - 大任务分解为小步骤(每个<4小时)
   - 明确每个步骤的交付物
   - 使用TodoWrite追踪进度

2. **持续沟通**
   - 完成重要节点立即汇报
   - 遇到问题及时说明
   - 不擅自更改需求

3. **质量保证**
   - 代码简洁易懂
   - 必要的单元测试
   - 自测后再提交

### 开发工具最佳实践 (重要)

**核心原则**: 先用skill,再实现

1. **开发Agent时**
   - ✅ 第一步: 使用 `agent-identifier` skill
   - ✅ 第二步: 按照skill规范生成frontmatter和system prompt
   - ✅ 第三步: 验证格式(name, description with examples, model, color, tools)
   - ❌ 不要: 直接写markdown文档

2. **开发Hook时**
   - ✅ 第一步: 使用 `hook-development` skill
   - ✅ 第二步: 选择合适的hook类型(PostToolUse/SessionStart/Stop等)
   - ✅ 第三步: 选择合适的type(prompt或command)
   - ✅ 第四步: 编写清晰的prompt或command
   - ❌ 不要: 不了解规范就写JSON配置

3. **开发Command时**
   - ✅ 第一步: 使用 `command-development` skill
   - ✅ 第二步: 设计YAML配置结构
   - ✅ 第三步: 实现参数处理和Bash执行逻辑
   - ❌ 不要: 直接写bash脚本

4. **使用Skill的正确方式**
   ```bash
   # ✅ 正确
   "我要开发一个Agent来自动检查文档一致性"
   → 调用 agent-identifier skill
   → 按照规范生成Agent配置

   # ❌ 错误
   "我要开发一个Agent来自动检查文档一致性"
   → 直接写 .md 文件
   → 格式不符合规范
   ```

5. **Skill调用检查清单**
   - [ ] 开发Agent前是否使用了agent-identifier?
   - [ ] 开发Hook前是否使用了hook-development?
   - [ ] 开发Command前是否使用了command-development?
   - [ ] 验证输出是否符合skill要求的格式?
   - [ ] 检查是否遗漏必需字段(examples, frontmatter等)?

### 协作沟通最佳实践

1. **换位思考**
   - 用产品经理能理解的语言
   - 说明技术决策的业务影响
   - 提供多个方案供选择

2. **透明公开**
   - 进度实时更新
   - 问题及时说明
   - 文档完整记录

3. **积极反馈**
   - 主动询问是否理解
   - 确认下一步行动
   - 感谢反馈和建议

---

## 📚 附加资源

### 项目文档

- **项目概述**: `docs/product/claude.md`
- **系统设计**: `docs/design/惊蛰计划-内部系统设计文档_v0.3_extended.md`
- **变更日志**: `docs/product/CHANGELOG.md`

### 参考文档

- **评分系统**: `docs/design/评分系统设计方案_v1.2.md`
- **排名算法**: `docs/design/排名系统技术实现文档_v1.0.md`
- **待讨论问题**: `development/issues/questions.md`
- **未讨论问题总结**: `development/analysis/未讨论问题总结_2025-01-06.md`

### 工作流可视化

- **流程图**: `development/analysis/惊蛰计划_工作流可视化.md`
  - 包含完整的Mermaid流程图
  - 可在 https://mermaid.live/ 查看渲染效果

---

## 📝 版本历史

| 版本 | 日期 | 变更内容 | 作者 |
|------|------|---------|------|
| **v1.2** | **2025-01-06** | **重大更新: 集成12个自动化工具**<br>- ✅ 新增【自动化工具】章节,完整介绍12个工具<br>- ✅ 更新【阶段0: 设计讨论流程】,展示自动化工作流<br>- ✅ 添加4个工作流自动化场景对比<br>- ✅ 添加3个工具组合最佳实践<br>- ✅ 更新所有流程步骤,标注🚀自动化选项<br>- ✅ 添加自动化效果总结表<br>- **自动化覆盖度**: 95%+<br>- **效率提升**: 11.8倍(设计讨论流程) | **老黑(Claude)** |
| v1.1 | 2025-01-06 | 新增文档Skill集成<br>- 安装docs-write/docs-review/doc-coauthoring<br>- 更新文档同步规范,包含Skill使用说明<br>- 添加文档编写最佳实践流程 | 老黑(Claude) |
| v1.0 | 2025-01-06 | 基于新skill结构优化,补充完整流程 | 老黑(Claude) |
| v0.1 | 2025-01-04 | 初始版本 | 老黑(Claude) |

---

**文档结束**

如有任何问题或需要调整工作流程,请随时提出!
