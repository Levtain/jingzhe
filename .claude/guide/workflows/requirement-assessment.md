# 需求评估与确认流程

> **整合product-manager-toolkit和product-requirements的标准工作流**
> **适用场景**: 惊蛰计划中所有新功能的需求评估和确认
> **创建时间**: 2025-01-11

---

## 📋 流程概览

```
问题提出 → RICE评估 → PRD生成 → 讨论确认 → 文档更新
```

**三个核心工具**:
1. **product-manager-toolkit** - RICE优先级评估
2. **product-requirements** - 交互式PRD生成
3. **/discuss命令** - 设计决策讨论

---

## 🎯 什么时候使用这个流程？

**使用场景**:
- ✅ 有新的功能需求待确认
- ✅ 有多个问题需要评估优先级
- ✅ 需要生成标准化的需求文档
- ✅ 不确定某个功能是否值得做

**不使用场景**:
- ❌ 简单的bug修复(直接用review流程)
- ❌ 明确的优化任务(直接开发)
- ❌ 紧急问题处理(先解决问题后补文档)

---

## 📝 详细步骤

### 步骤1: RICE优先级评估

**目的**: 量化评估需求价值,避免在低优先级任务上浪费时间

**如何执行**:

1. **启动评估**

说: "帮我用RICE评估这些需求的优先级"

2. **AI会做什么**:
   - 调用product-manager-toolkit skill
   - 为每个需求计算RICE分数
   - 生成优先级排序报告

3. **评估维度**:
   - **R (Reach)**: 影响多少用户?
   - **I (Impact)**: 影响程度多大?(0.25-3分)
   - **C (Confidence)**: 有多大把握?(%)
   - **E (Effort)**: 需要多少工作量?(人月)

4. **计算公式**:
   ```
   RICE分数 = (R × I × C) / E
   ```

5. **得到结果**:
   - P0: RICE > 120 (立即讨论)
   - P1: RICE 60-120 (近期讨论)
   - P2: RICE 30-60 (中期讨论)
   - P3: RICE < 30 (后续讨论)

**示例**:

```
用户: 帮我评估这53个问题的优先级

AI: [调用product-manager-toolkit]

    正在使用RICE框架评估53个问题...

    P0问题 (8个, RICE>120):
    - 反作弊系统阈值设计 (RICE=180)
    - 成就系统核心机制 (RICE=165)
    - 团队赛排名规则 (RICE=152)
    ...

    建议优先讨论P0问题,预计需要1-2周完成。
```

---

### 步骤2: 生成PRD文档

**目的**: 为高优先级需求生成结构化的需求文档

**如何执行**:

1. **启动PRD生成**

说: "为[功能名称]生成PRD"

2. **AI会做什么**:
   - 调用product-requirements skill
   - 启动"Sarah"产品负责人人设
   - 通过对话收集需求细节
   - 生成90分以上的PRD文档

3. **对话过程**:
   - Sarah会问你5-10个问题
   - 关于商业价值、功能需求、用户体验等
   - 你用自然语言回答即可
   - Sarah会迭代优化直到质量达标

4. **质量评分**:
   - 商业价值 (30分)
   - 功能完整性 (25分)
   - 用户体验 (20分)
   - 技术可行性 (15分)
   - 范围合理性 (10分)
   - **总分≥90分才算合格**

**示例**:

```
用户: 为"反作弊系统"生成PRD

AI: [调用product-requirements]

    你好!我是Sarah,产品负责人。

    让我们确认一下反作弊系统的需求:

    1. 反作弊系统的主要目标是什么?
       - 防止刷分?
       - 检测异常评分行为?
       - 保护平台公平性?

    你: 主要是防止刷分和检测异常评分行为

    2. 我们打算如何检测作弊行为?
       - 基于评分模式分析?
       - 基于用户关系网络?
       - 还是有其他方法?

    你: 基于评分模式,比如突然大量评分、评分过于一致等

    ... (继续对话5-10轮)

    [Sarah生成PRD初稿]

    质量评分: 88分

    还需要补充: 技术可行性分析

    让我们讨论一下技术实现...

    ... (补充细节)

    [Sarah生成最终PRD]

    质量评分: 92分 ✅

    文档已保存到: docs/anti-cheat-system-prd.md
```

---

### 步骤3: 讨论确认设计

**目的**: 基于PRD讨论具体的设计决策

**如何执行**:

1. **启动讨论**

说: "开始讨论[功能名称]" 或 "/discuss"

2. **AI会做什么**:
   - 读取PRD文档
   - 从设计文档中提取相关问题
   - 逐个问题进行讨论
   - 记录设计决策和理由

3. **讨论重点**:
   - 确认核心机制
   - 解决技术难点
   - 明确边界条件
   - 记录决策理由

4. **更新文档**:
   - 同步到设计文档
   - 更新questions.md状态
   - 记录到CHANGELOG.md

**示例**:

```
用户: 开始讨论反作弊系统

AI: [加载PRD文档]

    好的,基于PRD文档,我有以下几个问题需要确认:

    Q1: 善意度的初始值是多少?
    A. 100分 (中性)
    B. 50分 (需要建立信任)
    C. 其他数值

    你: 选A,100分吧,新用户默认信任

    Q2: 检测到作弊行为后如何处理?
    A. 降低善意度
    B. 取消评分权重
    C. 封禁账户
    D. 组合处理

    你: D,分阶段处理。先降低善意度,严重则取消评分权重,极端情况封禁

    ... (继续讨论所有问题)

    [记录所有决策]

    ✅ 反作弊系统讨论完成!

    已更新:
    - docs/design/反作弊系统设计文档.md
    - development/active/issues/questions.md (标记为✅)
    - docs/product/CHANGELOG.md
```

---

## 🔄 完整流程示例

### 场景: 惊蛰计划有53个问题待讨论

**第1天: RICE评估**

```
你: 帮我评估这53个问题的优先级

AI: [使用product-manager-toolkit]

    评估完成!结果:

    P0 (8个,立即讨论):
    - 反作弊系统 (RICE=180)
    - 成就系统 (RICE=165)
    - 团队排名规则 (RICE=152)
    ...

    P1 (15个,近期讨论):
    - 用户通知系统 (RICE=95)
    - 游戏详情页 (RICE=88)
    ...

    建议: 先处理P0问题,预计1-2周
```

**第2天: 生成PRD**

```
你: 为反作弊系统生成PRD

AI: [使用product-requirements]

    你好,我是Sarah。让我们确认需求...

    [对话10轮]

    ✅ PRD生成完成!质量评分:92分

    文档: docs/anti-cheat-system-prd.md
```

**第3-5天: 讨论确认**

```
你: 开始讨论反作弊系统

AI: 基于PRD,有以下8个问题需要确认:

    Q1: 善意度初始值?
    你: 100分

    Q2: 作弊检测算法?
    你: 基于评分模式分析

    ... (讨论所有问题)

    ✅ 反作弊系统确认完成!

    已更新设计文档
```

**第6天开始: 处理下一个P0问题**

```
你: 继续处理下一个P0问题

AI: 好的,下一个是成就系统

    要生成PRD吗?

你: 好的
```

---

## 💡 使用技巧

### 技巧1: 批量评估

不要一个个评估,而是:

```
你: 帮我评估所有前端功能问题的优先级

AI: [批量评估29个前端问题]

    完成!前端问题优先级:
    P0: 3个 (核心交互)
    P1: 8个 (重要功能)
    P2: 12个 (体验优化)
    P3: 6个 (视觉增强)
```

### 技巧2: 分批处理

不要一次讨论所有P0问题,而是:

```
第1周: 反作弊系统 + 成就系统
第2周: 团队排名 + 推荐位机制
第3周: 其他P0问题
```

### 技巧3: 先读PRD再讨论

PRD生成后,先读一遍,再开始讨论:

```
你: 生成反作弊系统PRD

AI: ✅ PRD已生成

你: 让我先读一下
    [阅读PRD]

你: 好的,我有一些补充想法...
    [告诉Sarah补充内容]

AI: [更新PRD,质量评分从88→93]

你: 现在可以开始讨论了

AI: 好的,基于最新PRD...
```

---

## 🎯 与现有工作流的配合

### 与/discuss命令配合

```
旧流程: /discuss → 直接讨论问题
新流程: RICE评估 → PRD生成 → /discuss → 更高效讨论
```

### 与/sync-docs命令配合

```
讨论完成后:
/sync-docs
→ 自动同步到设计文档
→ 更新questions.md状态
→ 记录到CHANGELOG.md
```

### 与/check-progress命令配合

```
每完成几个P0问题:
/check-progress
→ 查看整体进度
→ 确认优先级是否需要调整
→ 规划下一步工作
```

---

## 📊 预期效果

### 效果1: 更清晰的优先级

- 从"随机讨论"到"数据驱动"
- 从"模糊判断"到"量化评分"
- 从"无序推进"到"有序执行"

### 效果2: 更高质量的需求

- 从"口头描述"到"结构化PRD"
- 从"遗漏细节"到"完整文档"
- 从"质量参差"到"90分保证"

### 效果3: 更高效的讨论

- 从"反复澄清"到"基于文档讨论"
- 从"遗漏问题"到"全面覆盖"
- 从"模糊决策"到"清晰记录"

---

## ⚠️ 常见问题

### Q1: RICE评估会不会太慢?

**答**: 第一次评估53个问题需要1-2小时,但后续:
- 新问题可以立即评估(5分钟)
- 避免在低价值问题上浪费数天
- 整体效率大幅提升

### Q2: PRD生成会不会太花时间?

**答**: Sarah的对话通常需要10-15分钟,但:
- 比手动写PRD快得多(通常需要1-2小时)
- 质量更高(90分保证)
- 讨论时节省大量时间

### Q3: 小功能也需要PRD吗?

**答**: 不是所有功能都需要PRD:
- P0问题: 建议生成PRD
- P1问题: 可以简化处理
- P2/P3问题: 直接讨论即可

### Q4: 如果不认同RICE评分怎么办?

**答**: RICE是参考,不是规则:
- 可以手动调整优先级
- 基于业务判断做最终决定
- RICE帮助避免遗漏和偏见

---

## 🔗 相关资源

**参考文档**:
- [RICE评估模板](../planning/rice-assessment-template.md)
- [product-manager-toolkit skill文档](../../skills/product-manager-toolkit/product-manager-toolkit/SKILL.md)
- [product-requirements skill文档](../../skills/product-requirements/product-requirements/SKILL.md)

**相关命令**:
- `/discuss` - 开始问题讨论
- `/sync-docs` - 同步文档
- `/check-progress` - 检查进度

**相关流程**:
- [需求确认流程](./requirement.md)
- [开发实施流程](./development.md)
- [测试反馈流程](./review.md)

---

**版本**: v1.0
**创建时间**: 2025-01-11
**适用项目**: 惊蛰计划
