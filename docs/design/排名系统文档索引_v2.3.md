# 惊蛰计划排名系统文档索引 v2.3

> **更新日期**: 2025-01-08
> **维护人**: 老黑(Claude)
> **状态**: 混合方案定稿 + 评分激励机制完成

---

## 📚 核心文档（当前生效）⭐⭐⭐⭐⭐

### 1. 惊蛰计划-排名系统算法方案-混合版_v1.0.md ⭐⭐⭐⭐⭐

- **类型**: 算法定稿方案
- **状态**: **当前生效** ✅✅✅
- **算法**: 用户权重 + 双侧截尾 + 算术平均
- **创建日期**: 2025-01-07
- **适合**: 产品经理、技术团队、参赛者
- **内容**:
  - 完整算法流程
  - Python代码实现示例
  - 数据库表结构设计
  - 面向参赛者的规则说明
  - 公平性验证测试
  - 实施计划
  - 开发检查清单

**必读章节**:
- 第三章: 核心算法（完整示例）
- 第六章: 技术实现（代码示例）
- 第八章: 规则说明文档（面向参赛者）

---

### 2. 惊蛰计划-排名系统设计文档_v1.0.md ⭐⭐⭐⭐⭐

- **类型**: 系统设计文档
- **状态**: **当前生效** ✅✅✅
- **创建日期**: 2025-01-07
- **适合**: 产品经理、技术团队
- **内容**:
  - 12个独立榜单架构
  - 排名资格规则（>20人次）
  - 并列处理规则
  - 优选游戏机制
  - AI使用对排名的影响
  - 团队作品排名规则
  - 20个待确认问题

**必读章节**:
- 第三章: 核心规则（已确认）
- 第六章: 与其他系统的集成
- 第七章: 数据结构设计

---

### 3. 评分系统设计方案_v1.0.md ⭐⭐⭐⭐⭐

- **类型**: 评分系统设计
- **状态**: **当前生效** ✅✅✅
- **创建日期**: 2025-01-06
- **适合**: 产品经理、技术团队
- **内容**:
  - 评分维度定义
  - 三种角色权限
  - 反作弊机制
  - 评分资格与限制

**与排名系统集成**:
- 提供12个维度的评分数据
- 排名门槛的计算来源
- AI使用标记

---

### 4. 评分维度详细指南_v1.0.md ⭐⭐⭐⭐

- **类型**: 维度定义文档
- **状态**: **当前生效** ✅
- **创建日期**: 2025-01-06
- **适合**: 参赛者、评审团
- **内容**:
  - 6个评分维度详细说明
  - 每个维度的评分要点
  - 常见误解与澄清

---

### 5. 关键名词解释索引_v1.0.md ⭐⭐⭐⭐⭐

- **类型**: 概念定义索引
- **状态**: **当前生效** ✅✅✅
- **创建日期**: 2025-01-08
- **适合**: 所有参与人员（产品经理、技术团队、参赛者、评审团）
- **内容**:
  - 排名系统核心概念（有效评分、用户权重、截尾规则等）
  - 经济系统概念（评分奖励、评分打赏、净成本）
  - 团队系统概念（个人赛、团队赛、混合排名、角色）
  - 评分系统概念（6个维度、12个榜单）
  - 作品类型概念（个人作品、团队作品、多游戏作品）

**必读章节**:
- 使用说明（为什么需要这个索引）
- 排名系统章节（有效评分⭐⭐⭐⭐⭐、用户权重⭐⭐⭐⭐⭐）
- 经济系统章节（评分打赏⭐⭐⭐⭐⭐、评分奖励⭐⭐⭐⭐）

**维护规范**:
- 每个系统设计前，先查看本索引
- 新增概念时，必须先定义并添加到本索引
- 修改概念定义时，更新本索引并同步到所有相关文档

---

## 🗂️ 归档文档（2025-01-07前方案）

### 归档位置
`docs/design/archive/ranking_system_v1_deprecated/`

### 归档清单

1. **在线评分与排名系统白皮书_v3.0.md**
   - 归档原因: 过于复杂，不适合12榜单架构
   - 保留价值: 学术参考，第二届可能借鉴Huber Mean

2. **惊蛰计划第一届评分排名系统实施方案.md**
   - 归档原因: 缺少用户权重机制，已被混合方案取代
   - 保留价值: 监控指标、工程清单

3. **排名系统技术实现文档_v1.0.md**
   - 归档原因: 基于旧算法（截尾+贝叶斯）
   - 保留价值: 数据库设计、API接口

4. **排名系统文档索引_v1.0.md**
   - 归档原因: 指向旧文档
   - 保留价值: 了解历史演进

**详见**: [归档README.md](archive/ranking_system_v1_deprecated/README.md)

---

## 🔄 方案演进历史

### v1.0 - 早期方案（2025-01-06）

**算法**: 截尾均值(10%) + 贝叶斯平滑(k=20)

**优点**:
- ✅ 冷启动保护好
- ✅ 学术界认可

**缺点**:
- ❌ 缺少用户权重机制
- ❌ 可解释性差（贝叶斯平滑难以解释）
- ❌ 参数调优困难（第一届无历史数据）

**归档时间**: 2025-01-07

---

### v2.0 - 混合方案（2025-01-07起）✅

**算法**: 用户权重(W=1+ln(1+n)) + 双侧截尾(10%) + 算术平均

**优点**:
- ✅ 公平性提升（用户权重）
- ✅ 可解释性强（简单算术平均）
- ✅ 第一届可行（无历史数据依赖）
- ✅ 符合12榜单架构

**缺点**:
- ⚠️ 刷分>20%时截尾失效（需人工监控）
- ⚠️ 无冷启动保护（第二届引入贝叶斯平滑）

**生效时间**: 2025-01-07

---

## 📖 阅读顺序建议

### 对于产品经理（蜡烛先生）

**第一步**: 了解混合方案
1. 阅读《惊蛰计划-排名系统算法方案-混合版_v1.0.md》第八章（规则说明）
2. 理解"一句话说明": 去掉最高最低10%，认真评分的人权重更高

**第二步**: 了解系统设计
1. 阅读《惊蛰计划-排名系统设计文档_v1.0.md》第三章（核心规则）
2. 理解12榜单架构和排名门槛

**第三步**: 了解隐患和风险
1. 阅读《混合方案隐患分析报告.md》（在新建文件夹/方案/）
2. 理解为什么需要人工反作弊监控

**预计时间**: 30分钟

---

### 对于后端开发

**第一步**: 理解算法
1. 阅读《惊蛰计划-排名系统算法方案-混合版_v1.0.md》第三章（核心算法）
2. 运行Python代码示例

**第二步**: 了解数据结构
1. 阅读《惊蛰计划-排名系统算法方案-混合版_v1.0.md》第四章（系统架构）
2. 查看数据库表结构设计

**第三步**: 参考旧文档（可选）
1. 阅读《归档/可借鉴内容总结.md》
2. 参考旧文档的监控指标和工程清单

**预计时间**: 2小时

---

### 对于参赛者

**必读**:
- 《惊蛰计划-排名系统算法方案-混合版_v1.0.md》第八章（规则说明）

**了解**:
- 为什么我的权重是3.39？ → 因为你评了10次
- 为什么我的10分被截掉了？ → 因为你权重高，加权后是最高分
- 如何提高权重？ → 多评分，权重 = 1 + ln(1+评分次数)

**预计时间**: 5分钟

---

## ⚡ 快速参考

### 核心算法（一句话）

> **去掉最高最低各10%的评分（按原始分），认真评分的人权重更高，最后算出加权平均分**

### 关键参数

| 参数 | 值 | 说明 |
|------|-----|------|
| **权重公式** | W = 1 + 0.55×ln(1+n) | n为用户评分次数 ✅（2025-01-07确认） |
| **截尾比例** | 10% | n<10时不截尾，**按原始分截尾** ✅ |
| **排名门槛** | >15人次 | 参赛者 + 2×评审团 ✅（第一届15，第二届20） |
| **并列阈值** | 0.01分 | 分差<0.01视为并列 |
| **更新频率** | 每小时 | 批量更新用户权重和排名 ✅（2025-01-07确认） |

### 4个核心规则

1. ✅ 12个独立榜单（6维度 × 2评分群体）
2. ✅ 用户贡献权重（W = 1 + 0.55×ln(1+n)，评5次约2.0）
3. ✅ 双侧截尾（去掉最高最低各10%，**按原始分**）
4. ✅ 不计算总分（保持各维度独立）

---

## 📊 开发工作量

**混合方案**: 2-3人日

| 任务 | 工作量 | 说明 |
|------|--------|------|
| 数据库设计 | 0.5天 | 3个表（rankings/user_weights/score_details） |
| 核心算法实现 | 1天 | Python代码已提供 |
| API接口开发 | 0.5天 | 排名查询/权重计算 |
| 前端展示 | 0.5天 | 榜单页面/规则说明 |
| 测试验证 | 0.5天 | 单元测试/集成测试 |

**对比**: 旧方案8人日（混合方案简化了很多）

---

## 🔗 相关文档

### 设计文档
- [关键名词解释索引_v1.0.md](关键名词解释索引_v1.0.md) ⭐⭐⭐⭐⭐ 新增
- [惊蛰计划-内部系统设计文档_v0.3_extended.md](惊蛰计划-内部系统设计文档_v0.3_extended.md)
- [惊蛰计划-团队系统设计文档_v1.0.md](惊蛰计划-团队系统设计文档_v1.0.md)
- [惊蛰计划-社区界面优化设计_v3.0.md](惊蛰计划-社区界面优化设计_v3.0.md)

### 决策记录
- [排名系统决策记录.md](排名系统决策记录.md) - 包含决策1-14（排名系统12个+经济系统2个）

### 分析报告
- [混合方案隐患分析报告.md](../../新建文件夹/方案/混合方案隐患分析报告.md)
- [修订定稿版评估报告.md](../../新建文件夹/方案/修订定稿版评估报告.md)
- [方案评估报告.md](../../新建文件夹/排名系统征集/方案评估报告.md)

### 问题追踪
- [../../development/issues/questions.md](../../development/issues/questions.md) - 待讨论问题
- [../../development/issues/archive/team-system-discussion-2025-01-07.md](../../development/issues/archive/team-system-discussion-2025-01-07.md) - 团队系统讨论

---

## ✅ 第一届技术方案确认

### 已确认内容（2025-01-07更新）

- ✅ **核心算法**: 用户权重(W=1+0.55×ln(1+n)) + 按原始分双侧截尾10% + 加权平均
- ✅ **12榜单架构**: 6维度 × 2评分群体
- ✅ **排名门槛**: >15人次（第一届，第二届可能恢复20）（参赛者 + 2×评审团）
- ✅ **并列处理**: 三级优先级（评审团得分 → 加权人次Σ权重 → 创新性）
- ✅ **用户权重系统**:
  - 权重公式: W = 1 + 0.55×ln(1+n)（评5次约2.0）
  - 初始权重: 1.0（无预热期）
  - 更新频率: 每小时批量更新
  - 显示规则: 显示评分次数和分布，隐藏权重数值
- ✅ **评审团权威性**: 靠独立榜单和时间积累体现，不在算法中加权
- ✅ **人工监控**: 必须增加反作弊人工审核
- ✅ **开发工作量**: 2-3人日，1周完成

### 第二届优化方向

- ⏳ 引入简化版贝叶斯平滑（冷启动保护）
- ⏳ 动态截尾比例（根据评分数调整）
- ⏳ 可能提高截尾比例到20%（如果第一届刷分严重）
- ⏳ 异常评分自动检测

### 第三届扩展方向

- ⏳ 根据前两届数据优化参数
- ⏳ 可能引入Huber Mean（如果第二届仍不够鲁棒）
- ⏳ 可能引入评分者信誉系统（RTS）
- ⏳ 可能引入互评团检测

---

## 📝 文档维护

### 版本管理

| 文档 | 当前版本 | 最后更新 | 状态 |
|------|---------|---------|------|
| 混合方案算法 | v1.0 | 2025-01-07 | ✅ 当前生效 |
| 排名系统设计 | v1.0 | 2025-01-07 | ✅ 当前生效 |
| 评分系统设计 | v1.0 | 2025-01-06 | ✅ 当前生效 |
| 维度详细指南 | v1.0 | 2025-01-06 | ✅ 当前生效 |
| **本文档** | **v2.0** | **2025-01-07** | **✅ 当前生效** |

### 归档版本

| 文档 | 版本 | 归档日期 | 状态 |
|------|------|---------|------|
| 排名系统文档索引 | v1.0 | 2025-01-07 | 📦 已归档 |
| 排名系统技术实现 | v1.0 | 2025-01-07 | 📦 已归档 |
| 第一届实施方案 | v1.0 | 2025-01-07 | 📦 已归档 |
| 白皮书v3.0 | v3.0 | 2025-01-07 | 📦 已归档 |

---

## 🎯 下一步行动

### 立即行动

1. ✅ 混合方案已完成定稿（2025-01-07）
2. ✅ **排名系统所有20个问题已100%完成**（决策1-12，2025-01-07）
3. ✅ **排名系统设计阶段全部完成**
4. ✅ **评分激励机制已完成**（决策13、14，2025-01-08）✨ 新增
5. ✅ **关键名词解释索引已创建**（统一定义所有系统核心概念，2025-01-08）✨ 新增
6. ⏳ 技术开发留到最后一期（先解决设计问题）

### 已完成决策（更新2025-01-08）

**排名系统**（12个决策）:
- ✅ 决策1: 排名门槛（第一届15人次）
- ✅ 决策2: 评审团权威性（靠独立榜单体现）
- ✅ 决策3: 评审团用户权重（第一届暂缓）
- ✅ 决策4: 用户权重更新策略（每小时）
- ✅ 决策5: 截尾与权重交互（按原始分截尾）
- ✅ 决策6: 用户权重公式（W = 1 + 0.55×ln(1+n)）
- ✅ 决策7: 用户权重初始化（1.0）
- ✅ 决策8: 用户权重显示（显示次数隐藏权重）
- ✅ 决策9: 团队作品排名（混合+标识）
- ✅ 决策10: 排名显示与作弊处理（Top10+详情页完整）
- ✅ 决策11: 多游戏作品处理（作为整体作品）
- ✅ 决策12: 评分人次计算（评审团权重×2）

**经济系统**（2个决策）✨ 新增:
- ✅ 决策13: 评分打赏机制（评分后必须打赏至少1金币，1-10档位）
- ✅ 决策14: 评分金币奖励机制（每次有效评分获得1金币）

**关键定义修正**（2025-01-08）:
- ✅ **有效评分定义修正**: 对某个游戏的第一次评分提交（无论评了几个维度）
- ✅ 修正了决策6中"评分次数定义"的错误理解（之前要求评满6个维度）

---

**文档状态**: ✅ 排名系统设计100%完成，评分激励机制已完成，关键名词索引已创建

**下一步**: 继续讨论其他系统问题（团队系统、前端功能等）或进入技术开发准备

**技术开发准备**:
- 数据库设计: user_weights表、user_score_stats表、经济系统表
- 后端开发: 权重计算、截尾算法、批处理任务、评分打赏机制
- 前端开发: 评分统计页面、分布可视化、榜单Top10展示、详情页完整排名、打赏选择界面

---

*文档维护人: 老黑(Claude)*
*最后更新: 2025-01-08*
*版本: v2.2*
