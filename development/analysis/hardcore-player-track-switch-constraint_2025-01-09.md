# 硬核玩家赛道切换约束影响分析

> **新增约束: 用户获得硬核玩家身份后不可更改至团队赛道**
> 分析日期: 2025-01-09
> **状态**: ✅ 已确认并同步到所有相关文档
> 影响范围: 赛道切换规则、撤回机制、用户引导

---

## 📋 问题背景

**用户新增约束**:
> "用户获得硬核玩家身份后不可更改至团队赛道"

**当前设计**:
设计文档v1.0的4.2节允许"个人赛道 → 团队赛道"切换:
```
个人赛道 → 团队赛道：
1. 个人赛道提交游戏后想添加队友
2. 系统提示："个人赛道无法添加队友，是否切换到团队赛道？"
3. 用户点击"是" → 撤回游戏 → 回到Draft状态
4. 创建团队，邀请队友加入
5. 重新提交游戏（自动锁定为团队赛道）
```

**矛盾点**:
- 当前设计允许个人赛道切换到团队赛道
- 但新增约束禁止硬核玩家切换到团队赛道
- **问题**: 如果个人赛道用户提交时选择公开源码(成为硬核玩家),后续想添加队友怎么办?

---

## 🔍 深度分析

### 场景1: 硬核玩家想添加队友

**用户流程**:
1. 用户A以个人赛道提交游戏《X》
2. 提交时选择公开源码 → 获得硬核玩家身份
3. 3天后,用户A想添加队友B
4. 点击"添加队友" → 系统提示:"个人赛道无法添加队友,是否切换到团队赛道?"
5. 用户A点击"是" → **系统应该怎么办?**

**当前设计的处理**:
- 允许撤回游戏
- 允许创建团队
- 允许重新提交为团队赛道

**新增约束后的冲突**:
- ❌ 硬核玩家不允许切换到团队赛道
- ❌ 但用户A确实需要添加队友B
- **矛盾**: 用户A的需求被硬核玩家身份限制

---

### 场景2: 用户先获得硬核玩家身份,后想切换团队赛道

**用户流程**:
1. 用户A以个人赛道提交游戏《X》,未公开源码
2. 提交后撤回 → 创建团队 → 重新提交为团队赛道 ✅
3. 用户A又想以个人赛道提交游戏《Y》,这次公开源码
4. 提交游戏《Y》,获得硬核玩家身份
5. 用户A发现游戏《Y》需要队友,想切换到团队赛道
6. **问题**: 硬核玩家身份是否绑定用户,还是绑定游戏?

**两种理解**:
- **理解A**: 硬核玩家身份绑定用户 → 用户A获得硬核玩家身份后,所有游戏都不能切换团队赛道
- **理解B**: 硬核玩家身份绑定游戏 → 只有游戏《Y》不能切换团队赛道,其他游戏可以切换

---

### 场景3: 团队赛道撤回后想以个人赛道重新提交

**用户流程**:
1. 用户A和用户B组队,以团队赛道提交游戏《X》
2. 提交后未公开源码(团队赛道无此选项)
3. 用户A撤回游戏,用户B退出团队
4. 用户A想以个人赛道重新提交游戏《X》,这次公开源码
5. **问题**: 是否允许?

**当前设计的处理**:
- 允许撤回
- 允许重新提交

**潜在问题**:
- 如果允许,是否违反公平性?(原本是团队作品,变成个人作品)

---

## 🎯 设计冲突分析

### 冲突1: 赛道切换规则 vs 硬核玩家约束

**当前设计** (4.2节):
```
个人赛道 → 团队赛道：允许 ❌
```

**新增约束**:
```
硬核玩家 → 团队赛道：禁止 ✅
```

**冲突点**:
- 个人赛道用户 = 可能是硬核玩家,也可能不是
- 如果用户是硬核玩家,则不允许切换
- 如果用户不是硬核玩家,则允许切换
- **需要细化**: 赛道切换规则需要区分"普通个人赛道用户"和"硬核玩家"

---

### 冲突2: 撤回机制 vs 硬核玩家约束

**当前设计** (8.2节):
```
撤回游戏 → 回到Draft状态 → 可重新提交
```

**新增约束**:
```
硬核玩家撤回后 → 仍不能切换到团队赛道
```

**冲突点**:
- 撤回机制默认允许重新提交到任何赛道
- 但硬核玩家撤回后仍受限
- **需要细化**: 撤回后重新提交的赛道限制

---

### 冲突3: 用户引导 vs 硬核玩家约束

**当前设计** (4.2节):
```
选择赛道后提示："团队赛道提交后不可切换到个人赛道"
```

**新增约束**:
```
个人赛道公开源码后提示："硬核玩家不可切换到团队赛道"
```

**冲突点**:
- 当前只提示"团队赛道 → 个人赛道"的不可逆
- 新增约束后,还需要提示"个人赛道(硬核玩家) → 团队赛道"的不可逆
- **需要细化**: 双向不可逆的用户引导

---

## 💡 解决方案

### 方案A: 硬核玩家身份绑定游戏 (推荐)

**规则**:
- 硬核玩家身份绑定游戏,不绑定用户
- 游戏《X》(个人赛道,公开源码) = 硬核玩家游戏
- 游戏《Y》(个人赛道,未公开源码) = 普通游戏
- 游戏《Z》(团队赛道) = 团队游戏

**赛道切换规则**:
```
1. 普通个人游戏 → 团队赛道: ✅ 允许
   - 撤回游戏 → 创建团队 → 重新提交为团队赛道

2. 硬核玩家游戏 → 团队赛道: ❌ 禁止
   - 系统提示:"硬核玩家游戏不能切换到团队赛道"
   - 保留选项: 放弃硬核玩家身份,然后切换

3. 团队游戏 → 个人赛道: ❌ 禁止
   - (原规则不变)

4. 团队游戏 → 个人赛道(硬核玩家): ❌ 禁止
   - 团队赛道撤回后,仍以团队赛道重新提交
```

**放弃硬核玩家身份的流程**:
```
1. 硬核玩家游戏撤回
2. 弹窗确认:
   """
   ⚠️ 切换到团队赛道需要放弃硬核玩家身份

   放弃后:
   - 源码链接将被删除
   - 硬核玩家标记将被移除
   - 已获得的额外金币不会被收回
   - "开源贡献者"成就保留

   是否确认放弃?

   [取消] [确认放弃并切换]
   """
3. 用户确认 → 删除源码链接 → 移除硬核玩家标记 → 允许切换
```

---

### 方案B: 硬核玩家身份绑定用户 (不推荐)

**规则**:
- 硬核玩家身份绑定用户
- 一旦用户在任何一个游戏公开源码,该用户就成为硬核玩家
- 硬核用户的所有游戏都不能切换到团队赛道

**赛道切换规则**:
```
1. 普通用户(未公开源码) → 团队赛道: ✅ 允许

2. 硬核用户(已公开源码) → 团队赛道: ❌ 禁止
   - 无论哪个游戏,都不允许切换

3. 团队游戏 → 个人赛道: ❌ 禁止
   - (原规则不变)
```

**问题**:
- 过于严格,限制了用户的灵活性
- 用户可能为了添加队友而不选择公开源码
- 与"激励开源分享"的目标相悖

**不推荐理由**:
- 方案A更灵活,用户可以针对单个游戏选择是否放弃硬核玩家身份
- 方案B过于一刀切,可能降低用户公开源码的意愿

---

### 方案C: 允许硬核玩家添加队友但不切换赛道 (折中方案)

**规则**:
- 硬核玩家游戏保持在个人赛道
- 但允许添加队友作为"协作者"
- 协作者不计入作者列表,不计入团队规模

**协作者机制**:
```
1. 硬核玩家游戏添加协作者
2. 协作者权限:
   - 可以编辑游戏草稿
   - 可以更新游戏信息
   - 但不显示为作者
   - 不获得硬核玩家身份

3. 游戏赛道仍为个人赛道
4. 评分排名仍按个人赛道计算
```

**问题**:
- 协作者的定义模糊
- 可能与团队系统的角色冲突
- 增加系统复杂度

**不推荐理由**:
- 引入新概念(协作者),增加理解成本
- 与团队系统的角色机制重叠
- 违背"个人赛道=1人"的语义

---

## 📊 方案对比

| 方案 | 灵活性 | 复杂度 | 用户友好度 | 推荐度 |
|-----|-------|-------|-----------|--------|
| **方案A** | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ |
| **方案B** | ⭐⭐ | ⭐⭐ | ⭐⭐ | ⭐ |
| **方案C** | ⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐ |

**推荐**: 方案A (硬核玩家身份绑定游戏)

---

## 🎯 建议修改设计文档

### 修改1: 细化赛道切换规则 (4.2节)

**原文**:
```markdown
### 4.2 赛道切换规则

**个人赛道 → 团队赛道**：
1. 个人赛道提交游戏后想添加队友
2. 系统提示："个人赛道无法添加队友，是否切换到团队赛道？"
3. 用户点击"是" → 撤回游戏 → 回到Draft状态
4. 创建团队，邀请队友加入
5. 重新提交游戏（自动锁定为团队赛道）
```

**修改为**:
```markdown
### 4.2 赛道切换规则

**普通个人游戏 → 团队赛道**：✅ 允许
1. 个人赛道提交游戏(未公开源码)后想添加队友
2. 系统提示："个人赛道无法添加队友，是否切换到团队赛道？"
3. 用户点击"是" → 撤回游戏 → 回到Draft状态
4. 创建团队，邀请队友加入
5. 重新提交游戏（自动锁定为团队赛道）

**硬核玩家游戏 → 团队赛道**：❌ 禁止
- 系统提示："硬核玩家游戏不能切换到团队赛道"
- 提供选项: "放弃硬核玩家身份并切换" → 弹窗确认

**放弃硬核玩家身份流程**:
1. 撤回游戏 → 弹窗:
   """
   ⚠️ 切换到团队赛道需要放弃硬核玩家身份

   放弃后:
   - 源码链接将被删除
   - 硬核玩家标记将被移除
   - 已获得的额外金币不会被收回
   - "开源贡献者"成就保留

   是否确认放弃?

   [取消] [确认放弃并切换]
   """
2. 用户确认 → 删除源码链接 → 移除硬核玩家标记 → 允许创建团队

**团队赛道 → 个人赛道**：❌ 禁止（单向锁定）
- 系统提示："团队赛道无法切换到个人赛道"
- 理由：团队作品是集体成果，不能变成个人作品
```

---

### 修改2: 补充用户引导提示 (11.3节)

**原文**:
```markdown
**操作提示**：
- 填写标题后：提示"标题已自动保存为草稿"
- 选择赛道后：提示"团队赛道提交后不可切换到个人赛道"
- 提交前：提示"提交前请确认所有信息无误"
```

**修改为**:
```markdown
**操作提示**：
- 填写标题后：提示"标题已自动保存为草稿"
- 选择个人赛道后：
  - 如果未勾选"公开源码": "提交后可切换到团队赛道"
  - 如果勾选"公开源码": "⚠️ 成为硬核玩家后不可切换到团队赛道"
- 选择团队赛道后：提示"团队赛道提交后不可切换到个人赛道"
- 提交前：提示"提交前请确认所有信息无误"
```

---

### 修改3: 补充硬核玩家标记说明 (6.2节)

**在"获得条件"后补充**:
```markdown
**硬核玩家身份绑定规则**:
- 硬核玩家身份绑定游戏,不绑定用户
- 游戏《X》(个人赛道,公开源码) = 硬核玩家游戏
- 游戏《Y》(个人赛道,未公开源码) = 普通游戏
- 硬核玩家游戏不能切换到团队赛道(除非放弃硬核玩家身份)
```

---

## 🚨 需要确认的问题

### Q1: 硬核玩家身份绑定游戏还是用户?
- [ ] 绑定游戏 (推荐)
- [ ] 绑定用户

### Q2: 是否允许硬核玩家放弃身份并切换赛道?
- [ ] 允许 (推荐)
- [ ] 不允许

### Q3: 如果允许放弃,已获得的额外金币是否收回?
- [ ] 收回
- [ ] 不收回 (推荐)

### Q4: "开源贡献者"成就是否保留?
- [ ] 保留 (推荐)
- [ ] 撤销

### Q5: 硬核玩家撤回后重新提交,是否保留硬核玩家身份?
- [ ] 保留 (如果仍以个人赛道提交并公开源码)
- [ ] 不保留 (撤回后需要重新选择)

---

## 📋 边界场景测试

### 测试场景1: 硬核玩家添加队友
1. 用户A以个人赛道提交游戏《X》,公开源码 → 硬核玩家 ✅
2. 用户A点击"添加队友" → 提示:"硬核玩家游戏不能切换到团队赛道" ❌
3. 用户A选择"放弃硬核玩家身份并切换" → 弹窗确认 ✅
4. 用户A确认 → 源码链接删除,硬核玩家标记移除 ✅
5. 用户A创建团队,邀请队友B ✅
6. 用户A重新提交游戏《X》为团队赛道 ✅
**预期结果**: 游戏成功切换到团队赛道,硬核玩家身份已放弃

---

### 测试场景2: 硬核玩家撤回后重新提交
1. 用户A以个人赛道提交游戏《X》,公开源码 → 硬核玩家 ✅
2. 用户A撤回游戏《X》 ✅
3. 用户A修改游戏内容,重新提交(个人赛道,公开源码) ✅
4. **预期结果**: 重新获得硬核玩家身份(或保持硬核玩家身份)

---

### 测试场景3: 普通用户切换到团队赛道
1. 用户A以个人赛道提交游戏《Y》,未公开源码 ✅
2. 用户A点击"添加队友" → 提示:"个人赛道无法添加队友,是否切换到团队赛道?" ✅
3. 用户A点击"是" → 撤回游戏 ✅
4. 用户A创建团队,邀请队友B ✅
5. 用户A重新提交游戏《Y》为团队赛道 ✅
**预期结果**: 游戏成功切换到团队赛道

---

## 💡 总结

### 核心发现

1. **新增约束合理**: 硬核玩家不可切换到团队赛道,防止经济系统失衡
2. **当前设计冲突**: 设计文档v1.0的4.2节需要细化
3. **推荐方案A**: 硬核玩家身份绑定游戏,允许放弃身份并切换赛道

### 建议修改

1. **修改4.2节**: 细化赛道切换规则,区分普通个人游戏和硬核玩家游戏
2. **修改6.2节**: 补充硬核玩家身份绑定规则说明
3. **修改11.3节**: 补充用户引导提示

### 待确认问题

- Q1-Q5: 5个关键决策问题需要确认

---

**分析完成时间**: 2025-01-09
**分析人员**: 老黑(Claude)
**状态**: ✅ 已确认 (2025-01-10)
**确认文档**: [a-level-problems-resolution-summary_2025-01-10.md](./a-level-problems-resolution-summary_2025-01-10.md)

**确认的规则**:
- Q1: 身份绑定用户 ✅
- Q2: 不允许放弃身份 ✅
- Q3: 无需考虑(因不允许放弃) ✅
- Q4: 成就永久保留 ✅
- Q5: 撤回后仍保留硬核玩家身份 ✅
