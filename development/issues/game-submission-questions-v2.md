# 游戏提交系统问题清单 v2.0

> **基于完整需求v2.0的设计问题** - 惊蛰计划核心功能模块
> 创建日期: 2025-01-08
> 状态: 🔄 待讨论

---

## 📋 模块说明

**游戏提交系统**是惊蛰计划的核心功能之一,负责管理参赛游戏的创建、编辑、发布全流程。

**核心价值**:
- 分步式7步提交流程,降低用户认知负担
- Draft自动保存机制,防止数据丢失
- 与团队系统、评分系统深度集成
- 支持外部链接托管,零存储成本

**相关文档**:
- [游戏提交系统需求规格 v2.0](./game-submission-requirements-v2.md) ⭐ 完整需求
- [游戏提交系统问题清单 v1.0](./game-submission-questions.md) 📁 已归档(更新规则相关)
- [惊蛰计划-团队系统设计文档_v1.3.md](../../docs/design/惊蛰计划-团队系统设计文档_v1.3.md)

---

## 🎯 待确认问题清单

### 🔴 高优先级（第一届必须明确）

#### Q1: 游戏提交时的作者列表如何生成? ✅ 已确认

**影响范围**:
- 数据库设计: 不需要独立的authors表,直接关联team_id
- 表单验证: 无需校验作者身份
- 公平性保障: 自动确保只有团队成员被列为作者

**已确认方案**: 方案A - **自动同步团队快照**

**实现逻辑**:
- 提交时自动抓取当前团队成员作为作者
- 无需手动编辑,系统自动生成
- 提交后作者列表锁定,不可修改

**优点**:
- ✅ 避免不一致问题
- ✅ 防止遗漏成员或添加非成员
- ✅ 降低开发和维护复杂度
- ✅ 数据模型简单: games表直接关联team_id

**确认时间**: 2025-01-08

---

#### Q2: 赛道选择是手动选择还是自动判定? ✅ 已确认

**影响范围**:
- 表单设计: 需要赛道选择器 + 智能约束逻辑
- 用户体验: 给用户选择权,但防止错误选择
- 数据一致性: 通过智能约束确保数据正确

**已确认方案**: 手动选择 + 智能约束

**实现逻辑**:
- 用户手动选择赛道(单选按钮或下拉框)
- **智能约束规则**:
  - 团队人数 = 1: 可选"个人赛道"或"未完成"
  - 团队人数 ≥ 2: "个人赛道"选项禁用或隐藏,只能选"团队赛道"或"未完成"
  - "未完成"选项始终可选

**UI展示**:
```
选择赛道:
● 个人赛道 (仅1人团队可选)
○ 团队赛道 (仅≥2人团队可选)
○ 未完成作品 (不参与排名,但可以为其他游戏评分)
```

**约束示例**:
- 1人团队看到: "个人赛道"(可选) + "未完成"(可选)
- 2人团队看到: "团队赛道"(可选) + "未完成"(可选),"个人赛道"禁用

**优点**:
- ✅ 用户有选择权,保留灵活性
- ✅ 智能约束防止选错(比如2人选个人赛道)
- ✅ 支持未完成赛道
- ✅ 用户体验友好,选项清晰

**确认时间**: 2025-01-08

---

#### Q3: 游戏正文编辑器需要支持哪些功能? ✅ 已确认

**影响范围**:
- 技术选型: CodeMirror 6 / Monaco Editor
- 开发成本: 中等(成熟的Markdown编辑器库)
- 用户体验: 分屏布局,实时预览

**已确认方案**: Markdown编辑器 + 实时预览

**技术实现**:
- **技术选型**: CodeMirror 6 (推荐) 或 Monaco Editor
- **布局**: 左右分屏
  - 左侧: Markdown源码编辑区
  - 右侧: 实时渲染预览区
- **工具栏**: 插入常用语法按钮
  - 粗体、斜体、删除线
  - 标题(H1-H6)
  - 列表(有序/无序)
  - 引用
  - 代码块
  - 图片
  - 链接
  - Emoji选择器

**图片上传方式**: 混合模式
- 支持两种方式:
  1. **上传到服务器**: 文件上传按钮,自动上传并插入Markdown图片语法
  2. **外部图床链接**: 直接粘贴图片URL
- **默认建议**: 提示用户优先使用外部图床(节省服务器成本)

**优点**:
- ✅ 技术成熟,易于实现
- ✅ 用户可学习Markdown语法(通用技能)
- ✅ 便于版本控制
- ✅ 图片上传灵活性高

**确认时间**: 2025-01-08


---

#### Q4: 封面图不符合要求时如何处理? ✅ 已确认

**影响范围**:
- 用户体验: 上传前即时验证,拒绝不符合要求的图片
- 服务质量: 确保所有封面图质量统一
- 存储成本: 无需服务端压缩,节省服务器资源

**已确认方案**: 严格验证 + 拒绝上传

**规格要求**:
- 推荐尺寸: 1920x1080 (16:9)
- 最小尺寸: 960x540
- 文件大小: <2MB
- 格式: JPG/PNG/WebP

**实现逻辑**:
- **前端验证**: 上传前检测尺寸、大小、格式
- **错误提示**: 不符合要求时拒绝上传,显示具体错误信息
- **详细反馈**: 显示推荐规格和当前规格对比

**UI提示示例**:
```
❌ 封面图不符合要求

当前尺寸: 1280x720 (推荐: 1920x1080)
当前大小: 3.2MB (限制: <2MB)
格式: PNG ✅

请重新上传符合要求的图片
```

**优点**:
- ✅ 确保所有封面图质量一致
- ✅ 页面展示效果好
- ✅ 避免服务端处理复杂度
- ✅ 用户得到明确反馈

**确认时间**: 2025-01-08

---

#### Q5: 平台和引擎选项如何设计? ✅ 已确认

**影响范围**:
- 数据库设计: 平台用多对多关系,引擎用ENUM
- 搜索筛选: 支持按平台/引擎筛选游戏
- 统计分析: 平台/引擎分布统计

**已确认方案**: 平台多选 + 引擎单选

**平台选项**: 多选 (至少选1个)
- **选项**: Windows / macOS / Linux / Web (HTML5) / Android / iOS
- **UI展示**:
  ```
  支持平台: (可多选,至少选1个)
  ☑ Windows
  ☑ macOS
  ☐ Linux
  ☐ Web (HTML5)
  ☐ Android
  ☐ iOS
  ```

**引擎选项**: 单选 (固定选项)
- **选项**:
  - Unity
  - Unreal Engine
  - Godot
  - GameMaker
  - RPG Maker
  - Construct
  - 自定义/其他 (勾选后显示文本框)
- **UI展示**:
  ```
  游戏引擎: (单选)
  ○ Unity
  ○ Unreal Engine
  ○ Godot
  ● 自定义/其他: [输入框: C++ / SDL2]
  ```

**链接描述**: 必填
- 帮助用户理解下载链接和运行要求
- 最小字符数: 10字符

**优点**:
- ✅ 准确表达多平台游戏
- ✅ 引擎数据标准化,便于统计
- ✅ 链接说明帮助用户理解游戏要求

**确认时间**: 2025-01-08

---

#### Q6: 提交清单确认机制如何设计? ✅ 已确认

**影响范围**:
- 用户体验: 无强制等待,流畅的提交流程
- 纠错机制: 评分期前可撤回修改
- 数据完整性: 提交后作者列表锁定

**已确认方案**: 无等待时间 + 可撤回

**实现逻辑**:
- **三个复选框**: 全部勾选后"提交"按钮才激活
- **无强制等待**: 不设置等待时间,尊重用户
- **撤回机制**:
  - 评分期开始前: 允许撤回重新提交
  - 评分期开始后: 不允许撤回,只能联系管理员
- **修改记录**: 保留修改历史

**UI展示**:
```
提交前确认清单:

☐ 我已阅读并理解比赛规则 [查看规则]
☐ 我已退出不符合条件的评分维度 [查看我的维度设置]
☐ 我确认投递到正确的赛道: [个人赛道] [可修改]

[提交游戏] (按钮,全部勾选后激活)
```

**最后确认弹窗**:
```
⚠️ 提交前最后确认

游戏标题: XXX
赛道: 个人赛道
作者: 张三
AI使用: 否
退出维度: 无

提交后将锁定作者列表,是否确认提交?

[取消] [确认提交]
```

**撤回规则**:
- 评分期开始前: 可随时撤回,修改后重新提交
- 评分期开始后: 不允许撤回
- 修改历史: 记录每次修改的时间和内容

**优点**:
- ✅ 用户体验流畅,无强制等待
- ✅ 允许纠错
- ✅ 快速跳转链接降低阅读成本

**确认时间**: 2025-01-08

---

#### Q7: 源码上传 - 团队赛道如何处理硬核玩家标记? ⏳ 待确认

**影响范围**:
- 成就系统: 硬核玩家标记触发特殊成就
- 用户体验: 团队作品的源码公开激励
- 公平性: 个人赛道vs团队赛道的硬核标记

**背景**: 需求1.7新增了源码上传功能,勾选"公开源码"后标记玩家为"硬核玩家"

**待确认问题**:
1. 团队作品中谁算硬核玩家?
   - 选项A: 所有团队成员都标记为硬核
   - 选项B: 仅队长标记为硬核
   - 选项C: 提交者(队长)标记为硬核,其他成员单独提交源码才能获得标记

2. 硬核玩家标记仅对个人赛道有效?还是团队也有效?
   - 选项A: 仅个人赛道有硬核玩家概念
   - 选项B: 团队赛道也有硬核玩家标记
   - 选项C: 团队赛道标记为"硬核团队"而非个人

**确认时间**: 待确认

---

#### Q8: 硬核玩家标记的作用和奖励机制? ⏳ 待确认

**影响范围**:
- 成就系统设计: 硬核玩家触发哪些成就?
- 激励机制: 公开源码对参赛者有什么好处?
- 社区建设: 如何鼓励开源分享?

**待确认问题**:
1. 硬核玩家标记获得什么奖励?
   - 特殊徽章/头像框?
   - 积分/虚拟货币奖励?
   - 仅荣誉无实际奖励?

2. 团队开源和单人开源的奖励是否不同?
   - 团队开源奖励更高?
   - 一视同仁?

**确认时间**: 待确认

---

#### Q9: 源码链接的有效性验证? ⏳ 待确认

**影响范围**:
- 数据质量: 确保源码链接真实有效
- 防作弊: 防止虚假提交获得硬核标记
- 用户体验: 避免无效链接

**待确认问题**:
1. 是否需要验证源码链接?
   - 选项A: 前端验证URL格式即可
   - 选项B: 后台尝试访问验证可访问性
   - 选项C: 人工审核抽查

2. 无效链接如何处理?
   - 硬核标记自动撤销?
   - 警告但不撤销标记?
   - 需要手动联系管理员修正?

**确认时间**: 待确认

---

## 🔍 设计问题检视报告 (2025-01-08)

基于完整需求v2.0的全面检视,发现18个潜在问题:

### 🔴 高优先级问题 (9个) - 必须在开发前解决

**需求矛盾与流程设计**:
- **P1**: 7步流程定义不一致 → 需明确是7个页面跳转还是单页长表单
- **P2**: Draft模式触发时机不明确 → 何时算"创建"?填写标题后还是点击按钮后?
- **P4**: 字符限制单位不统一 → "100字"vs"100字符",中文环境下如何计数?
- **P5**: 游戏简介"确切100字"验证逻辑缺失 → 如何处理超出或不足?

**技术实现细节**:
- **P7**: 游戏链接"有效性检查"未定义 → 百度网盘等需登录的链接如何验证?
- **P15**: 编辑器技术选型成本被低估 → CodeMirror 6开发周期5-7天,是否考虑现成库?

**系统集成与边界场景**:
- **P8**: 团队成员变更时的游戏作者处理逻辑缺失 → 成员退出后作者快照如何处理?
- **P9**: 评分期版本锁定机制冲突 → 严重bug或链接失效时如何处理?
- **P11**: Draft草稿的重复提交防护缺失 → 多个队长成员同时操作如何处理?
- **P12**: 游戏撤回后的作者列表锁定问题 → 撤回重新提交时作者列表是否更新?
- **P16**: 数据库外键约束缺失 → 团队删除后游戏数据如何处理?

### ⚠️ 中优先级问题 (9个) - 建议在开发前解决

- **P3**: 步骤6"作者信息"显示不完整 → 是否显示成员身份标签/头像/排序?
- **P6**: 封面图规格验证的边界情况 → 1280x720符合比例但小于推荐,允许吗?
- **P10**: 成就系统集成的"硬核玩家"标记逻辑不清晰 → 已记录在Q7-Q9
- **P13**: 视频链接嵌入的兼容性问题 → Bilibili短链接、YouTube播放列表如何处理?
- **P14**: 提交确认清单的跳转逻辑不清晰 → 跳转修改后是否需要重新勾选确认项?
- **P17**: game_dimensions表的独立性问题 → 只有6个布尔字段,是否需要独立表?
- **P18**: game_tags表的tag_type字段设计冗余 → type/platform/engine语义不同,建议分表

### 📊 问题分类统计

| 问题类型 | 数量 | 占比 |
|---------|------|------|
| 需求矛盾/不清晰 | 5 | 28% |
| 验证规则缺失 | 4 | 22% |
| 系统集成问题 | 4 | 22% |
| 边界场景处理 | 3 | 17% |
| 数据库设计优化 | 2 | 11% |

### 🎯 建议行动计划

**第一阶段: 需求澄清 (1-2天)**
- 解决P1、P2、P4、P5、P6 (流程定义和验证规则)
- 解决P7、P13、P14 (技术实现细节)

**第二阶段: 系统设计 (2-3天)**
- 解决P8、P9、P11、P12 (集成和边界场景)
- 解决P10、P15 (功能定义和技术选型)

**第三阶段: 数据库设计 (1天)**
- 解决P16、P17、P18 (数据表优化)

**总计时间**: 4-6天完成所有问题确认后,再开始技术实现。

### 📄 详细检视报告

完整问题列表和解决方案请参考: [游戏提交系统设计检视报告](../../development/analysis/game-submission-review_2025-01-08.md)

---

## 📊 问题统计

| 优先级 | 已确认 | 待确认 | 总数 |
|--------|--------|--------|------|
| 🔴 高优先级 | 6 | 3 | 9 |
| 🔴 设计检视问题 | 0 | 18 | 18 |

**总计**: 9个核心设计问题 + 18个检视问题 = **27个问题**

- ✅ **6个核心问题已确认** (Q1-Q6)
- ⏳ **3个核心问题待确认** (Q7-Q9: 源码上传相关)
- ⏳ **18个检视问题待确认** (P1-P18: 需求矛盾、验证规则、系统集成等)

---

## 🔗 与其他系统的集成

### 与团队系统集成
- ✅ Q1: 作者列表自动同步团队快照
- ✅ Q2: 赛道判定基于团队人数
- ⚠️ P8: 成员变更时的作者快照处理逻辑需补充
- ⚠️ P11: 多个队长成员同时操作的冲突处理需补充
- 权限控制: 仅队长可提交/更新

### 与评分系统集成
- ✅ Q6: 提交前确认退出维度
- ⚠️ P9: 评分期版本锁定与紧急更新的冲突需处理
- 评分期开始后锁定游戏版本

### 与成就系统集成
- ⏳ Q7-Q9: 硬核玩家标记逻辑需确认
- ⚠️ P10: 硬核玩家奖励机制需设计

---

## 📝 设计文档规划

**待创建**: [游戏提交系统设计文档_v1.0.md](../../docs/design/游戏提交系统设计文档_v1.0.md)

**文档内容**:
1. 7步提交流程详细设计
2. 每个字段的验证规则
3. 数据库表结构
4. API接口设计
5. UI/UX原型
6. 与其他系统集成
7. 安全性考虑
8. 性能优化方案

**前置条件**: 建议先解决18个检视问题(P1-P18)后再创建设计文档

---

*最后更新: 2025-01-08*
*当前状态: 6个核心问题已确认, 3个核心问题+18个检视问题待确认*
*下一步: 使用 /discuss 继续确认Q7-Q9,然后逐个解决P1-P18*
