---
description: 启动问题清单讨论,自动加载当前进度并准备下一个问题
argument-hint: [问题清单文件路径(可选)]
allowed-tools: Read, Grep
---

# 问题讨论启动器

自动加载当前问题清单,定位讨论进度,准备下一个问题的完整提问模板。

## 功能

1. 自动读取当前问题清单文件
2. 定位当前讨论进度
3. 准备下一个问题的完整提问模板
4. 显示讨论进度摘要

## 使用方法

```bash
/discuss                                    # 使用默认问题清单
/discuss development/active/issues/scoring-system-questions.md  # 指定问题清单
```

## 执行流程

请按以下步骤执行:

### 步骤1: 确定问题清单文件

```bash
如果用户提供了参数 $1:
  使用 $1 作为问题清单文件
否则:
  搜索 development/active/issues/ 目录下的最新问题清单
  选择最近修改的文件
```

### 步骤2: 读取问题清单

```bash
使用Read工具读取问题清单文件
提取以下信息:
- 当前模块名称
- 讨论阶段(第一轮/第二轮/第三轮/第四轮)
- 当前进度(哪个问题正在讨论)
- 已确认问题数量
- 待确认问题数量
```

### 步骤3: 定位当前问题

```bash
查找第一个未标记✅的问题
提取:
- 问题编号
- 问题标题
- 问题描述
- 选项列表
- 推荐选项
- 理由说明
```

### 步骤4: 生成提问模板

使用以下格式输出:

```markdown
【当前模块】{模块名称}
【问题清单】{文件路径}
【讨论阶段】{阶段名称}
【当前进度】{已完成问题} → {当前问题} (当前)

━━━━━━━━━━━━━━━━

【问题 {问题编号}】{问题标题}

**问题描述**:
{问题描述内容}

**选项**:
- **A. 选项1**(推荐)
  优点: ...
  缺点: ...

- **B. 选项2**
  优点: ...
  缺点: ...

**我的建议**: {推荐选项}
**理由**: {推荐理由}

━━━━━━━━━━━━━━━━

【等待你的回答】
请选择A/B/C，或提出你的想法。
```

### 步骤5: 显示进度摘要

```markdown
📊 **进度摘要**:
- ✅ 已确认: {已确认数量}个问题
- 🔄 当前讨论: {当前问题编号}
- ⏳ 待确认: {待确认数量}个问题
- 📈 完成度: {百分比}%

【下一步建议】
{下一个问题的简短说明}
```

## 错误处理

### 情况1: 问题清单文件不存在

```markdown
❌ 错误: 找不到问题清单文件

请检查:
1. 文件路径是否正确
2. 文件是否存在于 development/active/issues/ 目录
3. 可以尝试手动指定文件路径: /discuss [文件路径]

可用的问题清单:
{列出 development/active/issues/ 下的所有.md文件}
```

### 情况2: 所有问题都已确认

```markdown
🎉 恭喜! 所有问题都已确认完成!

**模块**: {模块名称}
**确认问题数**: {总数量}个
**完成时间**: {日期}

【下一步建议】
1. 使用 /sync-docs 同步所有决策到设计文档
2. 使用 /check-progress 查看整体进度
3. 开始下一个模块的讨论
```

### 情况3: 问题清单格式不正确

```markdown
⚠️ 警告: 问题清单格式可能不正确

未找到明确的问题标记，请确保:
- 问题编号格式为: ### 1.1, ### Q1.2, 或类似格式
- 未确认问题没有 ✅ 标记
- 问题包含明确的选项和描述

尝试使用第一个未完成的问题: {问题标题}
```

## 示例

### 输入
```bash
/discuss
```

### 输出
```markdown
【当前模块】评分系统设计
【问题清单】development/active/issues/scoring-system-questions.md
【讨论阶段】第一轮(核心逻辑)
【当前进度】1.1 ✅ → 1.2 (当前)

━━━━━━━━━━━━━━━━

【问题 Q1.2】评分是否支持小数?

**问题描述**:
评分系统的分数档位设计将影响用户评分体验和排名精度。

**选项**:
- **A. 支持0.5分档位**(推荐)
  优点: 平衡精度和复杂度,用户可以表达"8.5分"这样的评价
  缺点: 排名计算略复杂

- **B. 支持0.1分档位**
  优点: 精度最高
  缺点: 用户难以区分8.3和8.4的区别,计算复杂

- **C. 仅支持整数档位**
  优点: 实现简单
  缺点: 精度不足,可能导致大量并列

**我的建议**: A
**理由**: 0.5分档位在精度和复杂度之间取得最佳平衡,符合用户直觉

━━━━━━━━━━━━━━━━

【等待你的回答】
请选择A/B/C,或提出你的想法。

━━━━━━━━━━━━━━━━

📊 **进度摘要**:
- ✅ 已确认: 1个问题
- 🔄 当前讨论: Q1.2
- ⏳ 待确认: 20个问题
- 📈 完成度: 5%

【下一步建议】
确认Q1.2后,继续讨论Q1.3(评分资格与权限)
```

## 注意事项

1. **问题编号格式**: 支持多种格式(1.1, Q1.2, 一.1等)
2. **进度定位**: 基于✅标记判断是否已确认
3. **文件搜索**: 如果未指定文件,自动搜索最新的问题清单
4. **错误恢复**: 遇到错误时提供清晰的解决建议

## 开发信息

- **创建时间**: 2025-01-06
- **开发者**: 老黑(Claude)
- **版本**: 1.0
- **状态**: 开发中
