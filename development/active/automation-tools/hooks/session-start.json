{
  "description": "SessionStart Hook - 会话开始时自动加载项目上下文,显示当前进度和待确认问题",
  "hooks": {
    "SessionStart": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "会话开始,自动加载项目上下文并显示状态摘要。请执行以下操作:\n\n**步骤1: 读取核心配置文件**\n\n读取以下文件(按优先级):\n1. docs/product/claude.md - 项目配置\n2. docs/product/CHANGELOG.md - 最新版本和变更\n3. development/自动化工具开发清单_2025-01-06.md - 当前开发任务\n\n**步骤2: 提取关键信息**\n\n从上述文件中提取:\n- 项目名称和当前阶段\n- 最新版本号\n- 最近的重要变更\n- 当前开发任务和进度\n- 待确认问题数量(如有)\n\n**步骤3: 显示会话开始摘要**\n\n使用以下格式输出:\n\n```markdown\n━━━━━━━━━━━━━━━━\n🎯 惊蛰计划 - 设计讨论会话\n━━━━━━━━━━━━━━━━\n\n📋 **当前状态**:\n- 阶段: {从claude.md提取}\n- 版本: {从CHANGELOG提取最新版本}\n- 最后更新: {从CHANGELOG提取日期}\n\n┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓\n┃ ⚡ 可用命令                                                    ┃\n┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛\n\n/discuss         - 启动问题讨论\n/sync-docs      - 同步所有文档\n/check-progress - 检查项目进度\n/token-check    - 检查token使用情况\n\n┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓\n┃ 📊 最新进展 (v{最新版本})                                    ┃\n┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛\n\n{列出CHANGELOG中最近2-3条重要变更}\n\n┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓\n┃ 🎯 当前任务                                                  ┃\n┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛\n\n{从开发清单提取当前进行中的任务}\n\n{如果有问题清单,显示:}\n┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓\n┃ 📝 问题讨论进度                                              ┃\n┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛\n\n{从问题清单提取进度}\n- 已确认: {X}个问题\n- 待确认: {Y}个问题\n- 当前讨论: {问题编号}\n\n{如果当前有正在讨论的问题}\n📍 **继续上次的讨论**:\n- 模块: {模块名}\n- 问题: {问题编号} {问题标题}\n- 进度: {简短描述}\n\n💡 使用 /discuss 继续讨论\n\n━━━━━━━━━━━━━━━━\n💬 **准备就绪,请告诉我你的需求!**\n━━━━━━━━━━━━━━━━\n```\n\n**步骤4: 错误处理**\n\n如果某些文件不存在:\n- 跳过该文件,继续读取其他文件\n- 在摘要中说明\"(部分配置未加载)\"\n- 不要因为文件缺失而报错\n\n**重要提示**:\n- 保持输出简洁,不要超过30行\n- 只显示最关键的信息\n- 不要每次都显示完整的帮助文档\n- 如果token使用已超过50K,跳过详细显示,只显示简化版:\n\n```markdown\n🎯 惊蛰计划 v{版本} - 会话开始\n\n当前任务: {简要描述}\n可用命令: /discuss /sync-docs /check-progress /token-check\n\n准备就绪!\n```",
            "timeout": 15
          }
        ]
      }
    ]
  }
}
