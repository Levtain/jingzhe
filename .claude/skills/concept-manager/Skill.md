# 关键名词管理器 (Concept Manager)

> 自动检测、提取和管理项目中的关键概念与术语

---

## 📖 功能说明

**核心能力**:
1. **概念检测**: 从讨论内容中识别可能的关键名词
2. **概念提取**: 提取概念名称、定义、作用范围、相关决策
3. **冲突检测**: 对比现有索引，发现定义冲突
4. **格式化生成**: 生成符合索引格式的Markdown条目
5. **协作式确认**: 询问用户是否添加到索引
6. **批量同步**: 批量更新多个相关文档

---

## 🎯 使用场景

- ✅ 设计讨论结束后，检查是否有新概念需要收录
- ✅ 发现概念定义冲突时，进行一致性检查
- ✅ 手动添加新概念到索引时，格式化生成条目
- ✅ 批量同步概念定义到所有相关文档

---

## 🚀 命令列表

### /concept-manager detect

**功能**: 扫描最近的讨论内容，检测可能的关键名词

**示例**:
```
/concept-manager detect
```

**输出**:
```
🔍 检测到可能的关键名词:

1. "净成本" (高置信度)
   - 定义: 评分行为的金币净变化
   - 建议: 添加到经济系统章节

2. "评分激励" (中置信度)
   - 定义: 激励用户评分的机制
   - 建议: 可能与已有概念"评分奖励"重复

是否将"净成本"添加到关键名词索引？(y/n)
```

---

### /concept-manager check-conflicts

**功能**: 对比现有索引，检查概念冲突

**示例**:
```
/concept-manager check-conflicts "有效评分"
```

**输出**:
```
🔍 检查概念: "有效评分"

✅ 已存在于索引中
📍 位置: 排名系统章节

📊 当前定义:
- 对某个游戏的第一次评分提交（无论评了几个维度）

⚠️ 发现潜在冲突:
在文档 "排名系统算法方案-混合版_v1.0.md" 中:
- 第45行: "有效评分是指对游戏第一次完整提交评分（6个维度全部评完）"
- 与索引定义不一致！

建议操作:
1. 更新算法文档，与索引保持一致
2. 或更新索引定义

是否执行全局同步？(y/n)
```

---

### /concept-manager draft

**功能**: 为指定概念生成格式化的索引条目草稿

**示例**:
```
/concept-manager draft "净成本"
```

**输出**:
```
📝 概念条目草稿: "净成本"

#### 净成本 ⭐⭐⭐

**定义**: 评分行为的金币净变化

**计算**: 奖励（+1金币）+ 打赏（-1金币）= 0金币

**特点**:
- ✅ 用户净成本为0
- ✅ 金币流向游戏开发者
- ✅ 激励评分但不造成金币消耗

**相关决策**: 决策13、决策14

**作用范围**:
- 经济系统平衡计算
- 用户激励设计

---

是否添加此概念到索引？(y/n)
```

---

### /concept-manager update

**功能**: 批量同步概念定义到所有相关文档

**示例**:
```
/concept-manager update
```

**输出**:
```
🔄 开始批量同步...

✅ 已更新文档 (4个):
1. 关键名词解释索引_v1.0.md
   - 新增: "净成本"
   - 修正: "有效评分"定义

2. questions.md
   - 标记相关概念为已确认

3. claude.md
   - 更新评分机制章节

4. CHANGELOG.md
   - 添加v1.14版本条目

📊 同步统计:
- 新增概念: 1个
- 修正概念: 1个
- 更新文档: 4个
- 新增行数: ~50行

✅ 同步完成！
```

---

## 🔧 工作流程

### 检测流程

```
1. 扫描最近讨论内容
   ↓
2. 识别关键名词模式
   - 带引号的专业术语: "有效评分"、"用户权重"
   - 新定义的术语: "XXX是指..."
   - 决策中的核心概念
   ↓
3. 提取概念信息
   - 概念名称
   - 定义描述
   - 作用范围
   - 相关决策
   ↓
4. 生成格式化条目
   ↓
5. 协作式确认
   - 展示给用户
   - 等待确认
   ↓
6. 更新索引（如果用户确认）
```

### 冲突检测流程

```
1. 读取关键名词解释索引
   ↓
2. 对比指定概念的定义
   ↓
3. 在所有设计文档中搜索该概念
   ↓
4. 检查定义一致性
   ↓
5. 报告冲突
   - 列出冲突位置
   - 展示不同定义
   ↓
6. 建议操作
   - 更新文档
   - 或更新索引
```

---

## 📊 置信度评估

**高置信度** (⭐⭐⭐):
- 明确定义的专业术语
- 带引号的核心概念
- 决策中明确的概念

**中置信度** (⭐⭐):
- 可能与已有概念重复
- 定义不够明确
- 需要进一步澄清

**低置信度** (⭐):
- 临时性术语
- 非关键性词汇
- 上下文不明确

---

## 🛡️ 安全机制

### 自动过滤

**不收录**:
- ❌ 临时变量名
- ❌ 代码片段
- ❌ 非项目相关术语
- ❌ 过于简单的词汇（如"游戏"、"评分"）

**需要人工确认**:
- ⚠️ 与已有概念相似
- ⚠️ 定义模糊
- ⚠️ 跨多个系统使用

### 版本控制

**更新前备份**:
- 自动备份索引文件
- 记录更新历史
- 支持回滚操作

---

## 📚 相关文档

- [关键名词解释索引_v1.0.md](../../../docs/design/关键名词解释索引_v1.0.md)
- [维护规范](../../../docs/design/关键名词解释索引_v1.0.md#🔧-维护规范)

---

## 🎓 使用建议

1. **讨论结束后**: 运行 `/concept-manager detect` 检查新概念
2. **发现概念冲突**: 运行 `/concept-manager check-conflicts "概念名"`
3. **手动添加概念**: 运行 `/concept-manager draft "概念名"` 生成草稿
4. **批量同步**: 运行 `/concept-manager update` 同步到所有文档

---

**开发者**: 老黑(Claude)
**版本**: 1.0
**创建日期**: 2025-01-08
**状态**: ✅ 活跃
