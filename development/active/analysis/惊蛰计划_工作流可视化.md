# 惊蛰计划 - 系统设计工作流程图

> **创建日期**: 2025-01-06
> **创建人**: 老黑(Claude)
> **目的**: 可视化展示惊蛰计划系统设计的工作流程

---

## 📊 工作流总览

### 完整设计流程图

```mermaid
graph TD
    Start([项目启动]) --> Phase1[阶段一: 核心评分系统设计]
    Phase1 --> P1_1[评分维度定义]
    Phase1 --> P1_2[评分权限机制]
    Phase1 --> P1_3[反作弊系统]
    Phase1 --> P1_4[AI使用处理规则]

    P1_1 --> P1_1_1[✅ 6个维度定义]
    P1_1_1 --> P1_1_2[✅ 0.5分档位]
    P1_1_2 --> P1_1_3[✅ 星级映射]

    P1_2 --> P1_2_1[✅ 参赛者评分权]
    P1_2_1 --> P1_2_2[✅ 评审团评分权]
    P1_2_2 --> P1_2_3[✅ 禁止自评规则]

    P1_3 --> P1_3_1[✅ 高危监测机制]
    P1_3_1 --> P1_3_2[✅ 渐进式惩罚策略]
    P1_3_2 --> P1_3_3[✅ 申诉复核机制]

    P1_4 --> P1_4_1[✅ AI申报制度]
    P1_4_1 --> P1_4_2[✅ 争议仲裁流程]
    P1_4_2 --> P1_4_3[✅ 维度不参与规则]

    Phase1 --> Phase2[阶段二: 革命性排名系统设计]
    Phase2 --> P2_1[✅ 12个独立榜单]
    Phase2 --> P2_2[✅ 优选游戏机制]
    Phase2 --> P2_3[✅ 双重视角排名]

    P2_1 --> P2_1_1[6维度×2群体=12榜]
    P2_1_1 --> P2_1_2[单维度独立排名]

    P2_2 --> P2_2_1[✅ 3个维度前10判定]
    P2_2_1 --> P2_2_2[✅ AI维度处理规则]

    P2_3 --> P2_3_1[参赛者视角榜单]
    P2_3_1 --> P2_3_2[评审团视角榜单]

    Phase2 --> Phase3[阶段三: 排名计算方法设计]
    Phase3 --> P3_1[✅ 截尾均值算法]
    Phase3 --> P3_2[✅ 贝叶斯平滑算法]
    Phase3 --> P3_3[✅ 三级Tie-breaker]

    P3_1 --> P3_1_1[去掉最高最低各10%]
    P3_1_1 --> P3_1_2[抗极端值扰动]

    P3_2 --> P3_2_1[k=20固定参数]
    P3_2_1 --> P3_2_2[小样本向全局回归]

    P3_3 --> P3_3_1[人次优先]
    P3_3_1 --> P3_3_2[方差次之]
    P3_3_2 --> P3_3_3[评审团占比最后]

    Phase3 --> Phase4[阶段四: 设计不足补充]
    Phase4 --> P4_1[✅ 强制评分机制]
    Phase4 --> P4_2[✅ 动态门槛机制]
    Phase4 --> P4_3[✅ AI维度优选判定]
    Phase4 --> P4_4[✅ 评审团门槛明确]

    P4_1 --> P4_1_1[软性强制≥10游戏]
    P4_1_1 --> P4_1_2[利益驱动机制]

    P4_2 --> P4_2_1[参赛者组动态门槛]
    P4_2_1 --> P4_2_2[max20, 30%参赛数]
    P4_2_2 --> P4_2_3[评审团组动态门槛]
    P4_2_3 --> P4_2_4[max5, 50%评审团]

    P4_3 --> P4_3_1[仅计参与排名维度]
    P4_3_1 --> P4_3_2[3+维度前10判定]

    Phase4 --> Phase5[阶段五: 待讨论问题]
    Phase5 --> P5_1[🔴 高优先级8项]
    Phase5 --> P5_2[🟡 中优先级4项]
    Phase5 --> P5_3[🟢 低优先级3项]

    P5_1 --> P5_1_1[维度定义详细指南]
    P5_1_1 --> P5_1_2[页面级权限控制]
    P5_1_2 --> P5_1_3[成就系统设计]
    P5_1_3 --> P5_1_4[经济系统具体数值]
    P5_1_4 --> P5_1_5[推荐位机制细节]
    P5_1_5 --> P5_1_6[游戏提交规则]
    P5_1_6 --> P5_1_7[组队与赛道规则]
    P5_1_7 --> P5_1_8[主题投票机制]

    P5_2 --> P5_2_1[反作弊阈值细化]
    P5_2_1 --> P5_2_2[善意度系统]
    P5_2_2 --> P5_2_3[内容审核机制]
    P5_2_3 --> P5_2_4[活动状态管理]

    P5_3 --> P5_3_1[非功能性要求]
    P5_3_1 --> P5_3_2[未来升级方向]

    Phase5 --> End([第一届开赛准备完成])

    style Phase1 fill:#e1f5e1
    style Phase2 fill:#e1f5e1
    style Phase3 fill:#e1f5e1
    style Phase4 fill:#fff4e1
    style Phase5 fill:#ffe1e1
    style P5_1 fill:#ffcccc
```

---

## 🔄 我的工作流程

### 1. 任务理解阶段

```mermaid
graph LR
    A[用户提出需求] --> B{需求类型判断}
    B -->|设计讨论| C[进入设计流程]
    B -->|代码实现| D[进入开发流程]
    B -->|文档整理| E[进入文档流程]
    B -->|问题分析| F[进入分析流程]

    C --> G[理解业务背景]
    D --> G
    E --> G
    F --> G

    G --> H[明确输出目标]
    H --> I[确认优先级]
```

**核心要点**:
- 🔍 首先理解用户要解决什么问题
- 📋 判断任务类型(设计/开发/文档/分析)
- 🎯 明确期望的输出形式
- ⚡ 确认紧急程度和优先级

---

### 2. 信息收集阶段

```mermaid
graph TD
    A[开始信息收集] --> B[阅读相关文档]
    B --> C{文档是否充分?}
    C -->|是| D[提取关键信息]
    C -->|否| E[询问用户补充]

    D --> F[交叉验证信息]
    E --> F

    F --> G[识别设计冲突]
    G --> H{是否有冲突?}
    H -->|是| I[标记冲突点]
    H -->|否| J[信息收集完成]

    I --> K[准备冲突解决方案]
    K --> J
```

**核心要点**:
- 📖 系统性阅读已有设计文档
- 🔗 建立文档之间的关联关系
- ⚠️ 识别设计矛盾和遗漏
- 💡 准备多个备选方案

---

### 3. 方案设计阶段

```mermaid
graph TD
    A[开始方案设计] --> B[基于约束条件设计]
    B --> C[考虑边界情况]
    C --> D[评估技术可行性]
    D --> E[计算复杂度评估]

    E --> F{方案是否合理?}
    F -->|否| G[重新设计]
    F -->|是| H[准备多个备选方案]

    G --> B
    H --> I[方案对比分析]
    I --> J[推荐最优方案]
```

**核心要点**:
- 🧩 在现有框架内设计解决方案
- 🎯 考虑极端情况和边界条件
- ⚙️ 评估实现难度和技术成本
- 📊 提供多个方案供选择

---

### 4. 文档输出阶段

```mermaid
graph LR
    A[开始文档输出] --> B[选择合适的文档类型]
    B --> C[设计方案文档]
    B --> D[更新问题清单]
    B --> E[创建分析报告]
    B --> F[编写技术实现]

    C --> G[结构化组织内容]
    D --> G
    E --> G
    F --> G

    G --> H[添加代码示例]
    H --> I[版本控制标记]
    I --> J[交叉引用关联文档]
    J --> K[完成输出]
```

**文档类型选择**:
- **设计方案**: 适合确定的设计决策
- **问题清单**: 适合跟踪待讨论问题
- **分析报告**: 适合回顾和总结
- **技术实现**: 适合算法和代码规范

---

### 5. 质量检查阶段

```mermaid
graph TD
    A[完成初稿] --> B[自我检查]
    B --> C{检查项}

    C --> C1[✅ 逻辑一致性]
    C --> C2[✅ 技术可行性]
    C --> C3[✅ 文档完整性]
    C --> C4[✅ 版本控制]
    C --> C5[✅ 交叉引用正确]

    C1 --> D{是否通过?}
    C2 --> D
    C3 --> D
    C4 --> D
    C5 --> D

    D -->|是| E[准备提交]
    D -->|否| F[修正问题]
    F --> B
```

**检查清单**:
1. ✅ 设计逻辑是否自洽
2. ✅ 技术实现是否可行
3. ✅ 文档描述是否完整
4. ✅ 版本号是否正确更新
5. ✅ 关联文档是否同步

---

## 📈 项目进度总览

```mermaid
pie title 惊蛰计划设计完成度
    "已完成核心设计" : 72
    "第一届必须补充" : 13
    "第二届评估优化" : 10
    "未来迭代考虑" : 5
```

**统计说明**:
- 已完成核心设计: 评分系统+排名系统(72%)
- 第一届必须补充: 4个高优先级问题已全部补充 ✅
- 第二届评估优化: 反作弊阈值、善意度等(10%)
- 未来迭代考虑: 非功能性要求、扩展性(5%)

---

## 🎯 当前状态与下一步

### 当前状态(2025-01-06)

```mermaid
graph LR
    A[评分系统设计] -->|✅ 完成| B[革命性排名系统]
    B -->|✅ 完成| C[排名计算方法]
    C -->|✅ 完成| D[设计不足补充]
    D -->|✅ 完成| E[待讨论问题总结]

    E -->|🔴 高优先级| F[第一届必须明确]
    E -->|🟡 中优先级| G[第二届考虑]
    E -->|🟢 低优先级| H[未来优化]
```

### 下一步建议

```mermaid
graph TD
    A[当前状态] --> B{选择下一步}

    B -->|方案1| C[🔴 讨论高优先级问题]
    B -->|方案2| D[📋 开始技术选型]
    B -->|方案3| E[🔧 准备开发环境]

    C --> C1[维度定义指南1-2h]
    C --> C2[页面级权限控制1-2h]
    C --> C3[成就系统设计0.5-1h]
    C --> C4[经济系统数值1-2h]
    C --> C5[其他4项3-5h]

    D --> D1[后端技术栈选型]
    D --> D2[前端技术栈选型]
    D --> D3[数据库设计]

    E --> E1[创建代码仓库]
    E --> E2[配置开发环境]
    E --> E3[编写基础框架]
```

**我的建议**: 先讨论高优先级问题,确保所有设计细节明确后再进入技术选型。

---

## 🛠️ 我使用的工具

### 1. 文档编辑工具
- ✅ **Read**: 读取已有文档
- ✅ **Write**: 创建新文档
- ✅ **Edit**: 修改现有文档

### 2. 代码执行工具
- ✅ **Bash**: 执行命令行操作
  - 检查文件
  - 运行脚本
  - Git操作

### 3. 搜索工具
- ✅ **Glob**: 文件名模式匹配
- ✅ **Grep**: 文件内容搜索

### 4. 任务管理工具
- ✅ **TodoWrite**: 任务列表管理
  - 创建任务
  - 更新状态
  - 追踪进度

### 5. 专用工具
- ✅ **AskUserQuestion**: 向用户提问澄清需求
- ✅ **EnterPlanMode**: 进入计划模式(复杂任务)
- ✅ **Skill**: 执行特定技能脚本
- ✅ **Task**: 启动专用子代理

---

## 💡 工作流特点

### 优势

1. **系统性**: 每个阶段都有明确的目标和输出
2. **可追溯**: 所有文档都有版本控制和交叉引用
3. **迭代优化**: 设计→补充→回顾的闭环流程
4. **优先级清晰**: 高/中/低优先级分类管理
5. **质量保证**: 多重检查机制确保输出质量

### 适配场景

- ✅ **设计讨论**: 复杂业务规则的梳理和确认
- ✅ **问题分析**: 系统性识别设计不足
- ✅ **文档输出**: 结构化的技术文档编写
- ✅ **方案对比**: 多个备选方案的评估
- ⚠️ **代码开发**: 需要配合实际开发环境
- ⚠️ **实时协作**: 需要用户及时反馈

---

## 📞 如何与我协作

### 最佳实践

1. **明确需求**: 描述清楚要解决的问题
2. **提供背景**: 说明业务场景和约束条件
3. **及时反馈**: 对方案提出意见和疑问
4. **逐步推进**: 大任务拆分成小步骤
5. **保持同步**: 定期确认方向是否正确

### 沟通模式

```mermaid
graph LR
    A[用户提出需求] --> B[我理解并确认]
    B --> C[我提供方案]
    C --> D{用户是否满意?}
    D -->|是| E[确定方案]
    D -->|否| F[用户提出修改意见]
    F --> B
    E --> G[进入实施阶段]
```

---

## 🎓 附录: Mermaid 图表使用指南

### 如何查看本文件的可视化图表

**方法1: 使用在线工具** (推荐)
1. 访问 https://mermaid.live/
2. 复制本文档中的 mermaid 代码块
3. 粘贴到在线编辑器中
4. 自动渲染为可视化图表

**方法2: 使用 VSCode 插件**
1. 安装插件: "Markdown Preview Mermaid Support"
2. 在 VSCode 中打开本文件
3. 按 `Ctrl+Shift+V` 预览
4. 自动渲染所有 mermaid 图表

**方法3: 使用其他支持 Mermaid 的工具**
- Typora
- Obsidian
- Notion
- GitHub/GitLab (直接渲染)

---

## 📝 版本历史

| 日期 | 版本 | 变更内容 | 作者 |
|------|------|---------|------|
| 2025-01-06 | v1.0 | 初始版本,创建完整工作流可视化 | 老黑(Claude) |

---

**文档结束**

如有任何疑问或需要调整工作流程,请随时提出!
