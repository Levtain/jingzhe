# 游戏提交系统完整需求规格 v2.0

> **基于itch.io、Ludum Dare、Global Game Jam等平台最佳实践**
> 创建日期: 2025-01-08
> 状态: ✅ 需求已完善

---

## 📋 核心设计原则

参考主流游戏jam平台的最佳实践,游戏提交系统应该遵循以下原则:

1. **分步提交流程** - 降低用户认知负担
2. **Draft模式** - 允许预览后发布
3. **必填/选填明确** - 清晰的字段标识
4. **实时验证** - 即时反馈错误
5. **自动保存** - 防止数据丢失

---

## 🎯 完整功能需求清单

### 第一部分: 游戏基本信息 (必填)

#### 1.1 游戏标题
- **字段类型**: 文本输入
- **字符限制**: 5-100字符
- **必填**: ✅ 是
- **验证**: 不允许特殊字符,不允许纯数字
- **建议**: 提供智能命名建议

#### 1.2 游戏简介 (100字)
- **字段类型**: 文本域
- **字符限制**: 确切100字
- **必填**: ✅ 是
- **实时显示**: 剩余字符数
- **提示**: "用一句话吸引玩家下载你的游戏"

#### 1.3 游戏正文描述
- **字段类型**: 富文本编辑器 + Markdown双模式
- **功能需求**:
  - ✅ 文字格式: 粗体、斜体、颜色、字号
  - ✅ 段落处理: 标题(H1-H6)、列表、引用
  - ✅ 插入内容: Emoji、图片(到光标位置)、链接、代码块
  - ✅ Markdown语法高亮
  - ✅ 实时预览模式
- **必填**: ✅ 是
- **最小长度**: 200字符
- **图片处理**:
  - 支持上传到服务器
  - 同时支持外部图片链接
  - 单张图片<2MB
- **建议**: 提供"如何玩"模板

#### 1.4 封面图上传
- **字段类型**: 文件上传 + 拖拽
- **必填**: ✅ 是
- **规格要求**:
  - **推荐尺寸**: 1920x1080 (16:9)
  - **最小尺寸**: 960x540
  - **文件大小**: <2MB
  - **格式**: JPG/PNG/WebP
- **实时验证**:
  - ✅ 自动识别图片尺寸和大小
  - ✅ 不符合要求时拒绝上传
  - ✅ 显示推荐的尺寸和当前尺寸对比
- **额外功能**:
  - 自动生成缩略图(用于列表展示)
  - 支持裁剪工具

#### 1.5 游戏截图
- **字段类型**: 多文件上传(拖拽支持)
- **必填**: ✅ 是(至少1张)
- **数量限制**: 1-10张
- **规格要求**:
  - **推荐尺寸**: 1920x1080
  - **文件大小**: 每张<2MB
  - **格式**: JPG/PNG/WebP
- **功能**:
  - 拖拽排序
  - 设置封面图(默认第一张)
  - 删除替换
- **提示**: "上传5-10张截图展示游戏精彩时刻"

#### 1.6 视频/预告片 (选填)
- **字段类型**: 视频链接嵌入
- **支持平台**: YouTube、Vimeo、Bilibili
- **嵌入方式**: 粘贴链接URL
- **必填**: ❌ 否
- **功能**:
  - 自动生成嵌入代码
  - 实时预览

#### 1.7 源码上传 (选填) 🆕 新增需求
- **字段类型**: 是否选择 + 链接输入
- **必填**: ❌ 否
- **功能**:
  - 复选框: "☐ 我愿意公开游戏源码"
  - 勾选后显示: 源码仓库链接输入框(GitHub/GitLab等)
  - 后台自动标记该玩家为"硬核玩家"
- **待确认问题**:
  - 团队赛道如何处理?团队作品中谁算硬核玩家?
  - 硬核玩家标记仅对个人赛道有效?还是团队也有效?
  - 如果是团队,是否所有成员都标记为硬核?还是仅队长?

---

### 第二部分: 游戏分类与标签

#### 2.1 游戏类型Tag (多选)
- **字段类型**: 下拉多选 + 搜索
- **必填**: ✅ 是
- **最少选择**: 1个
- **最多选择**: 5个
- **建议Tag列表**:
  - 动作、冒险、休闲、解谜、角色扮演、射击、策略、模拟、体育、竞速、恐怖、生存、教育、音乐、视觉小说
- **功能**:
  - 搜索过滤
  - 热门Tag排序
  - 支持自定义Tag(需审核)

#### 2.2 平台选择 (多选)
- **字段类型**: 复选框
- **必填**: ✅ 是
- **选项**:
  - ✅ Windows
  - ✅ macOS
  - ✅ Linux
  - ✅ Web (HTML5)
  - ✅ Android
  - ✅ iOS
- **功能**: 根据选择显示后续相关选项

#### 2.3 游戏引擎 (单选)
- **字段类型**: 单选 + 其他(自定义)
- **必填**: ✅ 是
- **选项**:
  - Unity
  - Unreal Engine
  - Godot
  - GameMaker
  - RPG Maker
  - Construct
  - Pygame
  - Cocos Creator
  - 自定义/其他
- **自定义选项**:
  - 选择"其他"时显示文本输入框
  - 允许自由填写引擎名称

#### 2.4 链接与描述
- **字段类型**: 动态表单(可添加多条)
- **必填**: ✅ 至少1条
- **每条包含**:
  - 链接URL (必填)
  - 平台选择 (必填,从2.2中选择)
  - 描述性注释 (选填,如"Windows完整版"、"需要手柄")
- **功能**:
  - 添加/删除链接
  - 平台与链接关联
  - 链接有效性检查

---

### 第三部分: AI使用披露

#### 3.1 AI工具使用声明
- **字段类型**: 单选(是/否)
- **必填**: ✅ 是
- **选项**:
  - ✅ 是,我在创作中使用了生成式AI工具
  - ❌ 否,我没有使用生成式AI工具
- **说明**: "选择是后,请在下方详细说明使用了哪些工具和资源"

#### 3.2 AI使用详情 (条件显示)
- **字段类型**: 文本域
- **显示条件**: 仅在3.1选择"是"时显示
- **必填**: 条件必填
- **提示**: "请详细说明:
- 使用了哪些AI工具(如Midjourney、Suno、ChatGPT等)?
- 用于生成哪些内容(美术、音乐、代码、文案等)?
- AI生成内容占作品的比例?"

#### 3.3 AI使用影响说明
- **内容**: "根据比赛规则,使用AI的维度将不参与该维度的评分和排名。例如:如果使用AI生成美术,则'视觉效果'维度不参与排名。"

---

### 第四部分: 评分维度选择

#### 4.1 维度退出选择
- **字段类型**: 复选框(6个维度)
- **必填**: ✅ 是
- **选项**:
  - ❌ 创新性 (退出此维度评分)
  - ❌ 主题诠释 (退出此维度评分)
  - ❌ 视觉效果 (退出此维度评分)
  - ❌ 音乐音频 (退出此维度评分)
  - ❌ 整体性 (退出此维度评分)
  - ❌ 整活儿 (退出此维度评分)
- **默认状态**: 全部不选(参与所有维度评分)
- **说明文字**:
  > "如果使用了AI生成某个维度的内容,或者自认为没有处理好某个维度,可以退出该维度的评分。
  > 退出维度后,该维度将不参与排名计算,但不影响其他维度的评分。"

#### 4.2 退出影响预览
- **功能**: 实时显示退出后的影响
- **显示内容**:
  - "您将参与 X/6 个维度的评分"
  - "已退出: [列出退出的维度]"
  - 提示: "退出维度=该维度不参与排名,其他维度正常竞争"

---

### 第五部分: 赛道选择

#### 5.1 赛道自动判定
- **功能**: 系统根据团队人数自动判定
- **判定规则**:
  - 团队人数 = 1 → 个人赛道
  - 团队人数 ≥ 2 → 团队赛道
- **显示方式**:
  - 显示当前判定结果
  - 说明判定依据(当前团队人数)

#### 5.2 未完成作品选项
- **字段类型**: 复选框
- **选项**: ☑ 标记为"未完成作品"
- **说明**:
  > "未完成作品不参与评分和排名,但作者可以给其他游戏评分。
  > 适合:想展示作品但不想参与评选,或者作品未完成的情况。"
- **功能**:
  - 选择后在列表页标注"未完成"
  - 不出现在排名榜单中
  - 仍然可以下载、评论、点赞

#### 5.3 赛道确认
- **字段类型**: 信息展示
- **内容**:
  - 当前赛道: [个人/团队/未完成]
  - 团队成员: [显示成员列表]
- **功能**:
  - 允许在提交前调整团队(跳转到团队管理)
  - 确认信息无误后继续

---

### 第六部分: 作者信息 (自动生成)

#### 6.1 作者列表 (自动同步)
- **功能**: 从团队系统自动获取成员快照
- **显示规则**:
  - 团队成员: 显示全部成员
  - 个人作者: 显示自己
- **说明**: "作者信息从您的团队自动同步,提交后不可修改"

#### 6.2 成员快照
- **技术实现**: 提交时记录team_members表的快照
- **用途**:
  - 防止成员变更影响已提交作品
  - 明确作者身份
  - 用于评分权限判断

---

### 第七部分: 提交确认清单

#### 7.1 三项确认
- **字段类型**: 三个复选框
- **必填**: ✅ 全部勾选才能提交

**确认项1**: ☑ 我已阅读并理解比赛规则
- **功能**: 点击文字快速跳转到规则页面
- **说明**: "请仔细阅读比赛规则,确保作品符合要求"

**确认项2**: ☑ 我已正确退出不符合条件的维度
- **功能**: 链接到第四部分,允许快速调整
- **说明**: "如果使用了AI生成内容,请退出对应维度"

**确认项3**: ☑ 我已确认投递到正确的赛道
- **功能**: 显示当前赛道,允许跳转调整
- **说明**: "个人赛道: 1人团队 | 团队赛道: ≥2人团队"

#### 7.2 提交按钮状态
- **状态1** (未全部勾选): "请完成上述确认" (灰色,不可点击)
- **状态2** (全部勾选): "提交游戏" (蓝色,可点击)

#### 7.3 提交前最后检查
- **功能**: 弹窗显示所有关键信息摘要
- **显示内容**:
  - 游戏标题
  - 赛道信息
  - 团队成员
  - Tag数量
  - 参与评分的维度数
  - AI使用情况
- **按钮**: [返回修改] [确认提交]

---

## 🚀 提交流程设计

### 分步提交 (7个步骤)

```
步骤1: 创建游戏 → Draft草稿
├─ 填写标题
├─ 填写100字简介
└─ 自动保存为Draft

步骤2: 编辑详情
├─ 富文本/Markdown正文
└─ 上传封面图

步骤3: 媒体资源
├─ 上传截图(1-10张)
└─ 添加视频(选填)

步骤4: 分类信息
├─ 选择游戏Tag(1-5个)
├─ 选择平台(多选)
├─ 选择引擎(单选)
└─ 添加链接和描述

步骤5: AI与维度
├─ 披露AI使用情况
└─ 选择退出的评分维度

步骤6: 赛道确认
├─ 查看自动判定的赛道
├─ (可选)标记为未完成
└─ 查看作者列表(自动生成)

步骤7: 提交确认
├─ 三项确认清单
├─ 最后检查弹窗
└─ 提交发布
```

### Draft草稿模式

**功能说明**:
- 创建后自动保存为Draft状态
- Draft状态的游戏只有创建者可见
- 可随时返回继续编辑
- 提交后才能公开显示

**好处**:
- 防止误提交未完成的作品
- 允许分多次填写
- 提供预览功能

---

## 🛡️ 验证规则

### 实时验证

| 字段 | 验证规则 | 错误提示 |
|------|---------|---------|
| 标题 | 5-100字符,不允许特殊字符 | "标题长度应为5-100字符" |
| 简介 | 确切100字 | "简介应恰好100字" |
| 正文 | 最少200字符 | "正文至少200字符" |
| 封面图 | 1920x1080推荐, <2MB | "图片尺寸不符合要求" |
| 截图 | 至少1张,最多10张 | "请上传1-10张截图" |
| Tag | 至少1个,最多5个 | "请选择1-5个游戏类型" |
| 平台 | 至少1个 | "请选择至少1个平台" |
| 引擎 | 必选1个 | "请选择游戏引擎" |
| 链接 | 至少1条,URL有效 | "请添加至少1个有效链接" |

### 提交前验证

1. **必填字段检查**: 所有必填字段都已填写
2. **格式验证**: 所有上传文件符合规格
3. **链接验证**: 所有链接可访问
4. **团队状态**: 必须已加入团队(个人或多人)
5. **重复提交检查**: 同一团队不能重复提交

---

## 💾 数据保存与恢复

### 自动保存
- **触发时机**: 每个步骤完成后
- **保存内容**: 所有已填写字段
- **保存频率**: 每30秒或在字段变化时
- **提示**: "已自动保存于 HH:MM:SS"

### 草稿恢复
- **功能**: 返回提交页面时自动加载上次草稿
- **提示**: "检测到未完成的草稿,是否继续?"
- **选项**: [继续编辑] [放弃草稿]

---

## 🔄 更新与版本管理

### 更新权限
- **开发期内**: 允许无限次更新
- **评分期开始**: 不允许更新(版本锁定)
- **权限**: 仅队长可以更新

### 更新流程
1. 点击"更新游戏"按钮
2. 修改相应字段
3. 填写"更新说明"(必填,100字)
4. 三项确认清单(同提交)
5. 提交更新

### 更新历史
- **记录**: 每次更新的时间和说明
- **版本号**: 自动递增(v1, v2, v3...)
- **当前版本**: 仅显示最新版本
- **回滚**: 不支持回滚到旧版本

---

## 📂 文件管理

### 文件上传限制

| 文件类型 | 大小限制 | 数量限制 | 格式要求 |
|---------|---------|---------|---------|
| 封面图 | <2MB | 1张 | JPG/PNG/WebP |
| 截图 | <2MB/张 | 1-10张 | JPG/PNG/WebP |
| 正文图片 | <2MB/张 | 无限制 | JPG/PNG/GIF |
| 游戏文件 | 不托管 | 外部链接 | - |

### 存储策略
- **不托管游戏文件**: 仅使用外部链接(itch.io模式)
- **原因**: 降低服务器成本,提高下载速度
- **支持的托管平台**:
  - 网盘: 百度网盘、阿里云盘、OneDrive、Google Drive
  - 游戏平台: itch.io、GameJolt
  - 自建服务器

---

## 🎨 UI/UX 设计建议

### 表单布局
- **分步导航**: 左侧显示7个步骤,当前步骤高亮
- **进度指示**: 顶部进度条显示完成度
- **必填标识**: 必填字段标红星(*)
- **帮助提示**: 每个字段旁有?图标,悬浮显示说明

### 视觉反馈
- **实时验证**: 输入时立即显示✅或❌
- **加载状态**: 上传时显示进度条
- **成功提示**: 完成步骤后显示✅动画
- **错误提示**: 醒目的红色提示框

### 移动端适配
- **响应式设计**: 支持手机和平板
- **拖拽上传**: 移动端支持拍照上传
- **简化流程**: 移动端可选简化版流程

---

## 🔗 与其他系统集成

### 与团队系统集成
- 自动获取团队成员快照
- 显示当前团队信息
- 仅队长有提交权限

### 与评分系统集成
- 维度退出信息传递到评分系统
- AI使用信息影响评分资格
- 赛道信息影响评分分组

### 与排名系统集成
- 个人赛道和团队赛道分别排名
- 未完成作品不参与排名
- 维度退出不影响其他维度排名

### 与成就系统集成
- 提交游戏触发"首次提交"成就
- 获得≥10个评分触发"受欢迎"成就
- 特殊赛道可能触发特殊成就

---

## 📊 数据表设计建议

### games (游戏主表)
```sql
game_id          INT          PK
game_title       VARCHAR(100)
game_summary     VARCHAR(200)  -- 100字简介
game_description  TEXT         -- 富文本正文
cover_image      VARCHAR(255)
team_id          INT          FK  -- 团队ID(成员快照关联)
track_type       ENUM         -- individual/team/unfinished
ai_used          BOOLEAN
ai_details       TEXT         -- AI使用详情
created_at       DATETIME
updated_at       DATETIME
status           ENUM         -- draft/published/hidden
```

### game_tags (游戏标签表)
```sql
tag_id           INT          PK
game_id          INT          FK
tag_name         VARCHAR(50)
tag_type         ENUM         -- type/platform/engine
```

### game_links (游戏链接表)
```sql
link_id          INT          PK
game_id          INT          FK
link_url         VARCHAR(500)
platform         VARCHAR(50)
description      VARCHAR(200)
```

### game_media (媒体资源表)
```sql
media_id         INT          PK
game_id          INT          FK
media_type       ENUM         -- cover/screenshot/video
file_url         VARCHAR(500)
file_size        INT
display_order    INT
```

### game_dimensions (维度退出表)
```sql
game_id          INT          PK
exit_innovation  BOOLEAN
exit_theme       BOOLEAN
exit_visual      BOOLEAN
exit_audio       BOOLEAN
exit_completeness BOOLEAN
exit_fun         BOOLEAN
```

### game_versions (版本历史表)
```sql
version_id       INT          PK
game_id          INT          FK
version_number   INT
changelog       TEXT         -- 更新说明
updated_at       DATETIME
updated_by       INT          FK
```

---

## 📝 待确认问题记录

以下问题需要在实现前确认:

1. **团队成员编辑**:
   - ❓ 是否需要手动添加作者功能?
   - ✅ 建议: 不需要,自动同步团队快照

2. **赛道选择**:
   - ❓ 是否需要手动覆盖自动判定?
   - ✅ 建议: 保持自动判定,但允许标记"未完成"

3. **正文编辑器**:
   - ❓ 选择Markdown还是富文本?
   - ✅ 建议: 双模式切换

4. **封面图处理**:
   - ❓ 不符合要求时拒绝还是自动裁剪?
   - ✅ 建议: 拒绝上传,提供裁剪工具

5. **平台引擎**:
   - ❓ 是否支持自定义填写?
   - ✅ 建议: 引擎支持"其他",平台固定选项

6. **提交撤回**:
   - ❓ 是否允许撤回重新提交?
   - ✅ 建议: 允许在评分期前撤回

---

## 🎯 参考平台功能对照表

| 功能 | 惊蛰计划 | itch.io | Ludum Dare | Global Game Jam |
|------|---------|---------|------------|-----------------|
| Draft模式 | ✅ | ✅ | ❌ | ❌ |
| 分步提交 | ✅ 7步 | ✅ | ✅ | ✅ |
| 自动保存 | ✅ | ✅ | ✅ | ❌ |
| 成员快照 | ✅ | ❌ | ✅ | ✅ |
| 维度退出 | ✅ | ❌ | ❌ | ❌ |
| AI披露 | ✅ | ❌ | ❌ | ❌ |
| 赛道选择 | ✅ 3种 | ❌ | ✅ 2种 | ❌ |
| 富文本编辑 | ✅ | ✅ | ✅ | ✅ |
| 视频嵌入 | ✅ | ✅ | ✅ | ✅ |
| 多平台构建 | ✅ 链接 | ✅ | ✅ | ✅ |
| 版本历史 | ✅ | ⚠️ 有限 | ✅ | ❌ |
| 标签系统 | ✅ | ✅ | ✅ | ✅ |
| 移动端支持 | ✅ | ✅ | ✅ | ✅ |

图例: ✅ 支持 | ❌ 不支持 | ⚠️ 有限支持

---

## 📚 参考资料

**研究来源**:
- itch.io官方文档
- Ludum Dare规则和FAQ
- Global Game Jam提交指南
- 多个游戏jam最佳实践文章

**最佳实践文档**:
- [Project Submission Guide - itch.io](https://itch.io/t/186554/project-submission-guide)
- [Upload Instructions - Global Game Jam](https://global-game-jam.gitbook.io/ggj-manual/during-the-event-itself/creating-projects-and-uploading-games/upload-tips)
- [Making the perfect Ludum Dare submission](https://www.gamedeveloper.com/design/making-the-perfect-ludum-dare-submission-game-jam-tips)

---

*版本*: v2.0
*创建日期*: 2025-01-08
*最后更新*: 2025-01-08
*状态*: ✅ 需求已完善,等待技术实现
*下一步*: 创建UI原型和表单设计
