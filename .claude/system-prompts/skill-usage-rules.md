# Skill使用规则 - 强制检查

> **确保在适当场景使用对应的Skill**
> **优先级**: 系统级强制（必须在执行前检查）
> **版本**: v1.0
> **创建时间**: 2025-01-11

---

## 🎯 核心原则

**每次执行任务前，必须检查**：
1. 是否有对应的Skill？
2. 是否应该使用Skill？
3. 是否使用了Skill？

**如果应该用而没用**：
- ❌ 这是严重错误
- ❌ 必须立即纠正
- ❌ 记录到错误日志

---

## 📋 Skill使用映射表

### 文档相关任务

| 任务 | 必须使用的Skill | 何时触发 |
|------|----------------|---------|
| **编写新文档** | docs-write | 创建.md文件时 |
| **更新现有文档** | docs-write | 编辑.md文件时 |
| **审核文档** | docs-review | 检查文档质量时 |
| **审查PR** | docs-review | 审查包含文档的PR时 |

**检查清单**：
- ✅ 我是否调用了Skill工具？
- ✅ Skill是否成功执行？
- ✅ 结果是否符合预期？

---

## 🔍 检测方法

### 方法1：工具调用检测

**在Write/Edit工具后立即检查**：

```
我刚才使用了 Write/Edit 工具
    ↓
问自己：这是文档任务吗？
    ↓
如果是 → 我调用docs-write/docs-review了吗？
    ↓
如果没有 → ❌ 错误！立即调用Skill
```

### 方法2：意图检测

**在任务开始前检查**：

```
用户要求：写文档/审文档/更新文档
    ↓
问自己：这是文档任务吗？
    ↓
如果是 → 必须调用docs-write或docs-review
    ↓
不能用普通方式完成
```

### 方法3：结果验证

**任务完成后验证**：

```
任务完成
    ↓
问自己：我用了正确的Skill吗？
    ↓
如果没有 → ❌ 错误！立即记录到日志
```

---

## 🚨 常见错误场景

### 错误1：写文档不用docs-write

**错误行为**：
```
用户: 写一个README文档
我: [直接用Write工具写文档]
❌ 错误！应该调用 docs-write skill
```

**正确行为**：
```
用户: 写一个README文档
我: [调用 docs-write skill]
    Skill会按照正确的格式和风格撰写
✅ 正确
```

### 错误2：审文档不用docs-review

**错误行为**：
```
用户: 检查一下这个文档质量
我: [直接读取并用普通方式检查]
❌ 错误！应该调用 docs-review skill
```

**正确行为**：
```
用户: 检查一下这个文档质量
我: [调用 docs-review skill]
    Skill会按照writing style guide检查
✅ 正确
```

### 错误3：更新文档不用docs-write

**错误行为**：
```
用户: 更新CHANGELOG
我: [直接用Edit工具编辑]
❌ 错误！应该调用 docs-write skill
```

**正确行为**：
```
用户: 更新CHANGELOG
我: [调用 docs-write skill]
    Skill会按照正确的格式更新
✅ 正确
```

---

## ✅ 正确流程

### 流程1：编写新文档

```
用户要求编写文档
    ↓
识别为文档任务
    ↓
调用 docs-write skill
    ↓
Skill使用Write工具创建文档
    ↓
Skill确保格式和风格正确
    ↓
文档完成
```

### 流程2：审核文档

```
用户要求审核文档
    ↓
识别为审核任务
    ↓
调用 docs-review skill
    ↓
Skill按照writing style guide检查
    ↓
Skill生成审核报告
    ↓
审核完成
```

### 流程3：更新文档

```
用户要求更新文档
    ↓
识别为更新任务
    ↓
调用 docs-write skill
    ↓
Skill使用Edit工具更新文档
    ↓
Skill确保更新符合规范
    ↓
更新完成
```

---

## 🎯 强制检查点

### 检查点1：任务接收时

**每次用户提出任务时**：

```
用户：[任务描述]
    ↓
我：这个任务是什么类型？
    ↓
判断：
  - 文档相关？→ 必须用docs skill
  - Agent相关？→ 必须用agent
  - 命令相关？→ 必须用command
  - 其他？→ 可以直接处理
```

### 检查点2：工具调用前

**每次使用Write/Edit工具前**：

```
我要使用 Write/Edit 工具
    ↓
暂停！问自己：
  这是文档任务吗？
    ↓
  是 → 必须先调用docs skill
  否 → 可以直接使用工具
```

### 检查点3：任务完成后

**每次任务完成后**：

```
任务完成
    ↓
回顾：我用了正确的Skill吗？
    ↓
  如果应该用但没用 → ❌ 记录错误
  如果用了Skill → ✅ 正确
```

---

## 📊 可用的Skill列表

### 当前已安装的Skill

| Skill名称 | 用途 | 何时使用 |
|-----------|------|---------|
| **docs-write** | 文档撰写 | 编写/更新.md文档时 |
| **docs-review** | 文档审核 | 审核文档质量、PR审查时 |
| **hook-development** | Hook开发 | 创建/修改Hook配置时 |
| **command-development** | 命令开发 | 创建新命令工具时 |

### 使用频率

**高频使用**（每次任务都检查）：
- docs-write
- docs-review

**中频使用**（需要时检查）：
- hook-development
- command-development

---

## 🚨 违规后果

### 如果我没有使用应有的Skill

**这是严重错误**，因为：
1. ❌ 违反了项目规范
2. ❌ 没有充分利用工具
3. ❌ 可能产生不符合规范的文档
4. ❌ 浪费了创建Skill的时间

**必须**：
- ✅ 立即纠正
- ✅ 记录到错误日志
- ✅ 反思为什么没用

---

## 💡 预防措施

### 措施1：创建检查清单

**每次执行任务前，问自己**：

```
✓ 这是文档任务吗？→ 用docs-write/docs-review
✓ 这是Agent任务吗？→ 用agent
✓ 这是Hook任务吗？→ 用hook-development skill
✓ 这是命令任务吗？→ 用command-development skill
```

### 措施2：建立触发机制

**特定任务类型自动触发Skill**：

```
检测到关键词："写"、"文档"、"更新" .md文件
    ↓
自动调用 docs-write skill
```

### 措施3：定期审查

**每次会话结束时**：

```
回顾今天完成的任务
    ↓
检查：我是否正确使用了Skill？
    ↓
如果没有：记录到错误日志
```

---

## 📋 快速参考卡

```
┌─────────────────────────────────────┐
│  任务类型检查                       │
├─────────────────────────────────────┤
│  编写文档？→ docs-write             │
│  更新文档？→ docs-write             │
│  审核文档？→ docs-review            │
│  审查PR？→ docs-review              │
│  创建Hook？→ hook-development       │
│  创建命令？→ command-development    │
└─────────────────────────────────────┘
```

---

## 🎯 测试验证

### 测试1：文档任务

```
用户: 写一个README
我: [调用 docs-write skill]
✅ 通过
```

### 测试2：审核任务

```
用户: 审核这个文档
我: [调用 docs-review skill]
✅ 通过
```

### 测试3：非文档任务

```
用户: 查看进度
我: [直接调用 /check-progress]
✅ 通过（不需要skill）
```

---

## 🔄 持续改进

### 记录错误

**每次发现没有使用Skill时**：

```
记录到：development/logs/skill-usage-errors.md

内容：
- 时间
- 任务类型
- 应该用的Skill
- 实际做了什么
- 为什么没用
```

### 定期审查

**每周审查**：
- 统计Skill使用情况
- 识别经常忘记的场景
- 加强这些场景的检查

---

## 📚 相关文档

- [docs-write skill](../skills/docs-write/docs-write/SKILL.md) - 文档撰写Skill
- [docs-review skill](../skills/docs-review/docs-review/SKILL.md) - 文档审核Skill
- [错误日志](../../development/logs/) - Skill使用错误记录

---

**版本**: v1.0
**创建时间**: 2025-01-11
**优先级**: 系统级强制
**更新频率**: 每次错误后更新
