# 团队系统讨论归档 - 2025-01-07

> **模块**：团队系统
> **讨论日期**：2025-01-07
> **参与人**：蜡烛先生（产品经理）、老黑（Claude）
> **状态**：核心规则已确认80%，23个待确认问题已列出

---

## 📊 讨论概览

### 讨论背景
- 从 Q2"组队与赛道的具体规则"开始讨论
- 发现团队系统复杂度极高，堪比评分系统
- 决定创建独立的《团队系统设计文档 v1.0》

### 讨论成果
- ✅ 确认核心规则（团队规模、角色权限、赛道判定等）
- ✅ 独立设计文档《惊蛰计划-团队系统设计文档_v1.0.md》（约650行）
- ✅ 发现并整理23个待确认问题（分类明确）
- ✅ 明确了团队系统与5+个核心系统的集成关系

---

## ✅ 已确认规则

### 1. 团队规模
- ✅ 人数范围：1-9人
- ✅ 允许"单人团队"（仅自己1人）
- ✅ 最多9人（不可超出）

### 2. 赛道判定逻辑
- ✅ 个人赛和团队赛**同时进行**
- ✅ 用户可以**同时参加**两个赛道
- ✅ 报名时不选择赛道
- ✅ 提交作品时根据团队人数自动判定：
  - 团队成员 > 1人 → 自动锁定为**团队赛道作品**
  - 团队成员 = 1人 → 可选**个人赛道**或**团队赛道**

### 3. 成员角色与权限

#### 角色类型
- **队长**（1人/团队）：最高权限
- **副队长**（最多2人）：中级权限
- **普通成员**：基础权限

#### 队长权限
- ✅ 审核加入申请
- ✅ 编辑团队信息（名称、简介）
- ✅ 移除团队成员
- ✅ 转让队长
- ✅ 设置副队长（最多2个）
- ✅ 修改成员身份标签
- ✅ 提交/编辑团队作品

#### 副队长权限
- ✅ 上传游戏
- ✅ 添加游戏作者
- ✅ 修改游戏详情页内容
- ✅ 修改自己的身份标签
- ❌ 移除成员
- ❌ 转让队长
- ❌ 添加新副队长

#### 普通成员权限
- ✅ 修改自己的身份标签
- ✅ 主动退出团队
- ✅ 查看团队信息
- ❌ 提交/编辑团队作品

### 4. 成员身份标签
- ✅ **选填**（不强制）
- ✅ **支持多标签**（一个成员可有多个身份）
- ✅ 预设标签：程序、策划、TA、音效、音乐、美术
- ✅ 支持自定义标签
- ✅ 队长可修改，成员也可自己修改

### 5. 团队功能页面
- ✅ **公开可见**（所有用户可查看）
- ✅ 包含：团队信息、成员列表、成员身份标签、团队作品集、团队成就
- ✅ 第一届仅站内作品，后期支持站外链接
- ✅ 团队成就自动计算（基于站内成就系统）

### 6. 团队管理规则
- ✅ 成员可以主动退出团队
- ✅ **保留作者身份**（退出前已提交的作品仍显示其为作者）
- ✅ 退出成员的个人主页仍显示该团队作品
- ✅ **随时可以添加/移除成员**（无时间限制）
- ❌ 队长**不能**解散团队

### 7. 配套功能
- ✅ **站内私聊系统**（用于陌生招募沟通）
- ✅ 支持邀请码/邀请链接加入
- ✅ 未注册用户点击邀请链接 → 要求先注册

---

## 📋 待确认问题清单

### 🔴 高优先级（6个）

#### Q1: 一个人在同一届比赛中只能加入/创建一个团队？
**建议**：只能加入/创建一个团队

#### Q2: 提交作品后是否锁定成员名单？
**建议**：提交后锁定，不可添加/移除成员

#### Q3: 团队无人时（所有成员都退出）是否自动解散？
**建议**：自动解散

#### Q4: 队长退出时是否必须先转让队长？
**建议**：必须先转让队长

#### Q5: 队长长时间不活跃的自动接管机制？
**建议**：队长30天不登录，自动转让给副队长

#### Q6: 一个团队在一届比赛中只能提交一个作品？
**建议**：只能提交一个作品

---

### 🟡 中优先级（5个）

#### Q7: 团队作品页面如何显示作者（9人团队名字列表问题）？
**建议**：显示"团队XXX + N名成员"，鼠标悬浮显示完整列表

#### Q8: 副队长能否移除成员？
**建议**：不能移除

#### Q9: 团队是否可设置"目标人数"和"招募状态"？
**建议**：可以设置目标人数，达到后自动标记"已满员"

#### Q10: 邀请码/链接是否需要重置和过期机制？
**建议**：邀请码有效期24小时，队长可重置

#### Q11: 评分时的身份判定逻辑（混合身份）？
**建议**：根据被评作品的赛道判定

---

### 🟢 低优先级（3个）

#### Q12: 团队名称是否有重复限制和修改频率限制？
**建议**：允许重名，30天内只能改1次

#### Q13: 个人主页和团队页面的跳转逻辑？
（待确认）

#### Q14-Q23: 其他细节问题
详见《团队系统设计文档 v1.0》

---

## 🎯 关键决策

### 决策1：创建独立设计文档
**背景**：
- 团队系统功能点超过20个
- 复杂度堪比评分系统
- 影响5+个核心系统

**决定**：
- ✅ 创建《惊蛰计划-团队系统设计文档_v1.0.md》
- ✅ 文档规模约650行
- ✅ 包含23个待确认问题

**理由**：
- 团队系统是完整独立模块
- 跨系统影响大（评分、排名、经济、提交、社区）
- 问题数量足够多（23个），需要独立管理

---

## 📈 系统复杂度评估

| 指标 | 数值 | 说明 |
|------|------|------|
| **功能模块** | 9个 | 创建/管理/页面/作品/招募/私聊等 |
| **角色类型** | 3种 | 队长/副队长/普通成员 |
| **权限层次** | 3级 | 不同角色不同权限 |
| **数据表** | 5+ | 团队/成员/角色/作品关联等 |
| **待确认问题** | 23个 | 高6个，中5个，低3个 |
| **文档规模** | 650行 | 堪比评分系统文档 |

---

## 🔄 与其他系统的关系

### 1. 评分系统
- 评分团队作品时的身份判定
- 团队作品的作者身份（成员快照）
- 退出成员仍保留作者身份

### 2. 排名系统
- 个人赛道 vs 团队赛道
- 团队作品排名归属于团队
- 退出成员的个人主页显示历史排名

### 3. 经济系统
- 团队作品打赏分配（未来扩展）
- 团队成就金币奖励分配（未来扩展）

### 4. 游戏提交系统
- 只有队长和副队长可以提交团队作品
- 提交时快照成员列表
- 提交后锁定成员名单（待确认Q2）

### 5. 社区系统
- 组队信息区招募帖
- 站内私聊系统
- 团队可发布话题讨论

---

## 📝 讨论过程中的重要发现

### 发现1：权限系统的复杂性
- 三级角色（队长/副队长/成员）
- 不同权限需要细致划分
- 副队长权限需要特别明确（不能移除成员、不能转让队长）

### 发现2：成员变更的边界情况
- 提交作品后成员变更的影响
- 退出成员的作者身份保留
- 队长退出时的权限继承
- 团队无人时的自动解散

### 发现3：赛道判定的自动化
- 根据团队人数自动判定赛道
- 单人团队可选择的灵活性
- 同时参加两个赛道的规则

### 发现4：站内私聊的必要性
- 邀请码/链接不够灵活
- 陌生招募需要沟通渠道
- 站内私聊是必备配套功能

---

## 🎯 下一步行动

### 立即行动
1. ✅ 创建《团队系统设计文档 v1.0》
2. ⏳ 逐个确认23个待确认问题（从Q1开始）
3. ⏳ 补充UI/UX设计稿
4. ⏳ 补充API接口文档

### 后续行动
5. ⏳ 补充数据库ER图
6. ⏳ 前端组件设计
7. ⏳ 测试用例编写

---

## 📊 成果总结

### 文档产出
- ✅ 《惊蛰计划-团队系统设计文档 v1.0》（650行）
  - 9个功能模块
  - 23个待确认问题
  - 5个核心数据表
  - 与5+个系统的集成关系

### 规则确认
- ✅ 7大核心规则模块
- ✅ 3级角色权限体系
- ✅ 赛道自动判定逻辑
- ✅ 团队管理完整流程

### 问题发现
- ✅ 23个待确认问题（已分类）
- ✅ 6个高优先级问题（影响系统稳定性）
- ✅ 5个中优先级问题（影响用户体验）
- ✅ 3个低优先级问题（可后续优化）

---

*讨论完成时间：2025-01-07*
*记录人：Claude (老黑)*
*归档版本：v1.0*
