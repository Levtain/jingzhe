# 命令工具指南

> **命令工具的快速参考和使用说明**

---

## 🎯 可用命令

### 查询类（静默执行）

| 命令 | 用途 | 示例 |
|------|------|------|
| /check-progress | 查看项目进度 | "看看进度" |
| /token-check | 查看Token使用 | "检查Token" |

### 操作类（请求确认）

| 命令 | 用途 | 示例 |
|------|------|------|
| /sync-docs | 同步文档 | "同步一下" |
| /discuss | 讨论问题 | "开始讨论" |
| /daily-summary | 生成总结 | "今天先这样" |
| /check-doc-quality | 质量检查 | "检查文档" |
| /check-completion | 完整性检查 | "检查完整性" |
| /task-planner | 任务规划 | "规划任务" |

---

## 💬 自然语言映射

### 查询进度

**自然语言**：
- "看看进度"
- "进度到哪了"
- "现在怎么样"
- "当前状态"
- "完成度如何"
- "还剩多少"

**AI会**：静默调用 /check-progress

---

### 同步文档

**自然语言**：
- "同步一下"
- "更新文档"
- "同步到设计文档"
- "保存讨论结果"

**AI会**：询问是否调用 /sync-docs

---

### 讨论问题

**自然语言**：
- "开始讨论"
- "继续讨论"
- "讨论下一个"
- "讨论问题"

**AI会**：询问是否调用 /discuss

---

### 结束会话

**自然语言**：
- "今天先这样"
- "今天就到这"
- "结束了"
- "总结一下"
- "今天干完了"
- "下班了"

**AI会**：询问是否调用 /daily-summary

---

### 检查文档

**自然语言**：
- "检查一下"
- "检查文档"
- "质量检查"
- "有问题吗"

**AI会**：明确检查对象后调用相应命令

---

## 🎨 三种执行模式

### 模式A：静默执行

**特点**：直接调用，无需确认

**适用**：
- ✅ 查询类操作
- ✅ 不修改文件
- ✅ 不需要用户输入

**示例**：
```
你: 看看进度
AI: [静默调用 /check-progress]
    📊 当前进度：96/149 (64%)
```

---

### 模式B：确认执行

**特点**：先询问，再执行

**适用**：
- ✅ 修改文件的操作
- ✅ 需要时间的操作
- ✅ 可能不是用户想要的

**示例**：
```
你: 同步一下
AI: 要同步文档吗？
    我会调用 /sync-docs 将已确认问题同步到设计文档
    （大约需要1-2分钟）
你: 好
AI: [调用 /sync-docs]
```

---

### 模式C：智能推荐

**特点**：任务完成后主动推荐

**适用**：
- ✅ 任务明确完成
- ✅ 会话即将结束
- ✅ 用户遇到困难

**示例**：
```
你: 这个问题确认了
AI: 这个问题确认了！
    要同步文档吗？
    我会调用 /sync-docs 将已确认问题同步到设计文档
```

---

## 📖 详细命令说明

### /check-progress

**功能**：显示项目当前进度

**显示内容**：
- 总进度（已完成/总数/百分比）
- 已完成模块列表
- 待讨论模块列表
- 进度增长趋势

**参数**：
```bash
/check-progress              # 完整显示
/check-progress --brief      # 简短摘要
/check-progress --module X   # 查看特定模块
```

---

### /sync-docs

**功能**：同步已确认问题到设计文档

**同步内容**：
- questions.md → 设计文档
- questions.md → CHANGELOG.md
- 版本号更新
- 引用链接更新

**参数**：
```bash
/sync-docs                   # 同步所有已确认问题
/sync-docs 推荐位机制        # 只同步指定模块
/sync-docs --confirm         # 同步前逐个确认
```

---

### /discuss

**功能**：启动问题讨论Agent

**工作流程**：
1. 加载问题清单
2. 显示未讨论模块
3. 逐个讨论问题
4. 记录决策结果

**参数**：
```bash
/discuss                     # 默认推荐模块
/discuss 推荐位机制          # 指定模块
/discuss --continue          # 继续上次讨论
```

---

### /daily-summary

**功能**：生成今日工作总结

**生成内容**：
- 今日完成任务列表
- 进度增长统计
- 下一步建议
- 重要决策记录

**参数**：
```bash
/daily-summary               # 标准总结
/daily-summary --detailed    # 详细版
/daily-summary --save        # 保存到文件
```

---

### /check-doc-quality

**功能**：检查文档质量

**检查项**：
- P0：格式错误、版本号缺失
- P1：引用链接失效、交叉引用错误
- P2：样式不一致、拼写问题

**参数**：
```bash
/check-doc-quality           # 检查所有文档
/check-doc-quality X.md      # 检查单个文件
/check-doc-quality --fix     # 自动修复
```

---

### /task-planner

**功能**：生成任务计划

**生成内容**：
- 当前状态分析
- 任务优先级排序
- 任务拆分
- 工作量估算

**参数**：
```bash
/task-planner                # 生成整体计划
/task-planner --week         # 本周计划
/task-planner X              # 模块计划
```

---

### /check-completion

**功能**：检查模块完整性

**检查项**：
- 问题覆盖率
- 文档完整性
- 功能完整性

**参数**：
```bash
/check-completion            # 检查所有模块
/check-completion X          # 检查特定模块
```

---

## 💡 使用技巧

### 技巧1：用自然语言

```
✅ 好的: "看看进度"
❌ 不好: "/check-progress"
```

**AI会自动理解意图**

### 技巧2：等待AI推荐

```
你: 这个问题确认了
AI: 这个问题确认了！
    要同步文档吗？
你: 好
```

**AI会在合适的时机推荐工具**

### 技巧3：可以拒绝

```
AI: 要同步文档吗？
你: 不需要
AI: 好的 👌
```

**完全可以根据需要拒绝**

---

## 🚫 不推荐工具的情况

AI不会在以下情况推荐工具：

- ❌ 你正在深入思考时
- ❌ 你刚明确拒绝过
- ❌ 你只是闲聊（"你好"、"谢谢"）
- ❌ 你只是在浏览/查看文档

---

## 📊 工具统计

### 当前版本 (v1.19)

| 类型 | 数量 | 列表 |
|------|------|------|
| Command工具 | 8个 | 见上文 |
| Agent工具 | 6个 | workflow-orchestrator等 |
| Hook工具 | 7个 | SessionStart、PostToolUse等 |
| **总计** | **21个** | |

---

## 🔄 相关文档

- [Agent快速参考](../agents/README.md) - Agent使用指南
- [自然语言系统](../../prompts/README.md) - 自然语言交互说明
- [命令开发指南](development.md) - 如何开发新命令

---

## 🎯 快速参考

```
查询进度: "看看进度"
同步文档: "同步一下"
讨论问题: "开始讨论"
生成总结: "今天先这样"
检查质量: "检查文档"
```

---

**版本**: v1.0
**更新**: 2025-01-11
**维护**: Claude (AI助手)
