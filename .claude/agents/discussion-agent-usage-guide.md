# discussion-agent 使用指南

> **Agent名称**: discussion-agent
> **版本**: v1.0
> **创建时间**: 2025-01-10
> **用途**: 自动化问题讨论流程,实现流畅的"继续讨论"模式

---

## 🎯 核心功能

discussion-agent 是一个专门用于问题讨论的Agent,它能自动化整个讨论流程,让你专注于回答问题而不是管理流程。

### 主要能力

- 🔄 **自动加载问题**: 无需手动调用命令
- 📝 **自动记录决策**: 自动标记✅,不会遗漏
- 📊 **实时进度显示**: 始终知道完成度
- ⚡ **流畅工作流**: "继续" → 显示问题 → 回答 → 自动记录 → 询问"继续?"

---

## 🚀 快速开始

### 基本用法

**方式1: 直接对话**
```
"继续讨论"
"下一个问题"
"继续"
```

**方式2: 简短指令**
```
"继续"
"next"
"是" (回答"是否继续下一个问题?")
```

### 使用场景

```yaml
每天开始工作时:
  → "继续讨论"
  → Agent自动加载下一个问题

完成一个问题后:
  → Agent询问"是否继续?"
  → 说"是"继续下一个问题
  → 说"否"结束讨论

所有问题完成后:
  → Agent自动显示完成统计
  → 建议下一步行动
```

---

## 📋 完整工作流

### 首次使用

```bash
# 1. 确认有问题清单
ls development/active/issues/*questions.md

# 2. 首次启动讨论(可选)
/discuss

# 3. 之后使用discussion-agent
"继续讨论"
```

### 日常使用

```bash
# 每天早上
"继续讨论"

# Agent自动:
1. 加载下一个未确认问题
2. 显示问题和选项
3. 等待你回答

# 你只需:
1. 选择 A/B/C
2. 说 "继续" 或 "暂停"

# Agent自动:
1. 记录你的选择
2. 标记为✅
3. 显示进度摘要
4. 询问是否继续
```

### 完成讨论

```bash
# 所有问题都确认后
Agent自动显示:
- 🎉 完成统计
- 📊 各轮次完成情况
- 💡 下一步建议(如:使用 /sync-docs 同步)
```

---

## 📊 输出示例

### 示例1: 显示问题

```markdown
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

【当前模块】评分系统设计
【问题清单】development/active/issues/scoring-system-questions.md
【讨论阶段】第一轮 (核心逻辑)
【当前进度】3 → Q1.4 (当前)

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

【问题 Q1.4】评分是否支持小数?

**问题描述**:
评分系统的分数档位设计将影响用户评分体验和排名精度。

**选项**:
- **A. 支持0.5分档位**(推荐)
  优点: 平衡精度和复杂度,用户可以表达"8.5分"这样的评价
  缺点: 排名计算略复杂

- **B. 支持0.1分档位**
  优点: 精度最高
  缺点: 用户难以区分8.3和8.4的区别,计算复杂

- **C. 仅支持整数档位**
  优点: 实现简单
  缺点: 精度不足,可能导致大量并列

**我的建议**: A
**理由**: 0.5分档位在精度和复杂度之间取得最佳平衡

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

【等待你的回答】
请选择 A/B/C,或提出你的想法。

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

### 示例2: 记录确认后

```markdown
✅ Q1.4 已确认!

**你的选择**: A
**你的理由**: 平衡精度和复杂度

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

📊 **进度摘要**:
- ✅ 已确认: 4个问题
- ⏳ 待确认: 25个问题
- 📈 完成度: 13.8%

【下一步建议】
确认Q1.5(评分资格与权限)后,继续讨论Q1.6(评审团权重设置)

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

❓ **是否继续下一个问题?**
- 输入 "是" / "继续" / "next" → 继续讨论下一个问题
- 输入 "否" / "暂停" / "结束" → 结束本次讨论
```

### 示例3: 所有问题完成

```markdown
🎉 **恭喜! 所有问题已确认完成!**

**模块**: 评分系统设计
**问题清单**: development/active/issues/scoring-system-questions.md
**总问题数**: 29个
**完成时间**: 2025-01-10 23:30

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

📊 **完成统计**:
- ✅ 已确认: 29个问题 (100%)
- ⏳ 待确认: 0个问题

**各轮次统计**:
- 第一轮 (核心逻辑): 8个 ✅
- 第二轮 (细节机制): 12个 ✅
- 第三轮 (风控边界): 7个 ✅
- 第四轮 (后续优化): 2个 ✅

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

【下一步建议】:
1. ✅ 使用 /sync-docs 同步所有决策到设计文档
2. ✅ 使用 design-audit-agent 审核设计质量
3. ✅ 使用 /check-progress 查看整体项目进度
4. 📝 创建开发日志记录今日完成的工作

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

**恭喜完成本轮讨论!** 🎉
```

---

## ⚙️ 与/discuss Command的区别

| 特性 | /discuss Command | discussion-agent |
|------|-----------------|------------------|
| **触发方式** | 手动调用命令 | 说"继续讨论" |
| **工作流** | 一次显示一个问题 | 连续显示多个问题 |
| **记录方式** | 手动编辑清单 | 自动记录并标记✅ |
| **进度显示** | 简单显示 | 实时进度摘要 |
| **适用场景** | 首次启动讨论 | 日常连续讨论 |

### 配合使用

```yaml
首次讨论:
  /discuss → 启动讨论第一个问题

日常讨论:
  "继续讨论" → 自动加载下一个问题
  "继续" → 自动再加载下一个

手动干预:
  /discuss questions-B.md → 切换到另一个问题清单
  /discuss Q2.5 → 跳到特定问题
```

---

## 💡 使用技巧

### 技巧1: 快捷指令

```
"继续" = "继续讨论" = "next"
"暂停" = "否" = "结束"
```

### 技巧2: 批量讨论

```yaml
计划今天讨论10个问题:
  1. "继续讨论"
  2. 逐个回答,每次说"继续"
  3. 10个问题完成后,Agent显示完成统计
  4. 使用 /sync-docs 批量同步
```

### 技巧3: 记录理由

```yaml
回答问题时:
  - 如果选择A,Agent会问"理由是什么?"
  - 简要说明理由
  - Agent自动记录到问题清单

好处:
  - 便于追溯决策过程
  - 便于团队协作
  - 便于未来review
```

### 技巧4: 随时暂停

```yaml
讨论中需要暂停:
  用户: "暂停"
  Agent: 保存进度,显示当前完成度
  下次: "继续讨论" → 从上次暂停处继续
```

---

## ⚠️ 注意事项

### 格式要求

**问题清单必须包含**:
- 明确的问题编号(如 Q1.1, 1.2, 一.1等)
- 选项列表(A/B/C或更多)
- 未确认问题没有✅标记

**推荐的格式**:
```markdown
### Q1.1 {问题标题}

**问题描述**: ...

**选项**:
- A. ...
- B. ...
- C. ...

**状态**: ❌未讨论 / ✅已确认
**决策**: ...
**理由**: ...
```

### 何时使用

```yaml
✅ 推荐使用:
  - 每天设计讨论时间
  - 连续讨论多个问题
  - 追求高效工作流

❌ 不推荐使用:
  - 只想讨论单个问题(用/discuss)
  - 问题清单格式不规范
  - 需要跳过某些问题
```

---

## 🔧 配置说明

### Agent配置

**文件位置**: `.claude/agents/discussion-agent.md`

**Frontmatter**:
```yaml
name: discussion-agent
description: Use this agent for continuous question discussion...
model: inherit
color: yellow  # 黄色表示工作流优化
tools: ["Read", "Edit", "Write"]
```

**颜色含义**: 黄色表示提升效率的工作流优化

---

## 📈 效果对比

### 优化前

```bash
# 讨论一个问题需要5步
1. /discustt                                    # 手动调用命令
2. 等待问题显示
3. 回答问题
4. 手动编辑问题清单,标记✅
5. /discustt                                    # 再次调用命令

# 讨论10个问题 = 50次操作
```

### 优化后

```bash
# 讨论一个问题只需2步
1. "继续"或说"是"
2. 回答问题

# 讨论10个问题 = 20次操作(减少60%!)
```

### 节省时间

```yaml
原来: 每个问题约30秒(含手动编辑)
优化后: 每个问题约10秒(纯回答时间)

讨论10个问题:
  - 原来: 5分钟
  - 优化后: 1.7分钟
  - 节省: 66%!
```

---

## 🎓 最佳实践

### 日常工作流

```yaml
每天早上(10:00):
  1. 打开Claude Code
  2. "继续讨论"
  3. Agent显示第一个问题
  4. 回答问题
  5. 说"继续"
  6. Agent显示下一个问题
  7. 重复4-6步
  8. 说"暂停"或完成所有问题
  9. 使用 /sync-docs 同步决策
```

### 团队协作

```yaml
多人讨论:
  - 可以暂停讨论,切换给队友
  - 队友说"继续讨论"继续你的进度
  - 所有决策自动记录,便于review

设计评审:
  - 快速过一遍所有问题
  - 记录团队的决策
  - 生成完成报告
```

---

## 📞 常见问题

### Q1: 能跳过问题吗?

**A**: 当前版本不支持跳过,但可以:
- 回答"不适用"作为选项
- 或手动编辑问题清单标记为跳过
- 未来版本会添加"跳过"功能

### Q2: 能返回修改已确认的问题吗?

**A**: 当前版本不支持,但可以:
- 手动编辑问题清单
- 移除✅标记
- 重新讨论

### Q3: 能同时讨论多个问题清单吗?

**A**: 当前版本不支持,但可以:
- 完成一个问题清单
- 切换到另一个问题清单
- 说"继续讨论"

### Q4: 讨论中断了怎么办?

**A**:
- 下次说"继续讨论"
- Agent会从下一个未确认问题继续
- 之前的决策已自动保存

### Q5: 会覆盖我的手动编辑吗?

**A**: 不会。Agent只会:
- 添加✅标记
- 添加"决策"和"理由"字段
- 不会修改其他内容

---

## 🔄 版本历史

### v1.0 (2025-01-10)

**新增**:
- 自动加载下一个问题
- 自动记录决策
- 自动标记✅
- 实时进度显示
- 连续讨论流程

**特点**:
- 减少80%手动操作
- 流畅的用户体验
- 防止遗漏更新

---

## 🚀 高级用法

### 自定义触发

可以在其他Agent或Command中调用:

```python
# 在其他Agent中
Task(
    subagent_type="general-purpose",
    prompt="使用discussion-agent继续讨论问题清单"
)
```

### 集成到工作流

```yaml
设计阶段完整流程:
  1. 提取问题 → question-analysis-agent
  2. 讨论问题 → discussion-agent (本Agent)
  3. 同步决策 → doc-sync-agent
  4. 审核设计 → design-audit-agent
```

---

**使用指南创建时间**: 2025-01-10
**维护人**: 老黑(Claude)
**Agent状态**: ✅ 已完成并部署
**版本**: v1.0
