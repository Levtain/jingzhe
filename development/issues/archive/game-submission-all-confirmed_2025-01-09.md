# 游戏提交系统全部问题确认记录

> **所有优先级问题 - 完整确认记录**
> 确认日期: 2025-01-09
> 确认方式: /discuss 命令逐个讨论
> 状态: ✅ 全部确认完成 (13/13)

---

## 📋 确认摘要

**总计确认**: 13个问题
- **P0**: 4个 ✅
- **P1**: 4个 ✅
- **P2**: 2个 ✅
- **P3**: 3个 ✅

**讨论时长**: 约30分钟
**确认方式**: 用户快速决策，专业反馈

---

## 🔴 P0优先级 - 立即修复 (4个)

### ✅ P0-1: 截图数量限制不一致

**确认结果**: **3-5张**

**理由**:
- 平衡存储成本和展示需求
- 参考主流平台标准
- 第一届参赛者较多，需控制成本

---

### ✅ P0-2: "未完成作品"选项完全缺失

**确认结果**: ✅ **需要"未完成作品"选项** + 完整规则

**完整规则**:
1. **提交截止前**:
   - 可撤回，修改后重新提交
   - 可切换为完成状态

2. **提交截止后**:
   - 未完成状态 → 不可被评分
   - 可撤回，且更新不需管理员确认
   - 只是不纳入评分排名

3. **功能定义**:
   - 复选框: ☐ 标记为"未完成作品"
   - 效果:
     - 游戏列表页标注"未完成"标签
     - 不参与任何维度的评分和排名
     - 仍可被下载、评论、点赞
     - 作者仍可以给其他游戏评分

**位置**: 步骤7（提交确认）之前，作为独立步骤

---

### ✅ P0-3: "游戏类型Tag"步骤缺失

**确认结果**:
- **必填**: ✅ 是
- **最少**: 1个
- **最多**: 5个
- **自定义Tag**: ❌ 不允许（第一届仅限固定选项）

**15个固定选项**:
动作、冒险、休闲、解谜、角色扮演、射击、策略、模拟、体育、竞速、恐怖、生存、教育、音乐、视觉小说

**位置**: 步骤3.5（游戏正文之后，媒体资源之前）

---

### ✅ P0-4: "AI使用披露"步骤缺失

**确认结果**: ✅ **需要AI使用披露（简化版）**

**完整流程**:

1. **AI工具使用声明** (单选，必填):
   - ○ 否，我没有使用生成式AI工具
   - ○ 是，我在创作中使用了生成式AI工具

2. **生成内容类型** (多选，选择"是"时必填):
   - ☐ 文本（剧情、对话、文案等）
   - ☐ 视觉资源（角色立绘、背景、UI等）
   - ☐ 音频资源（音乐、音效等）

3. **不收集**:
   - ❌ 不收集使用了哪些工具
   - ❌ 不收集AI内容占比

4. **数据隐私**:
   - AI使用详情不显示在游戏详情页
   - 仅管理员可见

5. **影响说明**:
   - "根据比赛规则，使用AI的维度将不参与该维度的评分和排名。例如：如果使用AI生成美术，则'视觉效果'维度不参与排名。"

**位置**: 步骤5.5（链接与平台之后，评分维度退出之前）

---

## ⚠️ P1优先级 - 高优先级 (4个)

### ✅ P1-1: 源码链接提交后无法修改

**确认结果**: **选项A**

**规则**:
- ✅ 评分期开始前: 允许随时修改
- ❌ 评分期开始后: 仅允许修正(需管理员审核)
- 理由: 类似下载链接，源码链接也可能失效或填错

---

### ✅ P1-2: Draft与已提交游戏的UI混淆风险

**确认结果**: **必须加状态标签 + 分色卡片 + 不同操作按钮**

**一句话对外规则**:
- 绿卡片 = 已锁定的正式作品
- 黄卡片 = 还能改的草稿
- 灰卡片 = 你撤回来的，可重新提交

**UI落地**（直接贴给前端）:

**状态标签**（左上角 16×16 圆点 + 文字）:
- 🟢 已提交
- 🟡 草稿
- 🔘 已撤回（比红色友好，用灰色）

**卡片配色**:
- 已提交：白底 + 绿色左边框 4px
- 草稿：白底 + 黄色左边框 4px
- 已撤回：浅灰底 + 灰色左边框 4px

**操作按钮**（每卡片最多3个，按状态出现）:

| 状态 | 按钮1 | 按钮2 | 按钮3 |
|------|-------|-------|-------|
| 已提交 | [查看] | [撤回] | —— |
| 草稿 | [继续编辑] | [删除草稿] | —— |
| 已撤回 | [重新提交] | [查看] | [删除] |

**二次确认文案**:
- 删除草稿："草稿删除后不可恢复，确定？"
- 撤回已提交作品："撤回后作品不再参与评审，24h内可重新提交，确定？"
- 删除已撤回作品："删除后无法找回，确定？"

**交互细节**:
- 列表默认按「状态」再按「更新时间」倒序：已提交 > 草稿 > 已撤回
- 同一行内如果同时出现「已提交」+「草稿」，在顶部用8px间距分隔，并给出文字提示："你已有正式作品，仍可继续润色草稿，但提交后会替换旧作品。"

**实现成本**:
- 后端已有 status ENUM('draft','published','withdrawn')，接口直接复用
- 前端纯展示逻辑，0新接口，半天可提测

**验收标准**:
- ✅ 用户5秒内能说出哪张是正式作品
- ✅ 误点「删除」前必出二次确认
- ✅ 按钮不超过3个，移动端一屏刚好点中
- 落地后，运营无需再发"如何区分草稿"的FAQ，客服量预期降80%

---

### ✅ P1-3: 游戏撤回后的作者快照更新逻辑未定义

**确认结果**: **作者快照永久保留，不可修改**

**核心理念**:
- **尊重每一位创作者**
- **参与创作 = 永久作者身份**
- **不可剥夺创作者的署名权**

**规则**:
1. **一旦提交，作者快照永久锁定**
2. **撤回后重新提交也不能修改作者列表**
3. **成员变更只能在撤回前完成，提交即锁定**
4. **防止"撤回-换人-重新提交"的滥用行为**

---

### ✅ P1-4: 赛季结束时的批量处理逻辑未定义

**确认结果**: **选项A + 保留Draft**

**赛季结束处理**:
- 手动触发
- 自动备份
- 分批处理（每批100条）
- 完成后通知管理员

**Draft处理**: **保留Draft，但标记赛季归属**
```sql
-- 不删除，而是标记
UPDATE games
SET season_status = 'past_season',
    visible_in_list = FALSE  -- 不在游戏列表显示
WHERE status = 'draft'
AND season_id = '2025春季赛';
```

**好处**:
- 用户仍可在"我的草稿"中找到上赛季的未完成作品
- 可以手动选择"继续编辑"或"删除"
- 符合"尊重每一位创作者"的核心价值观

**处理任务**:
1. **硬核玩家标记移除**: 批量移除，记录历史
2. **Draft标记上赛季**: 不删除，仅标记
3. **游戏状态更新**: 批量更新为"past_season"

**技术实现**:
- 使用后台任务队列 (如Celery、Bull)
- 分批处理，每批100条记录
- 处理完成后发送通知给管理员

---

## ⚠️ P2优先级 - 中优先级 (2个)

### ✅ P2-1: 排他锁接管机制的UI提示不清晰

**确认结果**: **明确告知20秒自动交接，不限制再次申请**

**接管弹窗UI设计**:
```
┌─────────────────────────────────────┐
│  副队长B申请接管编辑权               │
│                                     │
│  副队长B希望编辑游戏草稿，是否同意?   │
│                                     │
│  ⚠️ 20秒内无响应将自动交接           │
│                                     │
│  [拒绝] [同意]                      │
└─────────────────────────────────────┘
```

**关键参数**:
- 自动交接时间: **20秒**（比30秒更合理）
- 拒绝后限制: **不限制**（保持团队协作灵活性）

---

### ✅ P2-2: 游戏类型与评分维度的关系未定义

**确认结果**: **不强制关联，也不用提示**

**规则**:
- 用户可自由选择退出哪些评分维度
- 不提供任何提示或限制
- 完全尊重用户的自由选择权

**理由**:
- 音乐游戏可能用了AI生成音乐，退出音乐维度评分是合理的
- 用户最清楚自己作品的情况
- 避免系统过度干预

---

## 💡 P3优先级 - 可选优化 (3个)

### ✅ P3-1: 添加"草稿预览"功能

**确认结果**: **第一届就实现**

**功能**: 在Draft编辑页面添加"预览"按钮，预览游戏详情页的最终效果

**用户价值**:
- 实时查看游戏在列表页的展示效果
- 避免提交后发现排版问题
- 提升用户信心

---

### ✅ P3-2: 添加"提交前检查清单"自动验证

**确认结果**: **第一届就实现**

**功能**: 系统自动验证关键项，未通过的项高亮显示

**实现方式**:
- 必填项未填写时显示**红框**
- 高亮提示需要完成的项
- 提交前自动检查所有必填项

---

### ✅ P3-3: 添加"源码链接"二次确认弹窗

**确认结果**: **第一届就实现**

**功能**: 填写源码链接后弹窗确认，显示链接预览

**实现方式**:
- 用户填写源码链接后
- 弹窗显示链接预览
- 用户确认后才能提交

---

## 📊 完整统计

| 优先级 | 数量 | 状态 | 完成度 |
|--------|------|------|--------|
| **P0** | 4个 | ✅ 全部确认 | 100% |
| **P1** | 4个 | ✅ 全部确认 | 100% |
| **P2** | 2个 | ✅ 全部确认 | 100% |
| **P3** | 3个 | ✅ 全部确认 | 100% |
| **总计** | **13个** | ✅ **全部确认** | **100%** |

---

## 🎯 下一步行动

### 需要更新的文档

1. **设计文档v1.0 → v1.1**:
   - 补充步骤3.5: 游戏类型选择
   - 补充步骤5.5: AI使用披露
   - 补充步骤6.5: 未完成作品选项
   - 更新步骤4: 截图数量改为3-5张
   - 更新版本管理: 源码链接修改规则
   - 补充"我的游戏"页面UI设计
   - 明确作者快照永久保留规则
   - 补充赛季结束批量处理逻辑
   - 更新排他锁接管时间（20秒）
   - 删除游戏类型与评分维度的关联检查
   - 添加草稿预览功能
   - 添加提交前自动验证
   - 添加源码链接二次确认

2. **需求文档v2.0 → v2.1**:
   - 更新截图数量为3-5张
   - 简化AI使用披露要求（不收集工具和占比）

3. **问题清单**:
   - 标记所有问题为已完成
   - 更新确认结果

---

## 🏆 核心设计原则总结

通过这次讨论，明确了以下核心设计原则：

1. **尊重每一位创作者**: 作者快照永久保留，不可修改
2. **用户体验优先**: 状态标签、分色卡片、二次确认
3. **灵活性与约束平衡**: 源码链接可修改、排他锁20秒自动交接
4. **数据保留优先**: Draft保留不删除，仅标记赛季
5. **第一届高标准**: P3优化建议全部实现

---

**归档完成时间**: 2025-01-09
**归档人员**: 老黑(Claude)
**状态**: ✅ 所有问题全部确认，等待更新设计文档
